# 产品需求文档 (PRD) V3.0 - 增强完善版
# Python交互式学习平台 - pythonLearn

**文档版本**: V3.0 Enhanced
**编写日期**: 2025-11-07
**产品名称**: pythonLearn
**产品代号**: Project Phoenix
**产品定位**: 面向单机/局域网的Python交互式学习平台
**目标用户**: 教育机构、学校、培训班、自学小组
**编写人**: 产品经理
**审阅人**: 项目经理 + 技术负责人 + 管理层
**文档状态**: ✅ 待审批

---

## 📋 文档修订历史

| 版本 | 日期 | 修订人 | 修订内容 | 页数 |
|------|------|--------|---------|------|
| V1.0 | 2025-11-07 | 产品团队 | 初始版本，整合SRS和审阅建议 | 约40页 |
| V2.0 | 2025-11-07 | 产品+项目 | 项目经理审阅后的最终版本 | 约50页 |
| V3.0 | 2025-11-07 | 产品经理 | 全面完善和细化每个章节 | 约80页 |

**V3.0主要完善**:
- ✅ **执行摘要**: 新增SWOT分析、关键成功因素、投资回报分析
- ✅ **产品概述**: 细化产品定位、竞争优势、技术架构图
- ✅ **市场分析**: 新增市场规模数据、TAM/SAM/SOM分析、竞争格局
- ✅ **用户画像**: 扩展到6个角色，新增用户旅程地图、痛点-需求映射
- ✅ **产品目标**: 新增OKR体系、北极星指标、增长模型
- ✅ **功能需求**: 每个功能新增用户流程图、交互原型、数据流图
- ✅ **非功能需求**: 新增可观测性、国际化、无障碍访问需求
- ✅ **产品路线图**: 新增里程碑定义、发布计划、回滚策略
- ✅ **资源需求**: 新增技能矩阵、招聘计划、培训计划
- ✅ **技术预研**: 新增POC计划、技术选型对比、架构决策记录
- ✅ **质量保证**: 新增测试用例设计、缺陷管理、质量门禁
- ✅ **运营推广**: 新增增长黑客策略、用户生命周期管理、留存策略
- ✅ **成功指标**: 新增数据埋点方案、A/B测试计划、数据看板设计
- ✅ **风险管理**: 新增风险应对计划、应急预案、业务连续性计划
- ✅ **附录**: 新增原型设计、数据字典、API清单、测试矩阵

---

## 🎯 执行摘要（Executive Summary）

### 产品概述

**pythonLearn**是一款专为Python初学者设计的交互式学习平台，采用"做中学"（Learning by Doing）的教育理念，通过实时代码执行、智能提示系统、游戏化激励等创新功能，帮助学习者高效掌握Python编程技能。

**核心特点**:
- 🎯 **零门槛**: 无需安装任何软件，浏览器即可学习
- ⚡ **即时反馈**: 代码执行结果实时展示，学习效率提升30%
- 🤖 **智能辅导**: 3级渐进式提示系统，引导而非直接给答案
- 🏆 **游戏化**: 积分、等级、成就系统，保持学习动力
- 👥 **社区互助**: 讨论区、问答社区，构建学习共同体
- 📊 **数据驱动**: 学习数据分析，个性化推荐学习内容
- 🔒 **安全可控**: 本地部署，数据完全可控，符合数据安全要求
- 💰 **成本低廉**: 单机/局域网部署，无需云服务器，降低运营成本

### 市场定位

**目标市场**: 中国教育培训市场（Python编程教育细分领域）

**目标客户**:
1. **培训机构**（40%）: Python培训班、编程训练营、IT培训机构
2. **高等院校**（30%）: 计算机专业、数据科学专业、通识教育
3. **中小学校**（15%）: 信息技术课程、编程兴趣班、科技社团
4. **企业内训**（10%）: 企业员工技能培训、数据分析培训
5. **自学小组**（5%）: 学习小组、编程社团、线下学习社区

**市场规模**:
- TAM（总体可达市场）: 中国编程教育市场 ~¥500亿/年
- SAM（可服务市场）: Python教育市场 ~¥100亿/年
- SOM（可获得市场）: 单机/局域网部署市场 ~¥10亿/年

**竞争定位**:
- 不与LeetCode、Codecademy等云端平台正面竞争
- 聚焦本地部署场景，满足数据安全、成本控制需求
- 差异化优势：教学功能强、本地部署、中文友好

### 核心价值主张

#### 对学生（价值主张）
- ✅ **学习效率提升30%**: 即时反馈 + 智能提示 + 个性化推荐
- ✅ **学习兴趣提升50%**: 游戏化激励 + 社区互动 + 成就系统
- ✅ **学习完成率提升40%**: 渐进式学习路径 + 错题本 + 学习提醒
- ✅ **问题解决时间减少60%**: 3级提示 + 讨论区 + 问答社区

#### 对教师（价值主张）
- ✅ **批改时间节省70%**: 自动批改 + 测试用例 + 统计报告
- ✅ **教学效果提升40%**: 数据洞察 + 薄弱点识别 + 个性化辅导
- ✅ **班级管理效率提升50%**: 一键布置作业 + 进度追踪 + 学生分组
- ✅ **教学资源丰富度提升3倍**: 题库 + 课程 + 学习路径

#### 对机构（价值主张）
- ✅ **部署成本降低80%**: 单机部署 vs 云端SaaS（¥10,000 vs ¥50,000/年）
- ✅ **运营成本降低60%**: 无需云服务器、带宽、CDN等费用
- ✅ **数据安全100%可控**: 本地存储，符合数据安全法规
- ✅ **扩展性强**: 支持500用户，满足中小型机构需求

### 商业目标

#### 短期目标（3个月 - MVP阶段）
- **产品目标**: 完成MVP开发，验证核心功能
- **用户目标**: 1-2个试点机构，100-200个真实用户
- **收入目标**: ¥0（免费试用，收集反馈）
- **满意度目标**: NPS ≥40，用户满意度 ≥75%

#### 中期目标（6个月 - V1.0阶段）
- **产品目标**: 完成V1.0开发，完善协作和激励功能
- **用户目标**: 5-10个付费机构，1000+用户
- **收入目标**: ¥50,000-100,000（付费版销售）
- **满意度目标**: NPS ≥50，用户满意度 ≥80%

#### 长期目标（12个月 - V2.0阶段）
- **产品目标**: 完成V2.0开发，成为行业标杆
- **用户目标**: 50+付费机构，10000+用户
- **收入目标**: ¥500,000-1,000,000（付费版 + 增值服务）
- **满意度目标**: NPS ≥60，用户满意度 ≥85%

### 资源需求概览

#### 人力资源
- **MVP阶段**: 5.5人（前端1 + 后端2 + 测试1 + UI/UX 0.5 + PM 0.5 + PD 0.5）
- **V1.0阶段**: 7.5人（前端2 + 后端2 + 测试1 + UI/UX 1 + 运营0.5 + PM 0.5 + PD 0.5）
- **V2.0阶段**: 9.5人（前端2 + 后端3 + 测试1.5 + UI/UX 1 + 运营1 + PM 0.5 + PD 0.5）

#### 财务资源
- **MVP预算**: ¥278,500（3个月）
- **V1.0预算**: ¥557,000（6个月）
- **V2.0预算**: ¥1,114,000（12个月）
- **总预算**: ¥1,949,500（12个月）

#### 时间资源
- **技术预研**: 2周（MVP前）
- **MVP开发**: 3个月（12个Sprint）
- **V1.0开发**: 3个月（12个Sprint）
- **V2.0开发**: 6个月（24个Sprint）
- **总周期**: 12.5个月

### SWOT分析

#### 优势（Strengths）
1. **技术优势**
   - Docker沙箱技术，安全可靠
   - 轻量级架构，单机即可部署
   - 前后端分离，易于扩展
   - 成熟的技术栈，开发效率高

2. **产品优势**
   - 专为教学设计，功能针对性强
   - 智能提示系统，学习体验好
   - 游戏化激励，用户粘性高
   - 数据分析功能，教学效果可量化

3. **成本优势**
   - 本地部署，无需云服务器
   - 开源技术栈，无授权费用
   - 运营成本低，适合中小机构
   - 一次性投入，长期使用

4. **数据安全优势**
   - 数据本地存储，完全可控
   - 符合数据安全法规
   - 无需担心数据泄露
   - 适合政府、军队、保密单位

#### 劣势（Weaknesses）
1. **市场认知度低**
   - 新产品，品牌知名度不足
   - 需要时间建立市场信任
   - 营销预算有限

2. **功能完整性**
   - MVP功能相对简单
   - 需要持续迭代完善
   - 与成熟产品有差距

3. **团队规模小**
   - 开发资源有限
   - 迭代速度受限
   - 客户支持能力有限

4. **单机部署限制**
   - 不适合大规模在线教育
   - 无法跨地域协作
   - 扩展性有上限（500用户）

#### 机会（Opportunities）
1. **政策机会**
   - 国家推动编程教育进校园
   - 数据安全法规趋严，本地部署需求增加
   - 职业教育改革，技能培训需求旺盛

2. **市场机会**
   - Python成为最受欢迎的编程语言
   - 编程教育市场持续增长
   - 中小型机构对成本敏感，本地部署需求大

3. **技术机会**
   - WebAssembly技术成熟，可提升性能
   - AI技术发展，可增强智能提示功能
   - 容器技术普及，部署更简单

4. **竞争机会**
   - 云端平台成本高，中小机构负担重
   - 开源工具功能分散，缺少系统化
   - 本地部署市场竞争相对较小

#### 威胁（Threats）
1. **竞争威胁**
   - LeetCode、Codecademy等成熟产品
   - 新进入者可能模仿
   - 开源社区可能推出类似产品

2. **技术威胁**
   - Docker技术可能被替代
   - SQLite性能可能成为瓶颈
   - 浏览器兼容性问题

3. **市场威胁**
   - 云端SaaS成本可能降低
   - 用户习惯可能偏向云端
   - 市场需求可能萎缩

4. **政策威胁**
   - 教育政策可能变化
   - 技术标准可能调整
   - 数据安全要求可能更严

### 关键成功因素（CSF）

#### 1. 产品质量（权重：30%）
- **代码执行稳定性**: 错误率 <0.1%，可用性 >99%
- **用户体验**: 界面简洁，操作流畅，学习曲线平缓
- **功能完整性**: 核心功能完善，满足教学需求
- **性能表现**: 响应时间快，支持并发，资源占用低

**衡量指标**:
- 系统可用性 >99%
- 用户满意度 ≥80%
- Bug密度 <0.5个/KLOC
- 页面加载时间 <2s

#### 2. 用户增长（权重：25%）
- **用户获取**: 试点机构合作，口碑传播，在线推广
- **用户激活**: 新手引导，教师培训，快速上手
- **用户留存**: 游戏化激励，社区互动，持续更新
- **用户推荐**: NPS >50，推荐奖励，案例分享

**衡量指标**:
- 注册用户数增长率 >20%/月
- 周活跃率 >60%
- 7日留存率 >40%
- NPS >50

#### 3. 教学效果（权重：20%）
- **学习效率**: 相比传统学习提升30%
- **学习完成率**: 题目完成率 >70%
- **知识掌握度**: 知识点掌握率 >70%
- **教师满意度**: 教师满意度 >85%

**衡量指标**:
- 题目完成率 >70%
- 题目通过率 >65%
- 知识点掌握率 >70%
- 教师满意度 >85%

#### 4. 技术稳定性（权重：15%）
- **系统可用性**: 7×24小时稳定运行
- **数据安全**: 无数据泄露，备份完整
- **性能稳定**: 支持500用户并发
- **可扩展性**: 支持功能扩展，数据库迁移

**衡量指标**:
- 系统可用性 >99%
- 数据备份成功率 100%
- 支持并发用户数 ≥500
- 数据库迁移成功率 100%

#### 5. 成本控制（权重：10%）
- **开发成本**: 按预算执行，不超支
- **运营成本**: 低于云端SaaS 80%
- **人力成本**: 团队精简，效率高
- **时间成本**: 按时交付，不延期

**衡量指标**:
- 预算执行率 ≤100%
- 运营成本 <云端SaaS的20%
- 人均产出 >¥200,000/年
- 按时交付率 >90%

### 投资回报分析（ROI）

#### 投资成本（12个月）
| 成本项 | MVP（3月） | V1.0（6月） | V2.0（12月） | 总计 |
|--------|-----------|------------|-------------|------|
| 人力成本 | ¥261,000 | ¥522,000 | ¥1,044,000 | ¥1,827,000 |
| 硬件成本 | ¥17,500 | ¥35,000 | ¥70,000 | ¥122,500 |
| **总成本** | **¥278,500** | **¥557,000** | **¥1,114,000** | **¥1,949,500** |

#### 预期收入（12个月）
| 收入项 | MVP（3月） | V1.0（6月） | V2.0（12月） | 总计 |
|--------|-----------|------------|-------------|------|
| 付费版销售 | ¥0 | ¥50,000 | ¥500,000 | ¥550,000 |
| 增值服务 | ¥0 | ¥20,000 | ¥200,000 | ¥220,000 |
| 定制开发 | ¥0 | ¥30,000 | ¥300,000 | ¥330,000 |
| **总收入** | **¥0** | **¥100,000** | **¥1,000,000** | **¥1,100,000** |

#### ROI分析
- **12个月ROI**: (¥1,100,000 - ¥1,949,500) / ¥1,949,500 = **-43.6%**
- **24个月预期ROI**: (¥3,000,000 - ¥1,949,500) / ¥1,949,500 = **+53.9%**
- **36个月预期ROI**: (¥6,000,000 - ¥1,949,500) / ¥1,949,500 = **+207.8%**

**结论**:
- 第1年为投入期，预计亏损¥849,500
- 第2年开始盈利，预计盈利¥1,050,500
- 第3年进入快速增长期，预计盈利¥4,050,500
- 投资回收期约18个月

#### 敏感性分析

**乐观场景（+30%）**:
- 用户增长超预期，V2.0阶段达到100个机构
- 12个月收入: ¥1,430,000
- 12个月ROI: -26.6%

**悲观场景（-30%）**:
- 用户增长不及预期，V2.0阶段仅达到30个机构
- 12个月收入: ¥770,000
- 12个月ROI: -60.5%

**关键假设**:
1. 付费版定价: ¥9,999/年/机构
2. 付费转化率: 50%（试用机构中）
3. 增值服务占比: 20%
4. 定制开发占比: 30%

### 北极星指标（North Star Metric）

**定义**: 周活跃学习用户数（Weekly Active Learning Users, WALU）

**选择理由**:
1. **反映核心价值**: 用户真正在学习，而非仅注册
2. **可持续增长**: 活跃用户是收入的基础
3. **可操作性强**: 可通过产品优化提升
4. **易于衡量**: 数据埋点即可获取

**定义标准**:
- 一周内至少完成1道题目的用户
- 或一周内至少学习30分钟的用户

**目标值**:
- MVP阶段: 50+ WALU
- V1.0阶段: 200+ WALU
- V2.0阶段: 500+ WALU

**驱动因素**:
1. **用户获取**: 新用户注册数
2. **用户激活**: 新用户完成首题比例
3. **用户留存**: 7日留存率
4. **用户活跃**: 平均学习时长
5. **用户推荐**: NPS评分

---

## 目录

1. [产品概述](#1-产品概述)
2. [市场分析](#2-市场分析)
3. [用户画像](#3-用户画像)
4. [产品目标](#4-产品目标)
5. [功能需求](#5-功能需求)
6. [非功能需求](#6-非功能需求)
7. [产品路线图](#7-产品路线图)
8. [资源需求](#8-资源需求)
9. [技术预研计划](#9-技术预研计划)
10. [质量保证计划](#10-质量保证计划)
11. [运营和推广计划](#11-运营和推广计划)
12. [成功指标](#12-成功指标)
13. [风险与挑战](#13-风险与挑战)
14. [附录](#14-附录)

---

## 1. 产品概述

### 1.1 产品简介

#### 1.1.1 产品定义

**pythonLearn** 是一款专为Python初学者设计的交互式学习平台，采用"做中学"（Learning by Doing）的教育理念，通过实时代码执行、智能提示系统、游戏化激励等创新功能，帮助学习者高效掌握Python编程技能。

**产品类型**: 教育科技产品（EdTech）
**产品形态**: Web应用（B/S架构）
**部署方式**: 单机/局域网部署（非云端SaaS）
**目标用户**: Python初学者、编程教师、教育机构
**核心场景**: 编程学习、作业练习、教学管理

#### 1.1.2 产品背景

**市场背景**:
- Python已成为全球最受欢迎的编程语言之一（TIOBE指数常年前3）
- 编程教育市场规模持续增长，预计2025年达到¥800亿
- 在线编程学习需求旺盛，但现有产品存在诸多痛点

**用户痛点**:
1. **学生痛点**:
   - 传统教学缺少即时反馈，学习效率低
   - 遇到问题无人指导，容易放弃
   - 学习过程枯燥，缺少激励
   - 不知道从哪里开始学，学习路径不清晰

2. **教师痛点**:
   - 批改作业耗时长，重复劳动多
   - 难以了解每个学生的学习情况
   - 无法识别学生的薄弱点
   - 缺少合适的教学工具和资源

3. **机构痛点**:
   - 云端SaaS成本高，中小机构负担重
   - 数据安全担忧，不愿将学生数据上传云端
   - 网络依赖性强，网络不稳定影响教学
   - 功能定制困难，无法满足个性化需求

**解决方案**:
pythonLearn通过以下创新功能解决上述痛点：
- ✅ **即时反馈**: 实时代码执行，立即看到结果
- ✅ **智能提示**: 3级渐进式提示，引导而非直接给答案
- ✅ **游戏化激励**: 积分、等级、成就系统，保持学习动力
- ✅ **自动批改**: 测试用例自动运行，节省教师时间
- ✅ **数据洞察**: 学习数据分析，识别薄弱点
- ✅ **本地部署**: 数据安全可控，成本低廉
- ✅ **离线可用**: 无需网络，随时随地学习

#### 1.1.3 产品特色

**1. 零门槛学习**
- 无需安装任何软件，浏览器即可学习
- 新手引导完善，5分钟快速上手
- 界面简洁直观，符合用户习惯
- 中文友好，适合中国用户

**2. 即时反馈系统**
- 代码执行结果实时展示（<2秒）
- 测试用例自动运行，立即知道对错
- 错误信息友好，帮助定位问题
- 执行过程可视化，理解代码逻辑

**3. 智能提示系统**
- **Level 1提示**: 思考方向（如"考虑使用循环"）
- **Level 2提示**: 具体方法（如"使用for循环遍历列表"）
- **Level 3提示**: 参考代码（如"for item in list:"）
- 渐进式提示，引导而非直接给答案
- 提示使用次数影响积分，鼓励独立思考

**4. 游戏化激励**
- **积分系统**: 完成题目获得积分，提示扣除积分
- **等级系统**: 积分累积升级，解锁新功能
- **成就系统**: 完成特定任务获得成就徽章
- **排行榜**: 班级排行、全站排行，激发竞争
- **学习日历**: 连续学习天数，培养习惯

**5. 社区互助**
- **题目讨论区**: 每道题下方可以讨论
- **问答社区**: 提问、回答、采纳最佳答案
- **代码分享**: 分享优秀代码，互相学习
- **学习小组**: 组队学习，互相监督

**6. 数据驱动教学**
- **学习进度追踪**: 实时查看学习进度
- **薄弱点识别**: 自动识别知识点薄弱环节
- **个性化推荐**: 根据能力推荐题目
- **学习报告**: 周报、月报，可视化展示

**7. 安全可控**
- **Docker沙箱**: 代码在隔离环境中执行
- **资源限制**: CPU、内存、时间限制
- **危险操作拦截**: 禁止文件操作、网络访问
- **数据本地存储**: 符合数据安全法规

**8. 成本低廉**
- **单机部署**: 无需云服务器，降低成本80%
- **开源技术栈**: 无授权费用
- **资源占用低**: 8核16G即可支持500用户
- **一次性投入**: 长期使用，无持续费用

### 1.2 产品愿景

**愿景**: 让Python学习变得简单、有趣、高效

**使命**: 通过技术创新，降低编程学习门槛，帮助更多人掌握编程技能

**价值观**:
- **以学习者为中心**: 一切功能围绕学习效果设计
- **数据驱动**: 用数据指导产品迭代和教学优化
- **开放共享**: 鼓励社区互助，知识共享
- **持续创新**: 不断探索新技术，提升学习体验

**3年愿景**:
- 成为中国领先的Python学习平台
- 覆盖1000+教育机构
- 服务100,000+学习者
- 建立活跃的用户社区
- 形成完整的Python学习生态

### 1.3 核心价值主张

#### 1.3.1 对学生的价值

**价值1: 学习效率提升30%**
- **即时反馈**: 代码执行结果实时展示，无需等待
- **智能提示**: 遇到困难时获得恰当提示，不卡壳
- **个性化推荐**: 根据能力推荐题目，难度适中
- **错题本**: 自动收集错题，针对性复习

**价值2: 学习兴趣提升50%**
- **游戏化激励**: 积分、等级、成就，像玩游戏一样学习
- **社区互动**: 讨论区、问答社区，不孤单
- **可视化进度**: 学习进度可视化，成就感强
- **多样化题型**: 基础题、算法题、项目题，不枯燥

**价值3: 学习完成率提升40%**
- **渐进式学习路径**: 从易到难，循序渐进
- **学习提醒**: 定期推送学习提醒，培养习惯
- **学习小组**: 组队学习，互相监督
- **成就系统**: 完成任务获得成就，保持动力

**价值4: 问题解决时间减少60%**
- **3级提示系统**: 渐进式提示，引导思考
- **题目讨论区**: 查看他人讨论，获得灵感
- **问答社区**: 提问获得解答，快速解决问题
- **代码示例**: 参考优秀代码，学习最佳实践

#### 1.3.2 对教师的价值

**价值1: 批改时间节省70%**
- **自动批改**: 测试用例自动运行，无需人工批改
  - 传统方式：批改50份作业需要5小时
  - pythonLearn：自动批改，只需查看统计报告（30分钟）
  - 节省时间：4.5小时（90%）
- **批量操作**: 一键布置作业，批量查看提交
  - 一键选择题目，设置截止时间
  - 批量导出学生提交记录
  - 批量发送反馈和评语
- **统计报告**: 自动生成统计报告，一目了然
  - 提交率、完成率、正确率统计
  - 知识点掌握情况分析
  - 学生排名和进度对比
- **异常检测**: 自动识别抄袭、异常提交
  - 代码相似度检测（>80%相似度标记）
  - 提交时间异常检测（短时间大量提交）
  - 异常行为预警（多次重置、频繁提示）

**价值2: 教学效果提升40%**
- **数据洞察**: 查看学生学习数据，了解学习情况
  - 学习时长、完成题数、正确率
  - 知识点掌握情况热力图
  - 学习曲线和进步趋势
  - 薄弱环节识别和预警
- **薄弱点识别**: 自动识别知识点薄弱环节
  - 基于错题自动识别薄弱知识点
  - 生成个性化复习建议
  - 推荐针对性练习题目
  - 跟踪薄弱点改进情况
- **个性化辅导**: 针对薄弱点进行辅导
  - 查看每个学生的薄弱点
  - 发送个性化学习建议
  - 安排一对一辅导
  - 跟踪辅导效果
- **学习报告**: 生成学习报告，与家长沟通
  - 周报、月报、学期报告
  - 学习进度、成绩变化、优势劣势
  - 可视化图表展示
  - 一键导出PDF或发送邮件

**价值3: 班级管理效率提升50%**
- **一键操作**: 创建班级、添加学生、布置作业
  - 创建班级：填写班级名称、学期、人数
  - 添加学生：批量导入（Excel/CSV）或单个添加
  - 布置作业：选择题目、设置截止时间、发布
  - 发布公告：一键通知全班学生
- **进度追踪**: 实时查看学生学习进度
  - 班级整体进度仪表盘
  - 每个学生的详细进度
  - 落后学生预警
  - 进度对比和排名
- **学生分组**: 按能力分组，分层教学
  - 自动分组（基于学习数据）
  - 手动分组（自定义规则）
  - 分组作业（不同组不同题目）
  - 分组讨论和协作
- **公告通知**: 发布公告，及时通知学生
  - 作业通知、考试通知、课程通知
  - 支持富文本、图片、附件
  - 查看已读/未读状态
  - 重要公告置顶

**价值4: 教学资源丰富度提升3倍**
- **题库资源**: 1000+道题目，覆盖所有知识点
  - 基础题（500+）：变量、数据类型、运算符、控制流
  - 进阶题（300+）：函数、类、模块、异常处理
  - 算法题（150+）：排序、搜索、动态规划、图算法
  - 项目题（50+）：完整项目，综合应用
- **课程资源**: 系统化课程，完整学习路径
  - 入门课程：Python基础（20课时）
  - 进阶课程：面向对象编程（15课时）
  - 高级课程：数据结构与算法（25课时）
  - 实战课程：项目实战（20课时）
- **学习资源**: 文档、视频、案例，丰富多样
  - 知识点文档（100+篇）
  - 视频教程（50+个）
  - 代码案例（200+个）
  - 学习笔记模板
- **社区资源**: 用户贡献题目、课程，持续丰富
  - 教师可上传自己的题目
  - 分享优秀课程设计
  - 交流教学经验
  - 获取教学灵感

#### 1.3.3 对机构的价值

**价值1: 部署成本降低80%**
- **单机部署**: 无需云服务器，一台服务器即可
  - 云端SaaS：需要云服务器、负载均衡、CDN等，成本高
  - pythonLearn：一台8核16G服务器即可支持500用户
  - 成本对比：¥10,000（本地） vs ¥50,000（云端）
  - 节省成本：¥40,000（80%）
- **开源技术**: 无授权费用，降低成本
  - 所有技术栈均为开源（Vue.js、Flask、SQLite、Docker）
  - 无需支付软件授权费
  - 无需支付技术支持费（社区支持）
  - 可自由定制和扩展
- **简单部署**: Docker一键部署，无需专业运维
  - 提供Docker Compose配置文件
  - 一条命令启动所有服务
  - 自动配置数据库、缓存、Web服务器
  - 无需专业运维人员
- **硬件要求低**: 普通服务器即可，无需高配
  - 最低配置：4核8G（支持100用户）
  - 推荐配置：8核16G（支持500用户）
  - 存储需求：100GB（含数据库、日志、备份）
  - 网络需求：100Mbps（局域网）

**价值2: 运营成本降低60%**
- **无云费用**: 无需云服务器、带宽、CDN等费用
  - 云端SaaS：云服务器¥3,000/月 + 带宽¥1,000/月 + CDN¥500/月 = ¥4,500/月
  - pythonLearn：无云费用，只需电费和网络费
  - 成本对比：¥0（本地） vs ¥4,500/月（云端）
  - 年节省：¥54,000
- **低维护成本**: 自动备份、监控，维护简单
  - 自动备份（每日备份，保留30天）
  - 自动监控（系统资源、服务状态）
  - 自动告警（异常情况邮件/短信通知）
  - 维护时间：每周1小时（vs 云端每周5小时）
- **无持续费用**: 一次性投入，长期使用
  - 云端SaaS：按用户数或使用量收费，持续付费
  - pythonLearn：一次性部署，长期使用
  - 无需担心价格上涨
  - 无需担心服务中断
- **成本可控**: 成本透明，易于预算
  - 初始投资：服务器¥10,000 + 部署¥5,000 = ¥15,000
  - 年运营成本：电费¥1,000 + 网络¥1,000 = ¥2,000
  - 总成本（3年）：¥15,000 + ¥2,000×3 = ¥21,000
  - vs 云端（3年）：¥54,000×3 = ¥162,000
  - 节省：¥141,000（87%）

**价值3: 数据安全100%可控**
- **本地存储**: 数据存储在本地，完全可控
  - 所有数据（用户、题目、代码、成绩）存储在本地服务器
  - 无需上传到第三方云端
  - 机构完全掌控数据
  - 可随时备份、迁移、删除
- **符合法规**: 符合数据安全法、个人信息保护法
  - 《数据安全法》：数据本地存储，符合数据分类分级要求
  - 《个人信息保护法》：学生信息不出境，符合个人信息保护要求
  - 《网络安全法》：网络安全等级保护，符合安全要求
  - 教育行业规范：符合教育部数据安全规范
- **无泄露风险**: 无需上传云端，无泄露风险
  - 云端SaaS：数据上传云端，存在泄露风险
  - pythonLearn：数据本地存储，物理隔离
  - 无需担心云服务商数据泄露
  - 无需担心网络攻击导致数据泄露
- **审计友好**: 数据可审计，满足合规要求
  - 完整的操作日志（谁、何时、做了什么）
  - 数据访问记录（谁访问了哪些数据）
  - 数据变更记录（数据的增删改历史）
  - 支持导出审计报告

**价值4: 扩展性强，满足长期需求**
- **支持500用户**: 满足中小型机构需求
  - 培训机构：通常100-300学生
  - 高校院系：通常200-500学生
  - 中小学校：通常100-400学生
  - 企业内训：通常50-200员工
- **功能可扩展**: 模块化设计，易于扩展
  - 插件机制：支持第三方插件
  - API接口：支持与其他系统集成
  - 主题定制：支持自定义界面主题
  - 功能定制：支持定制开发新功能
- **数据库可迁移**: SQLite→MySQL，支持更大规模
  - MVP阶段：SQLite（支持500用户）
  - 扩展阶段：迁移到MySQL（支持5000+用户）
  - 提供自动迁移工具
  - 数据无损迁移
- **定制开发**: 支持定制开发，满足个性化需求
  - 提供源代码（开源）
  - 提供开发文档
  - 提供技术支持
  - 可根据需求定制功能

### 1.4 产品定位

#### 1.4.1 市场定位

**目标市场**: 中国教育培训市场（Python编程教育细分领域）

**市场规模**:
- **TAM（总体可达市场）**: 中国编程教育市场 ~¥500亿/年
- **SAM（可服务市场）**: Python教育市场 ~¥100亿/年
- **SOM（可获得市场）**: 单机/局域网部署市场 ~¥10亿/年

**市场细分**:

| 细分市场 | 市场份额 | 用户规模 | 特点 | 痛点 |
|---------|---------|---------|------|------|
| **培训机构** | 40% | 10,000+机构 | 对成本敏感，需要数据安全 | 云端成本高，数据安全担忧 |
| **高等院校** | 30% | 2,000+院校 | 学生数量大，需要稳定可靠 | 网络不稳定，功能不够教学化 |
| **中小学校** | 15% | 20,000+学校 | 学生年龄小，需要简单易用 | 操作复杂，不适合初学者 |
| **企业内训** | 10% | 5,000+企业 | 需要定制化，数据保密 | 无法定制，数据上传云端 |
| **自学小组** | 5% | 50,000+小组 | 人数少，预算有限 | 价格贵，功能过于复杂 |

**目标客户画像**:

**主要目标客户**（培训机构）:
- **规模**: 100-500学生
- **预算**: ¥10,000-50,000/年
- **痛点**: 云端成本高、数据安全担忧、网络依赖
- **需求**: 本地部署、成本低廉、数据安全、功能完整

**次要目标客户**（高等院校）:
- **规模**: 200-1000学生
- **预算**: ¥20,000-100,000/年
- **痛点**: 网络不稳定、功能不够教学化、批改工作量大
- **需求**: 稳定可靠、教学功能强、自动批改、数据分析

**潜在目标客户**（中小学校、企业内训、自学小组）:
- **规模**: 50-300人
- **预算**: ¥5,000-30,000/年
- **痛点**: 操作复杂、价格贵、无法定制
- **需求**: 简单易用、性价比高、可定制

#### 1.4.2 竞争定位

**竞争策略**: 差异化竞争，避免正面竞争

**不竞争领域**:
- ❌ 不与LeetCode竞争算法题库（我们专注教学，不是刷题）
- ❌ 不与Codecademy竞争在线课程（我们是本地部署，不是云端SaaS）
- ❌ 不与Coursera竞争MOOC平台（我们是小班教学，不是大规模公开课）
- ❌ 不与GitHub竞争代码托管（我们是学习平台，不是代码仓库）

**竞争领域**:
- ✅ 本地部署市场（vs 云端SaaS）
- ✅ 教学管理功能（vs 纯学习平台）
- ✅ 中文市场（vs 英文平台）
- ✅ 中小型机构（vs 大型企业）

**差异化优势**:

| 维度 | pythonLearn | 云端SaaS | 开源工具 | 传统IDE |
|------|------------|---------|---------|---------|
| **部署方式** | 本地/局域网 | 云端 | 本地 | 本地 |
| **成本** | 低（一次性） | 高（持续） | 低（免费） | 低（免费） |
| **数据安全** | 高（本地存储） | 中（云端存储） | 高（本地存储） | 高（本地存储） |
| **教学功能** | 强（专为教学设计） | 中（通用学习） | 弱（无教学功能） | 弱（无教学功能） |
| **易用性** | 高（Web界面） | 高（Web界面） | 中（需配置） | 低（需安装） |
| **网络依赖** | 低（局域网） | 高（需互联网） | 无 | 无 |
| **扩展性** | 中（500用户） | 高（无限） | 低（单用户） | 低（单用户） |
| **中文支持** | 优秀 | 一般 | 一般 | 优秀 |

**核心差异化**:
1. **本地部署 + 教学功能**: 唯一同时具备本地部署和完整教学功能的产品
2. **成本优势 + 数据安全**: 成本低于云端SaaS 80%，数据安全100%可控
3. **中文友好 + 易用性**: 界面、文档、支持全中文，5分钟快速上手
4. **性价比**: 一次性投入，长期使用，无持续费用

#### 1.4.3 产品定位矩阵

**定位坐标系**:

```
                    高
                    ↑
                    |
        云端SaaS    |    企业级平台
      (Codecademy)  |   (企业内训系统)
                    |
    功能完整度      |
                    |
        开源工具    |    pythonLearn
      (Jupyter)     |   (本地部署)
                    |
                    ↓
                    低
        低 ←── 部署成本 ──→ 高
```

**定位说明**:
- **pythonLearn**: 功能完整度中等，部署成本低（甜蜜点）
- **云端SaaS**: 功能完整度高，部署成本高（高端市场）
- **开源工具**: 功能完整度低，部署成本低（低端市场）
- **企业级平台**: 功能完整度高，部署成本高（企业市场）

**目标定位**: 中端市场的领导者（功能够用 + 成本低廉）

### 1.5 技术架构

#### 1.5.1 技术栈选择

**前端技术栈**:

| 技术 | 版本 | 选择理由 | 替代方案 |
|------|------|---------|---------|
| **Vue.js** | 3.x | 渐进式框架，易学易用，生态丰富 | React（学习曲线陡）、Angular（过于复杂） |
| **Vite** | 4.x | 快速构建，热更新，开发体验好 | Webpack（配置复杂）、Rollup（功能少） |
| **Pinia** | 2.x | 轻量级状态管理，TypeScript友好 | Vuex（过于复杂）、MobX（生态小） |
| **Vue Router** | 4.x | 官方路由，与Vue.js深度集成 | React Router（不适用）、自研（成本高） |
| **CodeMirror** | 6.x | 强大的代码编辑器，扩展性强 | Monaco Editor（体积大）、Ace Editor（老旧） |
| **Tailwind CSS** | 3.x | 实用优先，快速开发，体积小 | Bootstrap（样式固定）、Ant Design（体积大） |
| **ECharts** | 5.x | 数据可视化，图表丰富，性能好 | Chart.js（功能少）、D3.js（学习曲线陡） |
| **Axios** | 1.x | HTTP客户端，简单易用，拦截器 | Fetch API（功能少）、jQuery Ajax（老旧） |

**后端技术栈**:

| 技术 | 版本 | 选择理由 | 替代方案 |
|------|------|---------|---------|
| **Python** | 3.8+ | 与教学内容一致，生态丰富 | Node.js（不一致）、Java（过于复杂） |
| **Flask** | 2.x | 轻量级Web框架，灵活易扩展 | Django（过于重量）、FastAPI（生态小） |
| **SQLAlchemy** | 2.x | 对象关系映射，支持多数据库 | Django ORM（绑定Django）、Peewee（功能少） |
| **Flask-JWT-Extended** | 4.x | JWT认证，安全可靠 | Flask-Login（功能少）、自研（成本高） |
| **Docker SDK** | 6.x | 容器管理，代码执行沙箱 | subprocess（不安全）、虚拟机（资源消耗大） |
| **Celery** | 5.x | 异步任务队列，支持定时任务 | RQ（功能少）、自研（成本高） |
| **Redis** | 6.x | 内存数据库，缓存和会话 | Memcached（功能少）、自研（成本高） |

**数据库**:

| 技术 | 版本 | 选择理由 | 迁移方案 |
|------|------|---------|---------|
| **SQLite** | 3.35+ | 零配置，单文件，轻量级 | MySQL 8.0+（支持更大规模） |
| **Redis** | 6.0+ | 内存数据库，缓存和会话 | - |

**部署技术**:

| 技术 | 版本 | 选择理由 | 替代方案 |
|------|------|---------|---------|
| **Docker** | 20.x | 容器化，一致性环境 | 虚拟机（资源消耗大）、裸机（配置复杂） |
| **Docker Compose** | 2.x | 多容器编排，简化部署 | Kubernetes（过于复杂）、手动（易出错） |
| **Nginx** | 1.20+ | Web服务器，反向代理 | Apache（性能差）、Caddy（生态小） |
| **Supervisor** | 4.x | 进程守护，自动重启 | systemd（配置复杂）、PM2（Node.js专用） |
| **Prometheus** | 2.x | 监控告警，时序数据库 | Zabbix（配置复杂）、Grafana（只是展示） |
| **Grafana** | 9.x | 数据可视化，监控面板 | Kibana（绑定ES）、自研（成本高） |

#### 1.5.2 系统架构图

**整体架构**:

```
┌─────────────────────────────────────────────────────────────┐
│                         用户层                               │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │  学生端  │  │  教师端  │  │  管理端  │  │  移动端  │   │
│  │(浏览器)  │  │(浏览器)  │  │(浏览器)  │  │(H5/App)  │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
└─────────────────────────────────────────────────────────────┘
                            ↓ HTTPS
┌─────────────────────────────────────────────────────────────┐
│                      接入层（Nginx）                         │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  反向代理 │ 负载均衡 │ SSL终止 │ 静态资源服务      │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│                      应用层（Flask）                         │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ 用户模块 │  │ 学习模块 │  │ 教学模块 │  │ 管理模块 │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ 认证授权 │  │ 代码执行 │  │ 数据分析 │  │ 系统监控 │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│                      服务层                                  │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │Docker沙箱│  │ 任务队列 │  │ 缓存服务 │  │ 文件存储 │   │
│  │  服务    │  │ (Celery) │  │ (Redis)  │  │ (本地)   │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│                      数据层                                  │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │  SQLite  │  │  Redis   │  │  日志    │  │  备份    │   │
│  │  数据库  │  │  缓存    │  │  文件    │  │  文件    │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
└─────────────────────────────────────────────────────────────┘
```

**架构特点**:
1. **分层架构**: 用户层、接入层、应用层、服务层、数据层，职责清晰
2. **模块化设计**: 每个模块独立，易于维护和扩展
3. **容器化部署**: Docker容器，环境一致，部署简单
4. **安全隔离**: Docker沙箱，代码执行安全隔离
5. **高可用**: Nginx负载均衡，Supervisor进程守护，自动重启

#### 1.5.3 核心模块说明

**1. 用户模块**
- **功能**: 用户注册、登录、认证、授权、个人信息管理
- **技术**: Flask-JWT-Extended（JWT认证）、BCrypt（密码加密）
- **数据表**: users（用户表）、roles（角色表）、permissions（权限表）
- **API**: `/api/auth/register`、`/api/auth/login`、`/api/users/{id}`

**2. 学习模块**
- **功能**: 在线代码编辑器、实时代码执行、智能提示、学习进度追踪、错题本、学习笔记
- **技术**: CodeMirror 6（代码编辑器）、Docker SDK（代码执行）、WebSocket（实时通信）
- **数据表**: questions（题目表）、submissions（提交表）、progress（进度表）、notes（笔记表）
- **API**: `/api/questions`、`/api/submissions`、`/api/execute`、`/api/hints`

**3. 教学模块**
- **功能**: 班级管理、作业系统、考试系统、学生数据分析、学习报告生成
- **技术**: SQLAlchemy（ORM）、Celery（异步任务）、ECharts（数据可视化）
- **数据表**: classes（班级表）、assignments（作业表）、exams（考试表）、grades（成绩表）
- **API**: `/api/classes`、`/api/assignments`、`/api/exams`、`/api/reports`

**4. 内容模块**
- **功能**: 题库管理、课程管理、学习路径、资源库
- **技术**: YAML（题目格式）、Markdown（文档格式）、FFmpeg（视频处理）
- **数据表**: questions（题目表）、courses（课程表）、resources（资源表）、paths（路径表）
- **API**: `/api/questions`、`/api/courses`、`/api/resources`、`/api/paths`

**5. 协作模块**
- **功能**: 题目讨论区、问答社区、学习小组、代码分享
- **技术**: WebSocket（实时通信）、Markdown（富文本）、Redis（消息队列）
- **数据表**: discussions（讨论表）、qa（问答表）、groups（小组表）、shares（分享表）
- **API**: `/api/discussions`、`/api/qa`、`/api/groups`、`/api/shares`

**6. 激励模块**
- **功能**: 积分系统、等级系统、成就系统、排行榜
- **技术**: Redis（排行榜）、Celery（定时任务）、SQLAlchemy（ORM）
- **数据表**: points（积分表）、levels（等级表）、achievements（成就表）、rankings（排行榜）
- **API**: `/api/points`、`/api/levels`、`/api/achievements`、`/api/rankings`

**7. 管理模块**
- **功能**: 系统配置、用户管理、数据备份、系统监控、日志管理
- **技术**: Prometheus（监控）、Grafana（可视化）、Loguru（日志）、APScheduler（定时任务）
- **数据表**: configs（配置表）、logs（日志表）、backups（备份表）、monitors（监控表）
- **API**: `/api/admin/configs`、`/api/admin/users`、`/api/admin/backups`、`/api/admin/monitors`

### 1.6 竞争优势

#### 1.6.1 核心竞争力

**1. 技术竞争力**
- **Docker沙箱技术**: 安全隔离，资源限制，防止恶意代码
- **轻量级架构**: SQLite + Flask，资源占用低，性能好
- **成熟技术栈**: Vue.js + Flask + Docker，生态丰富，易于招聘
- **模块化设计**: 易于维护、扩展、定制

**2. 产品竞争力**
- **专为教学设计**: 班级管理、作业系统、数据分析，满足教学需求
- **智能提示系统**: 3级渐进式提示，引导而非直接给答案
- **游戏化激励**: 积分、等级、成就，保持学习动力
- **社区互助**: 讨论区、问答社区，不孤单

**3. 成本竞争力**
- **本地部署**: 无需云服务器，降低成本80%
- **开源技术**: 无授权费用，降低成本
- **一次性投入**: 长期使用，无持续费用
- **低维护成本**: 自动备份、监控，维护简单

**4. 数据安全竞争力**
- **本地存储**: 数据存储在本地，完全可控
- **符合法规**: 符合数据安全法、个人信息保护法
- **无泄露风险**: 无需上传云端，无泄露风险
- **审计友好**: 数据可审计，满足合规要求

#### 1.6.2 护城河

**1. 技术护城河**
- **Docker沙箱技术**: 需要深厚的容器技术积累
- **代码执行引擎**: 需要处理各种边界情况和安全问题
- **智能提示算法**: 需要教育学和心理学知识
- **数据分析模型**: 需要机器学习和数据挖掘能力

**2. 数据护城河**
- **题库资源**: 1000+道题目，覆盖所有知识点
- **用户数据**: 学习数据、行为数据，用于优化产品
- **教学经验**: 教师使用反馈，用于改进功能
- **社区内容**: 用户贡献的题目、课程、讨论

**3. 网络效应护城河**
- **用户越多，价值越大**: 更多讨论、更多分享、更多资源
- **教师越多，内容越丰富**: 更多题目、更多课程、更多经验
- **机构越多，品牌越强**: 更多案例、更多口碑、更多推荐

**4. 品牌护城河**
- **专注教学**: 不是刷题平台，不是代码托管，专注教学
- **中文友好**: 界面、文档、支持全中文
- **性价比高**: 一次性投入，长期使用
- **数据安全**: 本地存储，符合法规

#### 1.6.3 差异化策略

**1. 产品差异化**
- **本地部署 + 教学功能**: 唯一同时具备的产品
- **智能提示 + 游戏化**: 提升学习效果和兴趣
- **社区互助 + 数据分析**: 提升教学效果

**2. 市场差异化**
- **中小型机构**: 专注中小型机构，不与大型企业竞争
- **中文市场**: 专注中文市场，不与国际产品竞争
- **本地部署**: 专注本地部署，不与云端SaaS竞争

**3. 价格差异化**
- **一次性付费**: vs 云端SaaS的持续付费
- **开源版本**: 提供免费开源版本，吸引用户
- **付费版本**: 提供增值服务（技术支持、定制开发）

**4. 服务差异化**
- **技术支持**: 提供技术支持服务
- **培训服务**: 提供教师培训服务
- **定制开发**: 提供定制开发服务
- **运营咨询**: 提供运营咨询服务

---



## 2. 市场分析

### 2.1 市场机会

#### 2.1.1 市场规模

**全球编程教育市场**:
- **2023年市场规模**: $18.8 billion（约¥1,300亿）
- **2025年预测**: $28.5 billion（约¥2,000亿）
- **年复合增长率（CAGR）**: 23.5%

**中国编程教育市场**:
- **2023年市场规模**: ¥500亿
- **2025年预测**: ¥800亿
- **年复合增长率（CAGR）**: 26.5%
- **市场占比**: 全球市场的38%

**Python教育市场**:
- **2023年市场规模**: ¥80亿（占编程教育市场的16%）
- **2025年预测**: ¥150亿（占编程教育市场的19%）
- **年复合增长率（CAGR）**: 37.5%（高于整体市场）
- **增长原因**: Python成为最受欢迎的编程语言，应用广泛

**本地部署市场**:
- **2023年市场规模**: ¥8亿（占Python教育市场的10%）
- **2025年预测**: ¥15亿（占Python教育市场的10%）
- **年复合增长率（CAGR）**: 37.5%
- **市场特点**: 中小型机构、数据安全敏感机构

**TAM/SAM/SOM分析**:

| 市场层级 | 定义 | 规模（2025年） | 说明 |
|---------|------|---------------|------|
| **TAM** | 总体可达市场 | ¥800亿 | 中国编程教育市场 |
| **SAM** | 可服务市场 | ¥150亿 | Python教育市场 |
| **SOM** | 可获得市场 | ¥15亿 | 本地部署市场 |
| **目标** | 3年目标 | ¥1,500万 | 占SOM的0.1% |

#### 2.1.2 市场增长趋势

**1. 政策驱动**
- **编程教育进校园**: 2017年国务院发布《新一代人工智能发展规划》，要求在中小学设置人工智能相关课程
- **信息技术课程改革**: 2018年教育部发布《普通高中信息技术课程标准》，Python成为必修内容
- **职业教育改革**: 2019年国务院发布《国家职业教育改革实施方案》，强调实践技能培养
- **数据安全法规**: 2021年《数据安全法》、《个人信息保护法》实施，本地部署需求增加

**2. 技术驱动**
- **Python流行度上升**: TIOBE指数常年前3，GitHub最受欢迎语言
- **应用场景扩大**: 数据分析、机器学习、Web开发、自动化运维
- **学习门槛降低**: 语法简单，生态丰富，学习资源多
- **容器技术成熟**: Docker普及，代码执行沙箱技术成熟

**3. 需求驱动**
- **就业需求**: Python开发岗位需求增长30%/年
- **转岗需求**: 传统行业转型，员工需要学习编程
- **升学需求**: 信息学竞赛、强基计划、综合评价
- **兴趣需求**: 编程成为新的兴趣爱好

**4. 竞争驱动**
- **云端成本上升**: 云服务器、带宽成本持续上涨
- **数据安全担忧**: 数据泄露事件频发，机构更重视数据安全
- **功能同质化**: 云端SaaS功能趋同，差异化竞争困难
- **本地部署优势**: 成本低、数据安全、可定制

#### 2.1.3 市场驱动因素

**1. 宏观因素**
- **经济发展**: 人均GDP增长，教育支出增加
- **产业升级**: 传统产业数字化转型，编程人才需求增加
- **人口结构**: 00后、10后成为主力学习群体，数字原住民
- **城镇化**: 城镇化率提升，教育资源下沉

**2. 行业因素**
- **在线教育普及**: 疫情加速在线教育普及，用户习惯养成
- **教育信息化**: 学校信息化建设，硬件设施完善
- **教育公平**: 优质教育资源共享，缩小城乡差距
- **终身学习**: 学习型社会，终身学习成为趋势

**3. 用户因素**
- **学习意愿**: 编程成为必备技能，学习意愿强
- **支付能力**: 家庭收入增加，教育支出增加
- **时间碎片化**: 碎片化学习，随时随地学习
- **社交需求**: 学习社交化，互相学习、互相激励

**4. 技术因素**
- **Web技术**: HTML5、WebSocket、WebAssembly等技术成熟
- **容器技术**: Docker、Kubernetes等容器技术普及
- **AI技术**: 机器学习、自然语言处理等AI技术应用
- **云原生**: 微服务、DevOps等云原生技术成熟

#### 2.1.4 市场痛点分析

**学生痛点**:

| 痛点 | 严重程度 | 影响人群 | 现有解决方案 | 我们的方案 |
|------|---------|---------|------------|-----------|
| **缺少即时反馈** | 🔥🔥🔥 | 90% | 云端IDE（需网络） | 本地部署，局域网可用 |
| **遇到问题无人指导** | 🔥🔥🔥 | 80% | 付费答疑（成本高） | 智能提示 + 社区互助 |
| **学习过程枯燥** | 🔥🔥 | 70% | 游戏化学习（功能少） | 积分、等级、成就系统 |
| **学习路径不清晰** | 🔥🔥 | 60% | 课程推荐（不够个性化） | 个性化推荐 + 学习路径 |

**教师痛点**:

| 痛点 | 严重程度 | 影响人群 | 现有解决方案 | 我们的方案 |
|------|---------|---------|------------|-----------|
| **批改作业耗时长** | 🔥🔥🔥 | 95% | 人工批改（效率低） | 自动批改，节省70%时间 |
| **难以了解学生情况** | 🔥🔥🔥 | 85% | 问卷调查（不及时） | 实时数据分析 + 学习报告 |
| **无法识别薄弱点** | 🔥🔥 | 75% | 经验判断（不准确） | 自动识别 + 个性化推荐 |
| **缺少教学工具** | 🔥🔥 | 70% | 传统IDE（不够教学化） | 专为教学设计的平台 |

**机构痛点**:

| 痛点 | 严重程度 | 影响人群 | 现有解决方案 | 我们的方案 |
|------|---------|---------|------------|-----------|
| **云端成本高** | 🔥🔥🔥 | 90% | 降低功能（体验差） | 本地部署，降低成本80% |
| **数据安全担忧** | 🔥🔥🔥 | 85% | 签保密协议（不放心） | 本地存储，100%可控 |
| **网络依赖强** | 🔥🔥 | 70% | 备用网络（成本高） | 局域网可用，无需互联网 |
| **功能定制困难** | 🔥🔥 | 60% | 提需求（周期长） | 开源代码，可自由定制 |

### 2.2 竞争分析

#### 2.2.1 竞争格局（波特五力模型）

**1. 现有竞争者的竞争程度（中等）**

**主要竞争者**:
- **云端SaaS**: Codecademy、LeetCode、牛客网、力扣
- **开源工具**: Jupyter Notebook、VS Code、PyCharm
- **传统教学**: 线下培训、视频课程、图书教材

**竞争强度**: 中等
- 云端SaaS功能强大，但成本高、数据安全担忧
- 开源工具免费，但缺少教学功能
- 传统教学效果差，但用户习惯难改变

**我们的优势**:
- 本地部署 + 教学功能，差异化竞争
- 成本低廉 + 数据安全，满足机构需求
- 中文友好 + 易用性，降低学习门槛

**2. 潜在进入者的威胁（低）**

**进入壁垒**:
- **技术壁垒**: Docker沙箱、代码执行引擎、智能提示算法
- **数据壁垒**: 题库资源、用户数据、教学经验
- **品牌壁垒**: 先发优势、用户口碑、案例积累
- **成本壁垒**: 研发成本、运营成本、获客成本

**潜在进入者**:
- **大型教育公司**: 有资源，但不重视本地部署市场
- **创业公司**: 有激情，但缺少技术积累
- **开源社区**: 有技术，但缺少商业化能力

**威胁程度**: 低
- 本地部署市场小，大公司不重视
- 技术壁垒高，创业公司难以突破
- 开源社区缺少商业化动力

**3. 替代品的威胁（中等）**

**替代品**:
- **云端SaaS**: 功能强大，但成本高、数据安全担忧
- **开源工具**: 免费，但缺少教学功能
- **传统教学**: 线下培训、视频课程、图书教材
- **AI辅导**: ChatGPT、GitHub Copilot等AI工具

**威胁程度**: 中等
- 云端成本下降，可能吸引部分用户
- AI技术发展，可能替代部分功能
- 用户习惯改变，可能回归传统教学

**应对策略**:
- 持续降低成本，保持价格优势
- 集成AI技术，提升产品竞争力
- 强化教学功能，提升用户粘性

**4. 供应商的议价能力（低）**

**供应商**:
- **云服务商**: 阿里云、腾讯云、华为云（不依赖）
- **开源社区**: Vue.js、Flask、Docker（免费）
- **硬件供应商**: 服务器、存储、网络（竞争充分）

**议价能力**: 低
- 本地部署，不依赖云服务商
- 开源技术，无授权费用
- 硬件市场竞争充分，价格透明

**5. 购买者的议价能力（中等）**

**购买者**:
- **培训机构**: 对价格敏感，但需要功能完整
- **高等院校**: 预算充足，但采购流程长
- **中小学校**: 预算有限，但决策快
- **企业内训**: 预算充足，但要求定制化

**议价能力**: 中等
- 培训机构价格敏感，议价能力强
- 高等院校预算充足，议价能力弱
- 中小学校预算有限，议价能力强
- 企业内训要求定制，议价能力中等

**应对策略**:
- 提供多种定价方案（免费版、付费版、企业版）
- 提供增值服务（技术支持、培训、定制开发）
- 建立品牌，提升议价能力

**波特五力总结**:

| 力量 | 强度 | 影响 | 应对策略 |
|------|------|------|---------|
| **现有竞争者** | 中等 | 需要差异化竞争 | 本地部署 + 教学功能 |
| **潜在进入者** | 低 | 威胁小 | 建立技术壁垒、数据壁垒 |
| **替代品** | 中等 | 需要持续创新 | 降低成本、集成AI、强化教学 |
| **供应商** | 低 | 成本可控 | 开源技术、本地部署 |
| **购买者** | 中等 | 需要提升价值 | 多种定价、增值服务、品牌建设 |

**结论**: 市场竞争中等，有机会通过差异化竞争获得市场份额。

#### 2.2.2 主要竞品分析

**竞品1: LeetCode（力扣）**

| 维度 | LeetCode | pythonLearn | 对比结果 |
|------|----------|-------------|---------|
| **定位** | 算法刷题平台 | Python教学平台 | 不同定位 ✓ |
| **目标用户** | 求职者、算法爱好者 | Python初学者、教师、机构 | 不同用户 ✓ |
| **部署方式** | 云端SaaS | 本地/局域网 | 我们优势 ✓ |
| **题库规模** | 2000+题 | 1000+题（教学向） | 他们优势 ✗ |
| **教学功能** | 弱（无班级、作业） | 强（完整教学功能） | 我们优势 ✓ |
| **智能提示** | 无 | 3级渐进式提示 | 我们优势 ✓ |
| **游戏化** | 简单（积分、排名） | 完整（积分、等级、成就） | 我们优势 ✓ |
| **社区** | 强（讨论区活跃） | 中（待建设） | 他们优势 ✗ |
| **价格** | ¥199/月（会员） | 一次性¥10,000 | 我们优势 ✓ |
| **数据安全** | 云端存储 | 本地存储 | 我们优势 ✓ |

**结论**: LeetCode专注算法刷题，我们专注Python教学，定位不同，不直接竞争。

**竞品2: Codecademy**

| 维度 | Codecademy | pythonLearn | 对比结果 |
|------|------------|-------------|---------|
| **定位** | 在线编程学习平台 | Python教学平台 | 相似定位 ⚠️ |
| **目标用户** | 全球学习者 | 中国学习者、教师、机构 | 不同市场 ✓ |
| **部署方式** | 云端SaaS | 本地/局域网 | 我们优势 ✓ |
| **课程体系** | 完整（多语言） | 专注Python | 他们优势 ✗ |
| **教学功能** | 中（无班级管理） | 强（完整教学功能） | 我们优势 ✓ |
| **交互性** | 强（实时反馈） | 强（实时反馈） | 相当 = |
| **中文支持** | 弱（主要英文） | 强（全中文） | 我们优势 ✓ |
| **价格** | $19.99/月 | 一次性¥10,000 | 我们优势 ✓ |
| **数据安全** | 云端存储 | 本地存储 | 我们优势 ✓ |
| **网络依赖** | 强（需互联网） | 弱（局域网） | 我们优势 ✓ |

**结论**: Codecademy是国际化产品，我们专注中国市场，本地部署，差异化明显。

**竞品3: Jupyter Notebook**

| 维度 | Jupyter Notebook | pythonLearn | 对比结果 |
|------|-----------------|-------------|---------|
| **定位** | 交互式编程环境 | Python教学平台 | 不同定位 ✓ |
| **目标用户** | 数据科学家、研究者 | Python初学者、教师 | 不同用户 ✓ |
| **部署方式** | 本地 | 本地/局域网 | 相当 = |
| **易用性** | 中（需配置） | 高（Web界面） | 我们优势 ✓ |
| **教学功能** | 无 | 强（完整教学功能） | 我们优势 ✓ |
| **多用户** | 弱（JupyterHub复杂） | 强（原生支持） | 我们优势 ✓ |
| **代码执行** | 本地执行 | Docker沙箱 | 我们优势 ✓ |
| **价格** | 免费 | 一次性¥10,000 | 他们优势 ✗ |
| **扩展性** | 强（插件丰富） | 中（待建设） | 他们优势 ✗ |

**结论**: Jupyter Notebook是开发工具，我们是教学平台，定位不同，不直接竞争。

**竞品4: 实验楼**

| 维度 | 实验楼 | pythonLearn | 对比结果 |
|------|--------|-------------|---------|
| **定位** | 在线实验平台 | Python教学平台 | 相似定位 ⚠️ |
| **目标用户** | IT学习者 | Python初学者、教师、机构 | 部分重叠 ⚠️ |
| **部署方式** | 云端SaaS | 本地/局域网 | 我们优势 ✓ |
| **实验环境** | 云端虚拟机 | Docker容器 | 相当 = |
| **教学功能** | 中（无班级管理） | 强（完整教学功能） | 我们优势 ✓ |
| **课程体系** | 完整（多技术栈） | 专注Python | 他们优势 ✗ |
| **价格** | ¥99/月（会员） | 一次性¥10,000 | 我们优势 ✓ |
| **数据安全** | 云端存储 | 本地存储 | 我们优势 ✓ |
| **网络依赖** | 强（需互联网） | 弱（局域网） | 我们优势 ✓ |

**结论**: 实验楼是云端平台，我们是本地部署，差异化明显。

**竞品总结**:

| 竞品 | 威胁程度 | 主要差异 | 应对策略 |
|------|---------|---------|---------|
| **LeetCode** | 低 | 定位不同（刷题 vs 教学） | 强化教学功能 |
| **Codecademy** | 中 | 市场不同（国际 vs 中国） | 深耕中国市场 |
| **Jupyter Notebook** | 低 | 定位不同（工具 vs 平台） | 强化多用户功能 |
| **实验楼** | 中 | 部署方式不同（云端 vs 本地） | 强化本地部署优势 |

#### 2.2.3 竞争策略

**1. 差异化竞争策略**

**产品差异化**:
- **本地部署 + 教学功能**: 唯一同时具备的产品
- **智能提示 + 游戏化**: 提升学习效果和兴趣
- **社区互助 + 数据分析**: 提升教学效果

**市场差异化**:
- **中小型机构**: 专注中小型机构（100-500人），不与大型企业竞争
- **中文市场**: 专注中文市场，不与国际产品竞争
- **本地部署**: 专注本地部署市场，不与云端SaaS竞争

**价格差异化**:
- **一次性付费**: vs 云端SaaS的持续付费
- **开源版本**: 提供免费开源版本，吸引用户
- **付费版本**: 提供增值服务（技术支持、定制开发）

**2. 成本领先策略**

**降低成本**:
- **开源技术**: 无授权费用
- **本地部署**: 无云服务器费用
- **轻量级架构**: 硬件要求低
- **自动化运维**: 维护成本低

**传递价值**:
- **价格优势**: 一次性投入，长期使用
- **成本透明**: 无隐藏费用
- **ROI明确**: 18个月回收投资

**3. 聚焦策略**

**聚焦细分市场**:
- **培训机构**: 40%市场份额，主要目标客户
- **高等院校**: 30%市场份额，次要目标客户
- **中小学校**: 15%市场份额，潜在目标客户

**聚焦核心功能**:
- **代码执行**: Docker沙箱，安全可靠
- **智能提示**: 3级渐进式提示，引导学习
- **自动批改**: 节省教师时间70%
- **数据分析**: 识别薄弱点，个性化辅导

**4. 快速跟随策略**

**跟随行业趋势**:
- **AI技术**: 集成ChatGPT、GitHub Copilot等AI工具
- **WebAssembly**: 提升代码执行性能
- **微服务**: 提升系统可扩展性
- **云原生**: 支持云端部署（可选）

**跟随竞品创新**:
- **监控竞品**: 定期分析竞品新功能
- **快速迭代**: 2周一个Sprint，快速响应
- **用户反馈**: 收集用户需求，优先级排序

#### 2.2.4 竞争壁垒

**1. 技术壁垒**

**Docker沙箱技术**:
- **难度**: 需要深厚的容器技术积累
- **时间**: 需要6个月以上的研发时间
- **成本**: 需要投入3-5人的研发团队
- **风险**: 安全漏洞、性能问题、兼容性问题

**代码执行引擎**:
- **难度**: 需要处理各种边界情况和安全问题
- **时间**: 需要3个月以上的研发时间
- **成本**: 需要投入2-3人的研发团队
- **风险**: 代码注入、资源耗尽、死循环

**智能提示算法**:
- **难度**: 需要教育学和心理学知识
- **时间**: 需要6个月以上的研发时间
- **成本**: 需要投入2-3人的研发团队
- **风险**: 提示不当、影响学习效果

**2. 数据壁垒**

**题库资源**:
- **规模**: 1000+道题目，覆盖所有知识点
- **质量**: 每道题都有测试用例、提示、解析
- **时间**: 需要1年以上的积累
- **成本**: 需要投入5-10人的内容团队

**用户数据**:
- **规模**: 10,000+用户，100,000+提交记录
- **价值**: 用于优化产品、改进算法
- **时间**: 需要1年以上的积累
- **成本**: 需要投入数据分析团队

**教学经验**:
- **来源**: 教师使用反馈、学生学习数据
- **价值**: 用于改进功能、优化体验
- **时间**: 需要1年以上的积累
- **成本**: 需要投入产品团队

**3. 品牌壁垒**

**先发优势**:
- **时间窗口**: 本地部署市场刚刚兴起
- **市场份额**: 争取成为第一个进入者
- **用户心智**: 占领用户心智，成为品类代表

**用户口碑**:
- **NPS**: 目标NPS >50
- **推荐率**: 目标推荐率 >40%
- **复购率**: 目标复购率 >60%

**案例积累**:
- **数量**: 目标100+案例
- **质量**: 覆盖不同类型机构
- **展示**: 官网、宣传资料、销售材料

**4. 网络效应壁垒**

**用户网络效应**:
- **用户越多，价值越大**: 更多讨论、更多分享、更多资源
- **临界点**: 预计1000+活跃用户形成网络效应
- **增长**: 用户增长带动内容增长，内容增长带动用户增长

**教师网络效应**:
- **教师越多，内容越丰富**: 更多题目、更多课程、更多经验
- **临界点**: 预计100+活跃教师形成网络效应
- **增长**: 教师增长带动内容增长，内容增长带动教师增长

**机构网络效应**:
- **机构越多，品牌越强**: 更多案例、更多口碑、更多推荐
- **临界点**: 预计50+机构形成网络效应
- **增长**: 机构增长带动品牌增长，品牌增长带动机构增长

### 2.3 目标市场

#### 2.3.1 市场细分

**按机构类型细分**:

| 细分市场 | 市场规模 | 增长率 | 竞争强度 | 进入难度 | 优先级 |
|---------|---------|--------|---------|---------|--------|
| **培训机构** | ¥6亿 | 40% | 中 | 低 | P0（最高） |
| **高等院校** | ¥4.5亿 | 35% | 低 | 中 | P1（高） |
| **中小学校** | ¥2.25亿 | 30% | 低 | 高 | P2（中） |
| **企业内训** | ¥1.5亿 | 25% | 中 | 中 | P1（高） |
| **自学小组** | ¥0.75亿 | 20% | 高 | 低 | P3（低） |

**按地域细分**:

| 地域 | 市场规模 | 增长率 | 竞争强度 | 进入难度 | 优先级 |
|------|---------|--------|---------|---------|--------|
| **一线城市** | ¥6亿 | 30% | 高 | 中 | P1（高） |
| **新一线城市** | ¥4.5亿 | 40% | 中 | 低 | P0（最高） |
| **二线城市** | ¥3亿 | 35% | 低 | 低 | P1（高） |
| **三线及以下** | ¥1.5亿 | 25% | 低 | 高 | P2（中） |

**按用户规模细分**:

| 用户规模 | 市场规模 | 数量 | 客单价 | 优先级 |
|---------|---------|------|--------|--------|
| **50-100人** | ¥3亿 | 3,000机构 | ¥10,000 | P2（中） |
| **100-200人** | ¥4.5亿 | 2,250机构 | ¥20,000 | P1（高） |
| **200-500人** | ¥6亿 | 1,200机构 | ¥50,000 | P0（最高） |
| **500+人** | ¥1.5亿 | 150机构 | ¥100,000 | P3（低，需迁移MySQL） |

**目标细分市场**:
1. **主要市场**: 新一线城市的培训机构（200-500人）
2. **次要市场**: 一线城市的高等院校（200-1000人）
3. **潜在市场**: 二线城市的企业内训（100-300人）

#### 2.3.2 目标客户画像

**主要客户：培训机构（Python培训班）**

**基本信息**:
- **机构类型**: 编程培训机构、IT培训机构
- **机构规模**: 200-500人
- **地域分布**: 新一线城市（成都、杭州、武汉、西安等）
- **年营收**: ¥500万-¥2000万
- **Python课程占比**: 30%-50%

**痛点**:
1. **云端成本高**: 每年云服务器费用¥5万+，占成本10%
2. **数据安全担忧**: 学生代码、作业数据存储在云端，担心泄露
3. **网络依赖强**: 网络不稳定影响教学，学生体验差
4. **功能定制困难**: 云端SaaS无法定制，无法满足特殊需求

**需求**:
1. **降低成本**: 一次性投入，长期使用，降低运营成本
2. **数据安全**: 本地存储，完全可控，符合法规
3. **稳定可靠**: 局域网可用，不依赖互联网
4. **功能完整**: 班级管理、作业系统、数据分析

**决策流程**:
1. **调研阶段**（1-2周）: 搜索、咨询、试用
2. **评估阶段**（2-4周）: 对比竞品、内部讨论、预算评估
3. **决策阶段**（1-2周）: 管理层审批、合同签订
4. **部署阶段**（1-2周）: 安装部署、培训、试运行
5. **使用阶段**（长期）: 正式使用、反馈、迭代

**决策人**:
- **技术负责人**（40%权重）: 关注技术可行性、稳定性、安全性
- **教学负责人**（30%权重）: 关注教学功能、易用性、学习效果
- **财务负责人**（20%权重）: 关注成本、ROI、预算
- **管理层**（10%权重）: 关注战略、品牌、风险

**次要客户：高等院校（计算机学院）**

**基本信息**:
- **机构类型**: 本科院校、高职院校
- **机构规模**: 200-1000人（计算机学院）
- **地域分布**: 一线城市、新一线城市
- **年预算**: ¥50万-¥200万（信息化预算）
- **Python课程**: 必修课、选修课

**痛点**:
1. **网络不稳定**: 校园网不稳定，影响云端IDE使用
2. **功能不够教学化**: 传统IDE不适合教学，缺少班级管理、作业系统
3. **数据分析不足**: 无法了解学生学习情况，无法识别薄弱点
4. **采购流程长**: 云端SaaS需要每年采购，流程复杂

**需求**:
1. **稳定可靠**: 局域网可用，不依赖互联网
2. **教学功能**: 班级管理、作业系统、数据分析
3. **易用性**: 学生易上手，教师易管理
4. **一次性采购**: 避免每年采购，简化流程

**决策流程**:
1. **需求提出**（1-2周）: 教师提出需求
2. **调研评估**（4-8周）: 技术部门调研、评估、预算
3. **采购流程**（8-12周）: 招标、评标、合同签订
4. **部署实施**（2-4周）: 安装部署、培训、试运行
5. **验收使用**（长期）: 验收、正式使用、反馈

**决策人**:
- **教务处**（30%权重）: 关注教学效果、学生满意度
- **信息中心**（30%权重）: 关注技术可行性、稳定性、安全性
- **财务处**（20%权重）: 关注预算、成本、ROI
- **学院领导**（20%权重）: 关注战略、品牌、风险

**潜在客户：企业内训（IT部门）**

**基本信息**:
- **企业类型**: 互联网公司、传统企业IT部门
- **企业规模**: 100-300人（IT部门）
- **地域分布**: 一线城市、新一线城市、二线城市
- **年培训预算**: ¥20万-¥100万
- **Python培训**: 新员工培训、技能提升

**痛点**:
1. **数据保密**: 培训代码、项目代码不能上传云端
2. **无法定制**: 云端SaaS无法定制，无法满足企业特殊需求
3. **成本高**: 云端SaaS按人头收费，成本高
4. **网络限制**: 企业内网限制，无法访问外网

**需求**:
1. **数据保密**: 本地部署，数据不出企业
2. **定制化**: 可以定制功能，满足企业需求
3. **成本可控**: 一次性投入，不按人头收费
4. **内网部署**: 支持内网部署，不依赖外网

**决策流程**:
1. **需求提出**（1-2周）: HR或IT部门提出需求
2. **调研评估**（2-4周）: IT部门调研、评估、预算
3. **决策审批**（2-4周）: 管理层审批、合同签订
4. **部署实施**（1-2周）: 安装部署、培训、试运行
5. **使用反馈**（长期）: 正式使用、反馈、迭代

**决策人**:
- **IT负责人**（40%权重）: 关注技术可行性、安全性、可维护性
- **HR负责人**（30%权重）: 关注培训效果、员工满意度
- **财务负责人**（20%权重）: 关注成本、ROI、预算
- **管理层**（10%权重）: 关注战略、风险

#### 2.3.3 市场进入策略

**阶段1: 种子用户阶段（0-3个月，MVP）**

**目标**:
- 获取10-20个种子用户
- 验证产品价值
- 收集用户反馈

**策略**:
1. **免费试用**: 提供免费试用版本，吸引早期用户
2. **深度服务**: 提供一对一服务，深度了解用户需求
3. **快速迭代**: 2周一个Sprint，快速响应用户反馈
4. **案例积累**: 积累成功案例，用于后续推广

**渠道**:
- **行业社群**: Python教学社群、编程教育社群
- **技术论坛**: CSDN、掘金、知乎、V2EX
- **线下活动**: 参加教育技术展会、编程教育沙龙
- **口碑推荐**: 种子用户推荐

**阶段2: 早期采用者阶段（3-6个月，V1.0）**

**目标**:
- 获取50-100个付费用户
- 建立品牌认知
- 形成口碑传播

**策略**:
1. **内容营销**: 发布技术博客、教学案例、产品介绍
2. **社群运营**: 建立用户社群，促进交流、分享
3. **合作推广**: 与培训机构、高校合作，联合推广
4. **优惠活动**: 早鸟优惠、推荐奖励、团购优惠

**渠道**:
- **官网SEO**: 优化官网，提升搜索排名
- **内容平台**: 知乎、CSDN、掘金、公众号
- **行业媒体**: 教育科技媒体、编程教育媒体
- **合作伙伴**: 培训机构、高校、技术社区

**阶段3: 早期大众阶段（6-12个月，V2.0）**

**目标**:
- 获取200-500个付费用户
- 成为品类领导者
- 实现盈利

**策略**:
1. **品牌建设**: 打造品牌形象，提升品牌认知
2. **渠道拓展**: 建立销售团队，拓展渠道
3. **产品迭代**: 持续优化产品，提升用户体验
4. **生态建设**: 建立开发者生态，吸引第三方开发者

**渠道**:
- **直销团队**: 建立销售团队，主动拓展客户
- **渠道代理**: 发展代理商，覆盖更多地域
- **线上广告**: 百度、知乎、CSDN等平台投放广告
- **线下活动**: 举办产品发布会、用户大会

#### 2.3.4 市场份额目标

**3年市场份额目标**:

| 年份 | 目标用户数 | 市场份额 | 营收目标 | 说明 |
|------|-----------|---------|---------|------|
| **Year 1（MVP+V1.0）** | 50-100机构 | 0.01% | ¥150万 | 种子用户+早期采用者 |
| **Year 2（V2.0）** | 200-300机构 | 0.03% | ¥600万 | 早期大众 |
| **Year 3（V3.0）** | 500-800机构 | 0.06% | ¥1,500万 | 早期大众+晚期大众 |

**市场份额计算**:
- **Year 1**: 100机构 / 1,000,000机构（全国培训机构+高校+企业） = 0.01%
- **Year 2**: 300机构 / 1,000,000机构 = 0.03%
- **Year 3**: 800机构 / 1,000,000机构 = 0.06%

**营收计算**:
- **Year 1**: 100机构 × ¥15,000（平均客单价） = ¥150万
- **Year 2**: 300机构 × ¥20,000（平均客单价） = ¥600万
- **Year 3**: 800机构 × ¥18,750（平均客单价） = ¥1,500万

**细分市场份额目标**:

| 细分市场 | Year 1 | Year 2 | Year 3 | 说明 |
|---------|--------|--------|--------|------|
| **培训机构** | 40机构 | 120机构 | 320机构 | 主要市场 |
| **高等院校** | 30机构 | 90机构 | 240机构 | 次要市场 |
| **中小学校** | 15机构 | 45机构 | 120机构 | 潜在市场 |
| **企业内训** | 10机构 | 30机构 | 80机构 | 潜在市场 |
| **自学小组** | 5机构 | 15机构 | 40机构 | 长尾市场 |
| **总计** | 100机构 | 300机构 | 800机构 | - |

### 2.4 PEST分析

#### 2.4.1 政策环境（Political）

**有利因素**:

1. **编程教育政策支持**
   - **2017年**: 国务院发布《新一代人工智能发展规划》，要求在中小学设置人工智能相关课程
   - **2018年**: 教育部发布《普通高中信息技术课程标准》，Python成为必修内容
   - **2019年**: 国务院发布《国家职业教育改革实施方案》，强调实践技能培养
   - **影响**: 编程教育需求增加，市场规模扩大

2. **数据安全法规**
   - **2021年**: 《数据安全法》实施，要求数据本地化存储
   - **2021年**: 《个人信息保护法》实施，要求保护个人信息
   - **2021年**: 《网络安全法》修订，强化网络安全要求
   - **影响**: 本地部署需求增加，云端SaaS受限

3. **教育信息化政策**
   - **2018年**: 教育部发布《教育信息化2.0行动计划》，推动教育信息化
   - **2022年**: 教育部发布《教育数字化战略行动》，加快教育数字化转型
   - **影响**: 学校信息化预算增加，采购意愿增强

4. **职业教育政策**
   - **2019年**: 国务院发布《国家职业教育改革实施方案》，强调实践技能培养
   - **2021年**: 教育部发布《职业教育专业目录（2021年）》，新增人工智能、大数据等专业
   - **影响**: 职业教育市场扩大，Python培训需求增加

**不利因素**:

1. **教育培训监管**
   - **2021年**: "双减"政策实施，K12学科培训受限
   - **影响**: 部分培训机构转型，市场不确定性增加
   - **应对**: 专注职业教育、高等教育，避开K12学科培训

2. **数据跨境传输限制**
   - **2021年**: 《数据出境安全评估办法》实施，限制数据跨境传输
   - **影响**: 国际产品（如Codecademy）受限
   - **应对**: 本地部署，数据不出境，符合法规

#### 2.4.2 经济环境（Economic）

**有利因素**:

1. **经济持续增长**
   - **GDP增长**: 2023年GDP增长5.2%，2024年预计增长5.0%
   - **人均GDP**: 2023年人均GDP ¥89,358，持续增长
   - **影响**: 教育支出增加，市场规模扩大

2. **数字经济发展**
   - **规模**: 2023年数字经济规模¥50.2万亿，占GDP比重41.5%
   - **增长**: 数字经济增速10.3%，高于GDP增速
   - **影响**: 编程人才需求增加，Python培训市场扩大

3. **就业市场需求**
   - **Python岗位**: 2023年Python岗位需求增长30%
   - **平均薪资**: Python开发平均薪资¥15,000-¥25,000/月
   - **影响**: 学习Python的动力增强，市场需求增加

4. **教育支出增加**
   - **家庭教育支出**: 2023年家庭教育支出占比15%-20%
   - **职业培训支出**: 2023年职业培训支出增长25%
   - **影响**: 用户支付能力增强，客单价提升

**不利因素**:

1. **经济下行压力**
   - **影响**: 企业缩减培训预算，个人减少教育支出
   - **应对**: 降低价格，提供分期付款，提升性价比

2. **云服务成本下降**
   - **影响**: 云端SaaS成本下降，价格优势减弱
   - **应对**: 强化本地部署优势（数据安全、网络独立）

#### 2.4.3 社会环境（Social）

**有利因素**:

1. **编程成为必备技能**
   - **趋势**: 编程从专业技能变为通用技能
   - **数据**: 2023年，60%的职场人认为编程是必备技能
   - **影响**: 学习编程的意愿增强，市场需求增加

2. **终身学习理念普及**
   - **趋势**: 学习型社会，终身学习成为趋势
   - **数据**: 2023年，70%的成年人参加过职业培训
   - **影响**: 职业培训市场扩大，Python培训需求增加

3. **在线教育接受度提高**
   - **趋势**: 疫情加速在线教育普及，用户习惯养成
   - **数据**: 2023年，在线教育用户规模4.5亿，渗透率45%
   - **影响**: 在线学习平台接受度提高，市场规模扩大

4. **Python社区活跃**
   - **趋势**: Python社区活跃，学习资源丰富
   - **数据**: 2023年，Python开发者数量1500万+，全球第一
   - **影响**: Python学习门槛降低，市场需求增加

5. **数据安全意识增强**
   - **趋势**: 数据泄露事件频发，用户数据安全意识增强
   - **数据**: 2023年，80%的机构关注数据安全
   - **影响**: 本地部署需求增加，云端SaaS受限

**不利因素**:

1. **学习时间碎片化**
   - **影响**: 用户学习时间碎片化，完成率低
   - **应对**: 提供碎片化学习内容，提升完成率

2. **注意力分散**
   - **影响**: 用户注意力分散，学习效果差
   - **应对**: 游戏化激励，提升学习兴趣

#### 2.4.4 技术环境（Technology）

**有利因素**:

1. **容器技术成熟**
   - **Docker**: 2023年，Docker用户数1300万+，企业采用率70%
   - **Kubernetes**: 2023年，Kubernetes采用率50%+
   - **影响**: Docker沙箱技术成熟，代码执行安全可靠

2. **Web技术发展**
   - **HTML5**: 支持WebSocket、WebAssembly等新特性
   - **Vue.js 3**: 性能提升、TypeScript支持、Composition API
   - **CodeMirror 6**: 性能提升、模块化、扩展性强
   - **影响**: Web IDE体验提升，接近桌面IDE

3. **AI技术应用**
   - **ChatGPT**: 2023年，ChatGPT用户数1亿+
   - **GitHub Copilot**: 2023年，GitHub Copilot用户数100万+
   - **影响**: AI辅助编程成为趋势，可集成AI功能

4. **云原生技术**
   - **微服务**: 提升系统可扩展性
   - **DevOps**: 提升开发效率
   - **影响**: 系统架构更灵活，易于扩展

5. **开源生态繁荣**
   - **Python**: 2023年，PyPI包数量40万+
   - **Vue.js**: 2023年，npm包数量200万+
   - **影响**: 开发效率提升，成本降低

**不利因素**:

1. **技术更新快**
   - **影响**: 需要持续学习，技术债务增加
   - **应对**: 选择成熟技术栈，避免过度追新

2. **安全漏洞频发**
   - **影响**: 容器安全、代码执行安全面临挑战
   - **应对**: 定期安全审计，及时修复漏洞

**PEST分析总结**:

| 维度 | 有利因素 | 不利因素 | 总体评价 |
|------|---------|---------|---------|
| **政策（P）** | 编程教育政策支持、数据安全法规、教育信息化政策、职业教育政策 | 教育培训监管、数据跨境传输限制 | ✅ 有利 |
| **经济（E）** | 经济持续增长、数字经济发展、就业市场需求、教育支出增加 | 经济下行压力、云服务成本下降 | ✅ 有利 |
| **社会（S）** | 编程成为必备技能、终身学习理念、在线教育接受度、Python社区活跃、数据安全意识 | 学习时间碎片化、注意力分散 | ✅ 有利 |
| **技术（T）** | 容器技术成熟、Web技术发展、AI技术应用、云原生技术、开源生态繁荣 | 技术更新快、安全漏洞频发 | ✅ 有利 |

**结论**: PEST分析显示，宏观环境整体有利，政策支持、经济增长、社会需求、技术成熟，为pythonLearn提供了良好的发展机遇。

---

## 3. 用户画像

### 3.1 用户角色概览

**6个核心用户角色**:

| 角色 | 占比 | 优先级 | 主要需求 | 关键痛点 |
|------|------|--------|---------|---------|
| **Python初学者（学生）** | 60% | P0 | 学习Python基础、完成作业、通过考试 | 缺少即时反馈、遇到问题无人指导、学习过程枯燥 |
| **进阶学习者（学生）** | 20% | P1 | 提升编程能力、准备面试、参加竞赛 | 题目难度不够、缺少实战项目、学习路径不清晰 |
| **教师** | 15% | P0 | 教学、批改作业、了解学生情况 | 批改作业耗时长、难以了解学生情况、无法识别薄弱点 |
| **管理员** | 3% | P1 | 管理系统、监控运行、数据备份 | 部署复杂、维护困难、缺少监控工具 |
| **内容创作者（教师）** | 1.5% | P2 | 创建题目、编写课程、分享经验 | 创建题目复杂、缺少模板、无法复用 |
| **机构管理者** | 0.5% | P2 | 了解运营情况、评估教学效果、决策 | 缺少数据报告、无法评估ROI、决策依据不足 |

### 3.2 Python初学者（学生）

**基本信息**:
- **年龄**: 18-25岁
- **学历**: 大学生、职业培训学员
- **编程经验**: 0-6个月
- **学习目标**: 掌握Python基础、完成作业、通过考试
- **学习时间**: 每周5-10小时

**用户画像**:

**画像1: 大学生小李**
- **年龄**: 20岁
- **学校**: 某二本院校计算机专业大二学生
- **背景**: 高中没学过编程，大一开始学Python
- **目标**: 通过Python课程考试，为后续课程打基础
- **痛点**:
  - 遇到问题不知道怎么解决，老师答疑时间有限
  - 写完代码不知道对不对，要等老师批改
  - 学习过程枯燥，容易放弃
- **期望**:
  - 写完代码立即知道对不对
  - 遇到问题有提示，不要直接给答案
  - 学习过程有趣，有成就感

**画像2: 培训学员小王**
- **年龄**: 24岁
- **背景**: 传统行业转行，参加Python培训班
- **目标**: 3个月学会Python，找到开发工作
- **痛点**:
  - 学习时间紧，压力大
  - 基础薄弱，跟不上进度
  - 缺少实战经验，不知道怎么应用
- **期望**:
  - 快速掌握Python基础
  - 有实战项目练习
  - 有就业指导

**用户需求**:

| 需求类型 | 具体需求 | 优先级 | 满足方式 |
|---------|---------|--------|---------|
| **功能需求** | 在线代码编辑器 | P0 | CodeMirror 6，语法高亮、自动补全 |
| **功能需求** | 实时代码执行 | P0 | Docker沙箱，5秒超时 |
| **功能需求** | 智能提示 | P0 | 3级渐进式提示 |
| **功能需求** | 题目练习 | P0 | 1000+题目，覆盖所有知识点 |
| **功能需求** | 学习路径 | P1 | 8阶段学习路径，循序渐进 |
| **功能需求** | 讨论区 | P1 | 提问、回答、点赞、收藏 |
| **功能需求** | 积分系统 | P2 | 完成题目获得积分，兑换奖励 |
| **功能需求** | 成就系统 | P2 | 解锁成就，获得徽章 |

**用户旅程**:

```
注册登录 → 选择学习路径 → 学习知识点 → 练习题目 → 遇到问题 → 查看提示 → 继续练习 → 完成题目 → 获得积分 → 解锁成就 → 继续学习
```

**关键时刻（Moments of Truth）**:
1. **首次使用**: 注册登录，选择学习路径（决定是否继续使用）
2. **首次练习**: 完成第一道题目，获得即时反馈（决定是否继续练习）
3. **遇到困难**: 遇到难题，查看提示，解决问题（决定是否放弃）
4. **获得成就**: 完成一定数量题目，解锁成就（决定是否继续学习）

**痛点-需求映射**:

| 痛点 | 需求 | 解决方案 | 优先级 |
|------|------|---------|--------|
| **缺少即时反馈** | 实时代码执行 | Docker沙箱，5秒内返回结果 | P0 |
| **遇到问题无人指导** | 智能提示 | 3级渐进式提示，引导思考 | P0 |
| **学习过程枯燥** | 游戏化激励 | 积分、等级、成就系统 | P1 |
| **学习路径不清晰** | 学习路径 | 8阶段学习路径，循序渐进 | P1 |
| **缺少社交互动** | 讨论区 | 提问、回答、点赞、收藏 | P2 |

### 3.3 进阶学习者（学生）

**基本信息**:
- **年龄**: 20-30岁
- **学历**: 大学生、研究生、在职人员
- **编程经验**: 6个月-2年
- **学习目标**: 提升编程能力、准备面试、参加竞赛
- **学习时间**: 每周10-20小时

**用户画像**:

**画像1: 考研学生小张**
- **年龄**: 22岁
- **背景**: 计算机专业大四学生，准备考研
- **目标**: 提升编程能力，准备考研复试
- **痛点**:
  - 基础题目太简单，缺少挑战
  - 缺少算法题目，无法准备面试
  - 缺少实战项目，无法应用所学
- **期望**:
  - 有难度适中的算法题目
  - 有实战项目练习
  - 有面试指导

**画像2: 求职者小赵**
- **年龄**: 25岁
- **背景**: 培训班毕业，准备找工作
- **目标**: 通过面试，找到Python开发工作
- **痛点**:
  - 缺少面试经验，不知道怎么准备
  - 缺少项目经验，简历不够丰富
  - 缺少算法基础，无法通过笔试
- **期望**:
  - 有面试题目练习
  - 有项目实战
  - 有简历指导

**用户需求**:

| 需求类型 | 具体需求 | 优先级 | 满足方式 |
|---------|---------|--------|---------|
| **功能需求** | 算法题目 | P0 | 数据结构、算法题目 |
| **功能需求** | 实战项目 | P0 | Web开发、数据分析项目 |
| **功能需求** | 面试题库 | P1 | 常见面试题目 |
| **功能需求** | 代码评审 | P1 | AI代码评审，提出改进建议 |
| **功能需求** | 竞赛模式 | P2 | 限时答题，排行榜 |
| **功能需求** | 学习社区 | P2 | 分享经验、讨论问题 |

**痛点-需求映射**:

| 痛点 | 需求 | 解决方案 | 优先级 |
|------|------|---------|--------|
| **题目难度不够** | 算法题目 | 数据结构、算法题目 | P0 |
| **缺少实战项目** | 实战项目 | Web开发、数据分析项目 | P0 |
| **缺少面试准备** | 面试题库 | 常见面试题目 | P1 |
| **代码质量不高** | 代码评审 | AI代码评审，提出改进建议 | P1 |
| **缺少竞争激励** | 竞赛模式 | 限时答题，排行榜 | P2 |

### 3.4 教师

**基本信息**:
- **年龄**: 25-45岁
- **职业**: 高校教师、培训机构讲师
- **教学经验**: 1-10年
- **教学目标**: 提升教学效果、减轻工作负担
- **使用时间**: 每周5-15小时

**用户画像**:

**画像1: 高校教师李老师**
- **年龄**: 35岁
- **学校**: 某二本院校计算机学院
- **背景**: 教授Python课程5年，每学期200+学生
- **目标**: 提升教学效果，减轻批改作业负担
- **痛点**:
  - 批改作业耗时长，每次批改需要10+小时
  - 难以了解每个学生的学习情况
  - 无法识别学生的薄弱点，无法个性化辅导
  - 缺少教学工具，只能用传统IDE
- **期望**:
  - 自动批改作业，节省时间
  - 实时了解学生学习情况
  - 自动识别薄弱点，提供个性化辅导建议
  - 有专门的教学工具

**画像2: 培训讲师王老师**
- **年龄**: 28岁
- **机构**: 某Python培训机构
- **背景**: 教授Python课程2年，每期30-50学生
- **目标**: 提升学生就业率，提升机构口碑
- **痛点**:
  - 学生基础参差不齐，难以统一教学
  - 缺少数据分析，无法评估教学效果
  - 缺少教学资源，需要自己准备题目
  - 学生学习积极性不高，完成率低
- **期望**:
  - 个性化教学，根据学生水平调整
  - 数据分析，评估教学效果
  - 丰富的教学资源，题库、课程
  - 游戏化激励，提升学生积极性

**用户需求**:

| 需求类型 | 具体需求 | 优先级 | 满足方式 |
|---------|---------|--------|---------|
| **功能需求** | 班级管理 | P0 | 创建班级、添加学生、发布公告 |
| **功能需求** | 作业系统 | P0 | 创建作业、自动批改、查看统计 |
| **功能需求** | 数据分析 | P0 | 学习时长、完成题数、正确率、薄弱点 |
| **功能需求** | 题库管理 | P1 | 创建题目、导入题目、分类管理 |
| **功能需求** | 学习报告 | P1 | 周报、月报、学期报告 |
| **功能需求** | 个性化推荐 | P2 | 根据薄弱点推荐题目 |

**用户旅程**:

```
登录系统 → 创建班级 → 添加学生 → 创建作业 → 学生提交作业 → 自动批改 → 查看统计 → 识别薄弱点 → 个性化辅导 → 发布学习报告
```

**关键时刻（Moments of Truth）**:
1. **首次使用**: 创建班级，添加学生（决定是否继续使用）
2. **首次批改**: 自动批改作业，查看统计（决定是否继续使用）
3. **数据分析**: 查看学习报告，识别薄弱点（决定是否推荐给同事）
4. **个性化辅导**: 根据薄弱点推荐题目，提升教学效果（决定是否续费）

**痛点-需求映射**:

| 痛点 | 需求 | 解决方案 | 优先级 |
|------|------|---------|--------|
| **批改作业耗时长** | 自动批改 | 测试用例自动运行，自动批改 | P0 |
| **难以了解学生情况** | 数据分析 | 学习时长、完成题数、正确率、热力图 | P0 |
| **无法识别薄弱点** | 薄弱点识别 | 基于错题自动识别，生成复习建议 | P0 |
| **缺少教学工具** | 班级管理 | 创建班级、添加学生、发布公告 | P0 |
| **缺少教学资源** | 题库管理 | 1000+题目，可自定义 | P1 |

### 3.5 管理员

**基本信息**:
- **年龄**: 25-40岁
- **职业**: IT管理员、运维工程师
- **技术经验**: 2-10年
- **管理目标**: 系统稳定运行、数据安全、高效运维
- **使用时间**: 每周2-5小时

**用户需求**:

| 需求类型 | 具体需求 | 优先级 | 满足方式 |
|---------|---------|--------|---------|
| **功能需求** | 用户管理 | P0 | 创建用户、分配角色、权限管理 |
| **功能需求** | 系统监控 | P0 | CPU、内存、磁盘、网络监控 |
| **功能需求** | 数据备份 | P0 | 自动备份、手动备份、恢复 |
| **功能需求** | 日志管理 | P1 | 查看日志、搜索日志、导出日志 |
| **功能需求** | 系统配置 | P1 | 修改配置、重启服务、更新系统 |
| **功能需求** | 安全审计 | P2 | 登录日志、操作日志、异常检测 |

**痛点-需求映射**:

| 痛点 | 需求 | 解决方案 | 优先级 |
|------|------|---------|--------|
| **部署复杂** | 一键部署 | Docker Compose一键部署 | P0 |
| **维护困难** | 系统监控 | Prometheus + Grafana监控 | P0 |
| **数据安全** | 数据备份 | 自动备份 + 手动备份 | P0 |
| **缺少监控工具** | 日志管理 | 集中式日志管理 | P1 |

### 3.6 内容创作者（教师）

**基本信息**:
- **年龄**: 28-45岁
- **职业**: 资深教师、课程设计师
- **教学经验**: 3-15年
- **创作目标**: 创建优质题目、编写课程、分享经验
- **使用时间**: 每周3-8小时

**用户需求**:

| 需求类型 | 具体需求 | 优先级 | 满足方式 |
|---------|---------|--------|---------|
| **功能需求** | 题目创建 | P0 | 在线编辑器、测试用例、提示、解析 |
| **功能需求** | 题目模板 | P1 | 常见题型模板，快速创建 |
| **功能需求** | 题目复用 | P1 | 导入导出、分享、收藏 |
| **功能需求** | 课程编写 | P2 | Markdown编辑器、预览、发布 |
| **功能需求** | 经验分享 | P2 | 博客、讨论区、教学案例 |

### 3.7 机构管理者

**基本信息**:
- **年龄**: 30-50岁
- **职位**: 校长、院长、培训机构负责人
- **管理经验**: 5-20年
- **管理目标**: 了解运营情况、评估教学效果、决策支持
- **使用时间**: 每周1-3小时

**用户需求**:

| 需求类型 | 具体需求 | 优先级 | 满足方式 |
|---------|---------|--------|---------|
| **功能需求** | 数据报告 | P0 | 用户数、活跃度、完成率、满意度 |
| **功能需求** | 教学效果评估 | P0 | 学习时长、完成题数、正确率、进步率 |
| **功能需求** | ROI分析 | P1 | 成本、收益、投资回报率 |
| **功能需求** | 决策支持 | P1 | 数据可视化、趋势分析、预测 |

### 3.8 用户旅程地图

**学生用户旅程**:

| 阶段 | 行为 | 触点 | 情绪 | 痛点 | 机会点 |
|------|------|------|------|------|--------|
| **认知** | 了解产品 | 官网、社交媒体、口碑 | 好奇 | 信息不足 | 提供试用、案例展示 |
| **注册** | 注册账号 | 注册页面 | 期待 | 注册流程复杂 | 简化注册、第三方登录 |
| **首次使用** | 选择学习路径 | 学习路径页面 | 兴奋 | 不知道选哪个 | 推荐学习路径、新手引导 |
| **学习** | 练习题目 | 题目页面 | 专注 | 遇到难题卡住 | 智能提示、讨论区 |
| **成长** | 完成题目 | 成就页面 | 满足 | 缺少反馈 | 积分、等级、成就 |
| **留存** | 持续学习 | 个人中心 | 习惯 | 学习动力不足 | 每日签到、学习提醒 |
| **推荐** | 推荐给朋友 | 分享页面 | 自豪 | 缺少激励 | 推荐奖励、邀请码 |

**教师用户旅程**:

| 阶段 | 行为 | 触点 | 情绪 | 痛点 | 机会点 |
|------|------|------|------|------|--------|
| **认知** | 了解产品 | 官网、教育展会、同行推荐 | 好奇 | 信息不足 | 提供Demo、案例展示 |
| **试用** | 创建班级 | 班级管理页面 | 期待 | 操作不熟悉 | 新手引导、视频教程 |
| **使用** | 布置作业 | 作业系统页面 | 专注 | 创建作业复杂 | 作业模板、快速创建 |
| **批改** | 查看统计 | 数据分析页面 | 满意 | 数据不够详细 | 详细报告、可视化图表 |
| **优化** | 个性化辅导 | 学生详情页面 | 成就感 | 缺少辅导建议 | 自动识别薄弱点、推荐题目 |
| **续费** | 续费决策 | 续费页面 | 犹豫 | 价格、效果 | 优惠活动、效果报告 |

### 3.9 痛点-需求映射矩阵

**学生痛点-需求映射**:

| 痛点 | 严重程度 | 影响人群 | 需求 | 解决方案 | 优先级 | MVP |
|------|---------|---------|------|---------|--------|-----|
| **缺少即时反馈** | 🔥🔥🔥 | 90% | 实时代码执行 | Docker沙箱 | P0 | ✅ |
| **遇到问题无人指导** | 🔥🔥🔥 | 80% | 智能提示 | 3级渐进式提示 | P0 | ✅ |
| **学习过程枯燥** | 🔥🔥 | 70% | 游戏化激励 | 积分、等级、成就 | P1 | ❌ |
| **学习路径不清晰** | 🔥🔥 | 60% | 学习路径 | 8阶段学习路径 | P1 | ❌ |
| **缺少社交互动** | 🔥 | 50% | 讨论区 | 提问、回答、点赞 | P2 | ❌ |

**教师痛点-需求映射**:

| 痛点 | 严重程度 | 影响人群 | 需求 | 解决方案 | 优先级 | MVP |
|------|---------|---------|------|---------|--------|-----|
| **批改作业耗时长** | 🔥🔥🔥 | 95% | 自动批改 | 测试用例自动运行 | P0 | ✅ |
| **难以了解学生情况** | 🔥🔥🔥 | 85% | 数据分析 | 学习时长、完成题数、正确率 | P0 | ✅ |
| **无法识别薄弱点** | 🔥🔥 | 75% | 薄弱点识别 | 基于错题自动识别 | P0 | ✅ |
| **缺少教学工具** | 🔥🔥 | 70% | 班级管理 | 创建班级、添加学生 | P0 | ✅ |
| **缺少教学资源** | 🔥 | 60% | 题库管理 | 1000+题目 | P1 | ❌ |

### 3.10 用户分层模型

**按活跃度分层**:

| 用户层级 | 定义 | 占比 | 特征 | 策略 |
|---------|------|------|------|------|
| **核心用户** | 每周活跃3天+ | 20% | 高频使用、高完成率、高满意度 | VIP服务、专属福利、意见领袖 |
| **活跃用户** | 每周活跃1-2天 | 30% | 中频使用、中完成率、中满意度 | 激励活动、学习提醒、社群运营 |
| **普通用户** | 每月活跃1-3天 | 30% | 低频使用、低完成率、低满意度 | 召回活动、优惠券、新功能推送 |
| **流失用户** | 30天未活跃 | 20% | 不再使用 | 流失原因调研、召回活动 |

**按学习阶段分层**:

| 学习阶段 | 定义 | 占比 | 特征 | 策略 |
|---------|------|------|------|------|
| **新手** | 完成题数<10 | 30% | 刚开始学习，容易放弃 | 新手引导、简单题目、鼓励激励 |
| **初级** | 完成题数10-50 | 30% | 掌握基础，需要巩固 | 基础题目、知识点复习、学习路径 |
| **中级** | 完成题数50-200 | 25% | 掌握进阶，需要提升 | 进阶题目、实战项目、算法题目 |
| **高级** | 完成题数200+ | 15% | 掌握高级，需要挑战 | 算法题目、竞赛模式、社区贡献 |

**按付费意愿分层**:

| 付费层级 | 定义 | 占比 | 特征 | 策略 |
|---------|------|------|------|------|
| **付费用户** | 已付费 | 10% | 高价值、高忠诚度 | VIP服务、专属福利、续费优惠 |
| **高意愿用户** | 试用中，满意度高 | 20% | 潜在付费用户 | 转化活动、优惠券、效果展示 |
| **中意愿用户** | 试用中，满意度中 | 30% | 需要说服 | 功能介绍、案例展示、试用延长 |
| **低意愿用户** | 试用中，满意度低 | 40% | 不太可能付费 | 改进产品、收集反馈、免费版 |

---

## 4. 产品目标

### 4.1 业务目标

**短期目标（0-6个月，MVP+V1.0）**:

| 目标 | 指标 | 目标值 | 衡量方式 | 负责人 |
|------|------|--------|---------|--------|
| **验证产品价值** | 种子用户数 | 10-20机构 | 注册机构数 | 产品经理 |
| **验证产品可行性** | 系统稳定性 | 99%可用性 | 监控系统 | 技术负责人 |
| **验证商业模式** | 付费转化率 | >20% | 付费用户数/试用用户数 | 商务负责人 |
| **建立品牌认知** | 品牌知名度 | 行业前10 | 问卷调查 | 市场负责人 |

**中期目标（6-12个月，V2.0）**:

| 目标 | 指标 | 目标值 | 衡量方式 | 负责人 |
|------|------|--------|---------|--------|
| **扩大用户规模** | 付费用户数 | 100-200机构 | 注册机构数 | 商务负责人 |
| **提升用户满意度** | NPS | >50 | 用户调研 | 产品经理 |
| **实现盈亏平衡** | 营收 | ¥300万 | 财务报表 | 财务负责人 |
| **建立竞争优势** | 市场份额 | 0.02% | 市场调研 | 市场负责人 |

**长期目标（12-36个月，V3.0）**:

| 目标 | 指标 | 目标值 | 衡量方式 | 负责人 |
|------|------|--------|---------|--------|
| **成为品类领导者** | 市场份额 | 0.1% | 市场调研 | CEO |
| **实现规模化盈利** | 营收 | ¥1,500万 | 财务报表 | 财务负责人 |
| **建立生态系统** | 第三方开发者 | 50+ | 开发者平台 | 技术负责人 |
| **探索国际化** | 海外用户 | 10% | 用户数据 | 国际化负责人 |

### 4.2 用户目标

**学生目标**:

| 目标 | 指标 | 目标值 | 衡量方式 |
|------|------|--------|---------|
| **提升学习效率** | 学习时长 | -30% | 完成相同题目所需时间 |
| **提升学习兴趣** | 完成率 | +40% | 完成题目数/开始题目数 |
| **提升学习效果** | 正确率 | +20% | 正确题目数/完成题目数 |
| **减少学习困惑** | 求助次数 | -60% | 提问次数 |

**教师目标**:

| 目标 | 指标 | 目标值 | 衡量方式 |
|------|------|--------|---------|
| **减轻工作负担** | 批改时间 | -70% | 批改作业所需时间 |
| **提升教学效果** | 学生成绩 | +40% | 学生平均成绩 |
| **提升管理效率** | 管理时间 | -50% | 班级管理所需时间 |
| **提升教学资源** | 题库规模 | +3倍 | 可用题目数 |

**机构目标**:

| 目标 | 指标 | 目标值 | 衡量方式 |
|------|------|--------|---------|
| **降低成本** | 运营成本 | -60% | 3年总成本 |
| **提升数据安全** | 数据泄露 | 0次 | 安全事件数 |
| **提升教学质量** | 学生满意度 | +30% | 满意度调研 |
| **提升竞争力** | 招生人数 | +20% | 招生数据 |

### 4.3 产品指标（OKR）

**Year 1 OKR（MVP+V1.0）**:

**O1: 验证产品价值和商业模式**
- KR1: 获取20+种子用户，NPS >40
- KR2: 付费转化率 >20%
- KR3: 用户留存率（30天）>60%
- KR4: 系统稳定性 >99%

**O2: 建立品牌认知**
- KR1: 官网月访问量 >10,000
- KR2: 社交媒体粉丝数 >5,000
- KR3: 媒体报道 >10篇
- KR4: 行业活动演讲 >3次

**Year 2 OKR（V2.0）**:

**O1: 扩大用户规模**
- KR1: 付费用户数 >150机构
- KR2: 活跃用户数 >5,000人
- KR3: 用户留存率（90天）>50%
- KR4: NPS >50

**O2: 实现盈亏平衡**
- KR1: 营收 >¥300万
- KR2: 毛利率 >70%
- KR3: 获客成本（CAC）<¥2,000
- KR4: 客户生命周期价值（LTV）>¥10,000

**Year 3 OKR（V3.0）**:

**O1: 成为品类领导者**
- KR1: 市场份额 >0.1%
- KR2: 品牌知名度（行业内）>80%
- KR3: 用户推荐率 >40%
- KR4: 案例数量 >100

**O2: 实现规模化盈利**
- KR1: 营收 >¥1,500万
- KR2: 净利润率 >30%
- KR3: LTV/CAC >5
- KR4: 年增长率 >100%

### 4.4 增长模型

**AARRR增长模型**:

| 阶段 | 指标 | MVP目标 | V1.0目标 | V2.0目标 | 策略 |
|------|------|---------|----------|----------|------|
| **Acquisition（获取）** | 月新增用户 | 50 | 200 | 500 | SEO、内容营销、合作推广 |
| **Activation（激活）** | 注册后7天活跃率 | 60% | 70% | 80% | 新手引导、首次体验优化 |
| **Retention（留存）** | 30天留存率 | 40% | 50% | 60% | 游戏化激励、学习提醒 |
| **Revenue（收入）** | 付费转化率 | 20% | 25% | 30% | 免费试用、效果展示 |
| **Referral（推荐）** | 推荐率 | 10% | 20% | 30% | 推荐奖励、口碑传播 |

**增长飞轮**:

```
优质内容（题库、课程）
    ↓
吸引学生用户
    ↓
学生使用体验好
    ↓
教师看到效果
    ↓
教师推荐给同事
    ↓
机构批量采购
    ↓
更多资源投入内容
    ↓
优质内容（循环）
```

### 4.5 里程碑

**MVP里程碑（Month 1-3）**:

| 里程碑 | 时间 | 标志 | 验收标准 |
|--------|------|------|---------|
| **M1: 技术预研完成** | Week 2 | 核心技术验证通过 | Docker、SQLite、CodeMirror测试通过 |
| **M2: MVP Alpha** | Week 6 | 核心功能可用 | 6个核心功能开发完成 |
| **M3: MVP Beta** | Week 10 | 系统稳定 | 10个种子用户试用 |
| **M4: MVP Release** | Week 12 | 正式发布 | 20个种子用户，NPS >40 |

**V1.0里程碑（Month 4-6）**:

| 里程碑 | 时间 | 标志 | 验收标准 |
|--------|------|------|---------|
| **M5: V1.0 Alpha** | Month 4 | 新功能开发完成 | 游戏化、讨论区、学习路径 |
| **M6: V1.0 Beta** | Month 5 | 系统优化 | 性能提升50%，bug<10 |
| **M7: V1.0 Release** | Month 6 | 正式发布 | 100个付费用户，NPS >50 |

**V2.0里程碑（Month 7-12）**:

| 里程碑 | 时间 | 标志 | 验收标准 |
|--------|------|------|---------|
| **M8: V2.0 Alpha** | Month 9 | 高级功能开发完成 | AI辅助、竞赛模式、数据分析 |
| **M9: V2.0 Beta** | Month 11 | 系统优化 | 支持500用户，性能提升100% |
| **M10: V2.0 Release** | Month 12 | 正式发布 | 200个付费用户，营收¥300万 |

### 4.6 成功标准

**产品成功标准**:

| 维度 | 指标 | 目标值 | 衡量方式 | 优先级 |
|------|------|--------|---------|--------|
| **用户规模** | 付费用户数 | >100机构 | 用户数据 | P0 |
| **用户满意度** | NPS | >50 | 用户调研 | P0 |
| **用户活跃度** | DAU/MAU | >30% | 用户数据 | P1 |
| **用户留存** | 30天留存率 | >50% | 用户数据 | P0 |
| **学习效果** | 完成率 | >60% | 学习数据 | P1 |
| **教学效果** | 学生成绩提升 | >20% | 成绩数据 | P1 |
| **系统稳定性** | 可用性 | >99% | 监控系统 | P0 |
| **商业成功** | 营收 | >¥300万 | 财务报表 | P0 |

**失败标准（触发重新评估）**:

| 指标 | 阈值 | 说明 |
|------|------|------|
| **付费转化率** | <10% | 商业模式不成立 |
| **30天留存率** | <30% | 产品价值不足 |
| **NPS** | <30 | 用户满意度低 |
| **系统可用性** | <95% | 技术不稳定 |
| **月增长率** | <5% | 增长停滞 |

---

## 5. 功能需求

### 5.1 MVP核心功能（6个）

#### F1. 用户注册/登录

**功能描述**: 用户可以注册账号、登录系统、管理个人信息

**用户故事**:
- 作为学生，我希望快速注册账号，以便开始学习
- 作为教师，我希望使用邮箱登录，以便管理班级
- 作为管理员，我希望重置用户密码，以便帮助用户

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **注册** | 邮箱+密码注册 | P0 | 注册成功，自动登录 |
| **登录** | 邮箱+密码登录 | P0 | 登录成功，跳转首页 |
| **忘记密码** | 邮箱重置密码 | P1 | 收到重置邮件，密码重置成功 |
| **个人信息** | 查看/编辑个人信息 | P1 | 信息保存成功 |
| **角色管理** | 学生/教师/管理员 | P0 | 角色权限正确 |

**详细规格说明**:

**1. 用户注册**:

*输入字段*:
- 邮箱（必填）：
  - 格式：符合RFC 5322标准
  - 长度：5-100字符
  - 唯一性：系统内唯一
  - 验证：实时验证邮箱格式和唯一性
- 密码（必填）：
  - 长度：8-32字符
  - 复杂度：至少包含大写字母、小写字母、数字、特殊字符中的3种
  - 强度：实时显示密码强度（弱/中/强）
  - 确认密码：必须与密码一致
- 用户名（必填）：
  - 长度：2-20字符
  - 字符：支持中文、英文、数字、下划线
  - 唯一性：系统内唯一
- 角色（必填）：
  - 选项：学生/教师
  - 默认：学生
  - 说明：管理员角色由系统管理员手动分配
- 验证码（可选）：
  - 类型：图形验证码（4位数字+字母）
  - 有效期：5分钟
  - 用途：防止机器人注册

*业务规则*:
- 同一邮箱只能注册一次
- 同一IP地址1小时内最多注册3个账号
- 注册成功后自动登录，跳转到新手引导页
- 注册成功后发送欢迎邮件

*交互流程*:
```
1. 用户访问注册页面
2. 用户填写注册信息
3. 系统实时验证邮箱格式和唯一性
4. 系统实时验证密码强度
5. 用户点击"注册"按钮
6. 系统验证所有字段
7. 系统创建用户账号（密码BCrypt加密）
8. 系统生成JWT Token
9. 系统发送欢迎邮件（异步）
10. 系统跳转到新手引导页
```

*错误处理*:
- 邮箱已存在：提示"该邮箱已被注册，请直接登录或使用其他邮箱"
- 密码强度不足：提示"密码强度不足，请包含大写字母、小写字母、数字、特殊字符中的至少3种"
- 用户名已存在：提示"该用户名已被使用，请更换用户名"
- 验证码错误：提示"验证码错误，请重新输入"
- 网络错误：提示"网络错误，请稍后重试"

**2. 用户登录**:

*输入字段*:
- 邮箱（必填）：
  - 格式：符合RFC 5322标准
  - 长度：5-100字符
- 密码（必填）：
  - 长度：8-32字符
- 记住我（可选）：
  - 类型：复选框
  - 说明：勾选后Token有效期延长至7天

*业务规则*:
- 登录失败5次后锁定账号30分钟
- 锁定期间显示剩余时间
- 登录成功后记录登录日志（IP、时间、设备）
- 支持单点登录（同一账号同时只能在一个设备登录）

*交互流程*:
```
1. 用户访问登录页面
2. 用户填写邮箱和密码
3. 用户点击"登录"按钮
4. 系统验证邮箱和密码
5. 系统检查账号是否被锁定
6. 系统生成JWT Token
7. 系统记录登录日志
8. 系统跳转到首页
```

*错误处理*:
- 邮箱不存在：提示"该邮箱未注册，请先注册"
- 密码错误：提示"密码错误，您还有X次尝试机会"
- 账号被锁定：提示"账号已被锁定，请X分钟后再试"
- 网络错误：提示"网络错误，请稍后重试"

**3. 忘记密码**:

*输入字段*:
- 邮箱（必填）：
  - 格式：符合RFC 5322标准
  - 长度：5-100字符

*业务规则*:
- 发送重置密码邮件到注册邮箱
- 重置链接有效期：1小时
- 同一邮箱1小时内最多发送3次重置邮件
- 重置密码后，所有已登录设备自动登出

*交互流程*:
```
1. 用户点击"忘记密码"
2. 用户输入注册邮箱
3. 用户点击"发送重置邮件"
4. 系统验证邮箱是否存在
5. 系统生成重置Token
6. 系统发送重置邮件（包含重置链接）
7. 用户点击邮件中的重置链接
8. 用户输入新密码
9. 系统验证Token有效性
10. 系统更新密码
11. 系统登出所有已登录设备
12. 系统跳转到登录页
```

**数据模型**:

```python
class User:
    id: int  # 主键
    email: str  # 邮箱（唯一，索引）
    password_hash: str  # 密码哈希（BCrypt cost=12）
    username: str  # 用户名（唯一，索引）
    role: str  # 角色（student/teacher/admin）
    avatar: str  # 头像URL（默认：/static/avatars/default.png）
    is_active: bool  # 是否激活（默认：True）
    is_locked: bool  # 是否锁定（默认：False）
    locked_until: datetime  # 锁定截止时间
    login_attempts: int  # 登录尝试次数（默认：0）
    last_login_at: datetime  # 最后登录时间
    last_login_ip: str  # 最后登录IP
    created_at: datetime  # 创建时间
    updated_at: datetime  # 更新时间

class LoginLog:
    id: int  # 主键
    user_id: int  # 用户ID（外键）
    ip: str  # 登录IP
    user_agent: str  # 用户代理
    status: str  # 状态（success/failed）
    created_at: datetime  # 创建时间

class PasswordResetToken:
    id: int  # 主键
    user_id: int  # 用户ID（外键）
    token: str  # 重置Token（UUID）
    expires_at: datetime  # 过期时间
    is_used: bool  # 是否已使用（默认：False）
    created_at: datetime  # 创建时间
```

**API接口**:

| 接口 | 方法 | 路径 | 请求参数 | 响应数据 | 状态码 |
|------|------|------|---------|---------|--------|
| 注册 | POST | /api/auth/register | email, password, username, role | user, token | 201 |
| 登录 | POST | /api/auth/login | email, password, remember_me | user, token | 200 |
| 登出 | POST | /api/auth/logout | - | message | 200 |
| 获取个人信息 | GET | /api/users/me | - | user | 200 |
| 更新个人信息 | PUT | /api/users/me | username, avatar | user | 200 |
| 发送重置邮件 | POST | /api/auth/forgot-password | email | message | 200 |
| 重置密码 | POST | /api/auth/reset-password | token, password | message | 200 |
| 检查邮箱唯一性 | GET | /api/auth/check-email | email | available | 200 |
| 检查用户名唯一性 | GET | /api/auth/check-username | username | available | 200 |

**API请求示例**:

```json
// POST /api/auth/register
{
  "email": "student@example.com",
  "password": "Password123!",
  "username": "张三",
  "role": "student"
}

// 响应
{
  "user": {
    "id": 1,
    "email": "student@example.com",
    "username": "张三",
    "role": "student",
    "avatar": "/static/avatars/default.png",
    "created_at": "2025-11-07T10:00:00Z"
  },
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**验收标准**:
- ✅ 注册成功率 >95%
- ✅ 登录响应时间 <200ms
- ✅ 密码加密强度 BCrypt cost=12
- ✅ JWT Token有效期 24小时（记住我：7天）
- ✅ 登录失败5次锁定30分钟
- ✅ 邮箱格式验证准确率 100%
- ✅ 密码强度验证准确率 100%
- ✅ 重置密码邮件发送成功率 >99%
- ✅ 支持并发注册 >50
- ✅ 支持并发登录 >100

#### F2. 在线代码编辑器

**功能描述**: 提供在线代码编辑器，支持语法高亮、自动补全、代码折叠

**用户故事**:
- 作为学生，我希望有语法高亮，以便更容易阅读代码
- 作为学生，我希望有自动补全，以便更快编写代码
- 作为学生，我希望有代码折叠，以便管理长代码

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **语法高亮** | Python语法高亮 | P0 | 关键字、字符串、注释高亮正确 |
| **自动补全** | 代码自动补全 | P0 | 输入关键字自动提示 |
| **代码折叠** | 折叠/展开代码块 | P1 | 函数、类可折叠 |
| **括号匹配** | 括号自动匹配 | P1 | 输入左括号自动补全右括号 |
| **快捷键** | 常用快捷键 | P1 | Ctrl+S保存，Ctrl+/注释 |
| **行号显示** | 显示行号 | P0 | 行号显示正确 |
| **代码缩进** | 自动缩进 | P0 | Tab键缩进4空格 |
| **撤销/重做** | 撤销/重做操作 | P0 | Ctrl+Z撤销，Ctrl+Y重做 |

**详细规格说明**:

**1. 语法高亮**:

*高亮规则*:
- **关键字**（蓝色）：if, else, elif, for, while, def, class, import, from, return, try, except, finally, with, as, pass, break, continue, yield, lambda, and, or, not, in, is, True, False, None
- **字符串**（绿色）：单引号、双引号、三引号字符串
- **注释**（灰色）：# 单行注释，''' 或 """ 多行注释
- **数字**（橙色）：整数、浮点数、科学计数法
- **函数名**（黄色）：函数定义和调用
- **类名**（紫色）：类定义和实例化
- **内置函数**（青色）：print, len, range, input, int, str, list, dict, set, tuple等
- **运算符**（黑色）：+, -, *, /, //, %, **, ==, !=, <, >, <=, >=, =, +=, -=等
- **括号**（黑色）：(), [], {}

*性能要求*:
- 1000行代码高亮渲染时间 <100ms
- 10000行代码高亮渲染时间 <500ms
- 支持实时高亮（输入时即时更新）

**2. 自动补全**:

*补全类型*:
- **关键字补全**：输入关键字前缀，显示匹配的关键字
  - 示例：输入"de"，提示"def"
- **内置函数补全**：输入内置函数前缀，显示匹配的内置函数
  - 示例：输入"pr"，提示"print"
- **变量补全**：输入变量前缀，显示当前作用域内的变量
  - 示例：输入"us"，提示"username"
- **函数补全**：输入函数前缀，显示当前文件内的函数
  - 示例：输入"cal"，提示"calculate"
- **模块补全**：输入模块前缀，显示常用模块
  - 示例：输入"im"，提示"import"

*补全触发*:
- 自动触发：输入2个字符后自动显示补全列表
- 手动触发：按Ctrl+Space显示补全列表
- 补全列表最多显示10个选项
- 支持上下键选择，Enter键确认

*补全优先级*:
1. 当前文件内的变量和函数（最高优先级）
2. Python关键字
3. Python内置函数
4. 常用模块

**3. 代码折叠**:

*折叠规则*:
- **函数折叠**：折叠函数体（def开头到函数结束）
- **类折叠**：折叠类体（class开头到类结束）
- **条件语句折叠**：折叠if/else/elif代码块
- **循环语句折叠**：折叠for/while代码块
- **注释折叠**：折叠多行注释

*折叠操作*:
- 点击行号左侧的折叠图标（▼）折叠代码块
- 点击折叠图标（▶）展开代码块
- 快捷键：Ctrl+Shift+[ 折叠，Ctrl+Shift+] 展开
- 折叠后显示"..."表示折叠内容

**4. 括号匹配**:

*匹配规则*:
- 输入左括号（(、[、{）自动补全右括号（)、]、}）
- 光标自动定位到括号内
- 选中文本后输入左括号，自动包裹文本
- 删除左括号时，自动删除右括号（如果括号内为空）

*高亮匹配*:
- 光标在括号上时，高亮显示匹配的括号
- 匹配的括号用边框标记
- 不匹配的括号用红色标记

**5. 快捷键**:

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| **Ctrl+S** | 保存代码 | 保存到本地存储 |
| **Ctrl+Enter** | 运行代码 | 执行当前代码 |
| **Ctrl+/** | 注释/取消注释 | 单行或多行注释 |
| **Ctrl+Z** | 撤销 | 撤销上一步操作 |
| **Ctrl+Y** | 重做 | 重做上一步操作 |
| **Ctrl+F** | 查找 | 查找文本 |
| **Ctrl+H** | 替换 | 替换文本 |
| **Ctrl+A** | 全选 | 选中所有代码 |
| **Ctrl+C** | 复制 | 复制选中文本 |
| **Ctrl+V** | 粘贴 | 粘贴文本 |
| **Ctrl+X** | 剪切 | 剪切选中文本 |
| **Ctrl+D** | 删除行 | 删除当前行 |
| **Ctrl+Shift+D** | 复制行 | 复制当前行 |
| **Ctrl+Shift+K** | 删除行 | 删除当前行 |
| **Ctrl+]** | 增加缩进 | 增加选中行缩进 |
| **Ctrl+[** | 减少缩进 | 减少选中行缩进 |
| **Ctrl+Space** | 自动补全 | 显示补全列表 |
| **Tab** | 缩进 | 缩进4空格 |
| **Shift+Tab** | 取消缩进 | 取消缩进4空格 |

**6. 其他功能**:

*行号显示*:
- 显示行号（从1开始）
- 当前行高亮显示
- 行号宽度自动调整

*代码缩进*:
- Tab键缩进4空格（符合PEP 8规范）
- 自动缩进：按Enter键后自动缩进到上一行的缩进级别
- 智能缩进：在函数、类、条件语句、循环语句后自动增加缩进

*撤销/重做*:
- 支持无限次撤销/重做
- 撤销/重做历史记录保存到本地存储
- 刷新页面后撤销/重做历史记录不丢失

*代码保存*:
- 自动保存：每30秒自动保存到本地存储
- 手动保存：Ctrl+S保存到本地存储
- 保存提示：保存成功后显示Toast提示

**技术实现**:

*核心库*:
- **CodeMirror 6**：代码编辑器核心
- **@codemirror/lang-python**：Python语法支持
- **@codemirror/autocomplete**：自动补全
- **@codemirror/fold**：代码折叠
- **@codemirror/search**：查找替换
- **@codemirror/commands**：快捷键命令

*配置参数*:
```javascript
{
  theme: 'light',  // 主题：light/dark
  lineNumbers: true,  // 显示行号
  highlightActiveLine: true,  // 高亮当前行
  indentUnit: 4,  // 缩进单位：4空格
  tabSize: 4,  // Tab大小：4空格
  lineWrapping: false,  // 不自动换行
  autoCloseBrackets: true,  // 自动闭合括号
  matchBrackets: true,  // 括号匹配
  foldGutter: true,  // 显示折叠图标
  autocompletion: true,  // 自动补全
  history: true,  // 撤销/重做
  maxLength: 100000,  // 最大字符数：10万
}
```

**验收标准**:
- ✅ 1000行代码流畅编辑（无卡顿）
- ✅ 10000行代码可编辑（轻微卡顿可接受）
- ✅ 语法高亮准确率 >99%
- ✅ 自动补全响应时间 <100ms
- ✅ 自动补全准确率 >90%
- ✅ 支持常用快捷键 >15个
- ✅ 代码折叠功能正常
- ✅ 括号匹配功能正常
- ✅ 撤销/重做功能正常
- ✅ 自动保存功能正常

#### F3. 实时代码执行

**功能描述**: 在Docker沙箱中执行Python代码，返回执行结果

**用户故事**:
- 作为学生，我希望立即看到代码执行结果，以便验证代码正确性
- 作为学生，我希望看到错误信息，以便调试代码
- 作为教师，我希望代码执行安全，以便保护系统

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **代码执行** | 执行Python代码 | P0 | 返回stdout、stderr、exit_code |
| **测试用例** | 运行测试用例 | P0 | 返回通过/失败、错误信息 |
| **安全沙箱** | Docker容器隔离 | P0 | 无法访问宿主机、外网 |
| **资源限制** | CPU、内存、时间限制 | P0 | CPU 1核、内存256MB、超时5秒 |
| **错误处理** | 友好的错误提示 | P1 | 错误信息清晰易懂 |
| **执行队列** | 异步执行队列 | P0 | 支持并发执行 |
| **执行历史** | 保存执行历史 | P1 | 可查看历史记录 |

**详细规格说明**:

**1. 代码执行流程**:

```
1. 用户点击"运行代码"按钮
2. 前端发送代码到后端API
3. 后端验证代码（长度、危险操作）
4. 后端创建Submission记录（status=pending）
5. 后端将任务加入Celery队列
6. 前端显示"执行中..."状态
7. Celery Worker从队列获取任务
8. Worker创建Docker容器
9. Worker将代码写入容器
10. Worker执行代码（设置资源限制）
11. Worker捕获stdout、stderr、exit_code
12. Worker计算执行时间和内存使用
13. Worker更新Submission记录（status=accepted/error/timeout）
14. Worker删除Docker容器
15. 后端通过WebSocket推送结果到前端
16. 前端显示执行结果
```

**2. Docker沙箱配置**:

*Docker镜像*:
- 基础镜像：python:3.8-slim
- 预装库：无（用户代码不能import第三方库）
- 镜像大小：<100MB
- 镜像构建：
```dockerfile
FROM python:3.8-slim
WORKDIR /app
RUN useradd -m -u 1000 sandbox
USER sandbox
CMD ["python", "/app/code.py"]
```

*容器配置*:
```python
container_config = {
    'image': 'pythonlearn/sandbox:latest',
    'command': 'python /app/code.py',
    'mem_limit': '256m',  # 内存限制：256MB
    'memswap_limit': '256m',  # 禁用swap
    'cpu_quota': 100000,  # CPU限制：1核（100000/100000）
    'cpu_period': 100000,
    'network_disabled': True,  # 禁用网络
    'read_only': True,  # 只读文件系统
    'volumes': {
        '/tmp/code.py': {'bind': '/app/code.py', 'mode': 'ro'}
    },
    'working_dir': '/app',
    'user': 'sandbox',  # 非root用户
    'pids_limit': 50,  # 进程数限制
    'ulimits': [
        {'name': 'nofile', 'soft': 64, 'hard': 64},  # 文件描述符限制
        {'name': 'nproc', 'soft': 50, 'hard': 50}  # 进程数限制
    ],
    'security_opt': ['no-new-privileges'],  # 禁止提权
    'cap_drop': ['ALL'],  # 移除所有capabilities
    'remove': True,  # 执行完自动删除
    'detach': False,  # 同步执行
    'stdout': True,
    'stderr': True
}
```

*执行超时*:
- 超时时间：5秒
- 超时处理：强制停止容器，返回timeout状态
- 超时提示："代码执行超时（>5秒），请检查是否存在无限循环"

**3. 代码验证**:

*长度限制*:
- 最小长度：1字符
- 最大长度：10000字符（约300行）
- 超出限制：提示"代码长度超出限制（最大10000字符）"

*危险操作检测*:
```python
DANGEROUS_IMPORTS = [
    'os', 'sys', 'subprocess', 'socket', 'urllib',
    'requests', 'http', 'ftplib', 'smtplib',
    '__import__', 'eval', 'exec', 'compile',
    'open', 'file', 'input', 'raw_input'
]

DANGEROUS_KEYWORDS = [
    '__builtins__', '__globals__', '__locals__',
    '__import__', '__code__', '__class__'
]
```

*检测规则*:
- 检测import语句：禁止import危险模块
- 检测关键字：禁止使用危险关键字
- 检测函数调用：禁止调用危险函数
- 检测失败：返回错误提示"代码包含危险操作，禁止执行"

**4. 测试用例执行**:

*测试用例格式*:
```python
{
    "input": "5\n",  # 输入数据
    "expected_output": "120\n",  # 期望输出
    "is_sample": True,  # 是否为示例用例
    "timeout": 5  # 超时时间（秒）
}
```

*执行流程*:
```
1. 获取题目的所有测试用例
2. 遍历每个测试用例
3. 将测试用例的input作为stdin传入代码
4. 执行代码，捕获stdout
5. 比较stdout和expected_output
6. 记录测试结果（通过/失败）
7. 如果所有测试用例通过，status=accepted
8. 如果任一测试用例失败，status=wrong_answer
9. 返回测试结果详情
```

*输出比较规则*:
- 去除首尾空白字符
- 去除行尾空白字符
- 统一换行符（\n）
- 大小写敏感
- 浮点数比较：误差<1e-6

**5. 执行结果**:

*成功状态（accepted）*:
```json
{
  "status": "accepted",
  "stdout": "120\n",
  "stderr": "",
  "exit_code": 0,
  "execution_time": 123,  // ms
  "memory_used": 8192,  // KB
  "test_results": [
    {"input": "5\n", "expected": "120\n", "actual": "120\n", "passed": true},
    {"input": "10\n", "expected": "3628800\n", "actual": "3628800\n", "passed": true}
  ]
}
```

*错误状态（error）*:
```json
{
  "status": "error",
  "stdout": "",
  "stderr": "Traceback (most recent call last):\n  File \"/app/code.py\", line 5, in <module>\n    print(1/0)\nZeroDivisionError: division by zero\n",
  "exit_code": 1,
  "execution_time": 45,
  "memory_used": 7680,
  "error_message": "运行时错误：除数不能为零（第5行）"
}
```

*超时状态（timeout）*:
```json
{
  "status": "timeout",
  "stdout": "",
  "stderr": "",
  "exit_code": -1,
  "execution_time": 5000,
  "memory_used": 0,
  "error_message": "代码执行超时（>5秒），请检查是否存在无限循环"
}
```

*答案错误状态（wrong_answer）*:
```json
{
  "status": "wrong_answer",
  "stdout": "121\n",
  "stderr": "",
  "exit_code": 0,
  "execution_time": 98,
  "memory_used": 8064,
  "test_results": [
    {"input": "5\n", "expected": "120\n", "actual": "121\n", "passed": false}
  ],
  "error_message": "测试用例1未通过：期望输出120，实际输出121"
}
```

**6. 错误处理和友好提示**:

| 错误类型 | 原始错误 | 友好提示 |
|---------|---------|---------|
| **语法错误** | SyntaxError: invalid syntax | 语法错误：第X行代码语法不正确 |
| **缩进错误** | IndentationError: unexpected indent | 缩进错误：第X行缩进不正确 |
| **名称错误** | NameError: name 'x' is not defined | 名称错误：变量'x'未定义 |
| **类型错误** | TypeError: unsupported operand type(s) | 类型错误：不支持的操作类型 |
| **除零错误** | ZeroDivisionError: division by zero | 运行时错误：除数不能为零 |
| **索引错误** | IndexError: list index out of range | 索引错误：列表索引超出范围 |
| **键错误** | KeyError: 'key' | 键错误：字典键'key'不存在 |
| **值错误** | ValueError: invalid literal | 值错误：无效的值 |
| **导入错误** | ImportError: No module named 'xxx' | 导入错误：模块'xxx'不存在（仅支持Python标准库） |
| **超时** | Timeout | 代码执行超时（>5秒），请检查是否存在无限循环 |
| **内存溢出** | MemoryError | 内存溢出：代码使用内存超过256MB |

**技术实现**:

*后端技术栈*:
- **Flask**：Web框架
- **Celery**：异步任务队列
- **Redis**：消息队列和缓存
- **Docker SDK for Python**：Docker容器管理
- **WebSocket**：实时推送执行结果

*执行队列*:
```python
# Celery任务
@celery.task
def execute_code(submission_id):
    submission = Submission.query.get(submission_id)
    submission.status = 'running'
    db.session.commit()

    try:
        # 创建Docker容器并执行代码
        result = run_code_in_docker(submission.code)

        # 更新Submission记录
        submission.status = result['status']
        submission.stdout = result['stdout']
        submission.stderr = result['stderr']
        submission.exit_code = result['exit_code']
        submission.execution_time = result['execution_time']
        submission.memory_used = result['memory_used']
        db.session.commit()

        # 推送结果到前端
        socketio.emit('execution_result', result, room=submission.user_id)

    except Exception as e:
        submission.status = 'error'
        submission.stderr = str(e)
        db.session.commit()
```

**数据模型**:

```python
class Submission:
    id: int  # 主键
    user_id: int  # 用户ID（外键）
    problem_id: int  # 题目ID（外键，可为空）
    code: str  # 代码（最大10000字符）
    language: str  # 语言（python，默认）
    status: str  # 状态（pending/running/accepted/wrong_answer/error/timeout）
    stdout: str  # 标准输出（最大10000字符）
    stderr: str  # 标准错误（最大10000字符）
    exit_code: int  # 退出码
    execution_time: int  # 执行时间（ms）
    memory_used: int  # 内存使用（KB）
    test_results: JSON  # 测试结果（JSON格式）
    created_at: datetime  # 创建时间
    updated_at: datetime  # 更新时间
```

**API接口**:

| 接口 | 方法 | 路径 | 请求参数 | 响应数据 | 状态码 |
|------|------|------|---------|---------|--------|
| 执行代码 | POST | /api/submissions | code, problem_id | submission | 201 |
| 获取执行结果 | GET | /api/submissions/{id} | - | submission | 200 |
| 获取执行历史 | GET | /api/submissions | user_id, problem_id | submissions | 200 |

**验收标准**:
- ✅ 代码执行成功率 >99%
- ✅ 简单代码执行时间 <2秒（含容器启动）
- ✅ 复杂代码执行时间 <5秒
- ✅ 沙箱无法突破（安全测试100%通过）
- ✅ 支持并发执行 >20
- ✅ 危险操作检测准确率 100%
- ✅ 测试用例执行准确率 >99%
- ✅ 错误提示友好度 >90%（用户调研）
- ✅ 执行队列稳定性 >99%
- ✅ 容器资源隔离有效性 100%

#### F4. 题库管理

**功能描述**: 管理题目，包括创建、编辑、删除、分类

**用户故事**:
- 作为学生，我希望按难度筛选题目，以便选择合适的题目
- 作为教师，我希望创建自定义题目，以便满足教学需求
- 作为教师，我希望导入题目，以便快速建立题库

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **题目列表** | 查看题目列表 | P0 | 显示题目标题、难度、标签 |
| **题目详情** | 查看题目详情 | P0 | 显示题目描述、输入输出、示例 |
| **题目筛选** | 按难度、标签筛选 | P1 | 筛选结果正确 |
| **题目搜索** | 搜索题目 | P1 | 搜索结果正确 |
| **题目创建** | 创建新题目 | P1 | 题目保存成功 |
| **题目编辑** | 编辑题目 | P1 | 题目更新成功 |
| **题目删除** | 删除题目 | P2 | 题目删除成功 |
| **题目导入** | 批量导入题目 | P2 | 导入成功 |
| **题目导出** | 导出题目 | P2 | 导出成功 |

**详细规格说明**:

**1. 题目列表**:

*显示内容*:
- 题目编号（自动生成，如P001）
- 题目标题（最多50字符）
- 难度标签（简单/中等/困难，颜色区分）
- 分类标签（最多显示3个）
- 通过率（已通过人数/总提交人数）
- 我的状态（未开始/进行中/已通过）

*排序方式*:
- 默认排序：按编号升序
- 难度排序：简单→中等→困难
- 通过率排序：低→高或高→低
- 最新排序：按创建时间降序

*分页*:
- 每页显示：20题
- 分页控件：首页、上一页、页码、下一页、尾页
- 跳转：输入页码跳转

**2. 题目详情**:

*题目信息*:
- 题目编号和标题
- 难度和标签
- 题目描述（Markdown格式，支持代码块、图片、表格）
- 输入格式说明
- 输出格式说明
- 数据范围
- 示例输入输出（至少1个）
- 提示（3级渐进式提示，点击显示）
- 参考答案（仅教师可见）

*统计信息*:
- 总提交次数
- 通过次数
- 通过率
- 平均执行时间
- 平均内存使用

*我的提交记录*:
- 提交时间
- 提交状态（通过/失败/错误/超时）
- 执行时间
- 内存使用
- 查看代码

**3. 题目筛选和搜索**:

*筛选条件*:
- 难度：全部/简单/中等/困难
- 标签：全部/基础语法/控制流程/函数/数据结构/面向对象/文件操作/异常处理/高级特性
- 状态：全部/未开始/进行中/已通过
- 学习阶段：全部/阶段1-8

*搜索*:
- 搜索范围：题目标题、题目描述
- 搜索方式：模糊搜索
- 搜索结果：高亮显示匹配关键词

**4. 题目创建/编辑**:

*基本信息*:
- 题目标题（必填，2-50字符）
- 难度（必填，简单/中等/困难）
- 标签（必填，至少1个，最多5个）
- 学习阶段（必填，阶段1-8）

*题目描述*:
- 题目描述（必填，Markdown格式）
- 输入格式（必填）
- 输出格式（必填）
- 数据范围（可选）

*示例*:
- 示例输入（必填，至少1个）
- 示例输出（必填，至少1个）
- 示例说明（可选）

*测试用例*:
- 输入数据（必填）
- 期望输出（必填）
- 是否为示例（默认：否）
- 超时时间（默认：5秒）
- 至少3个测试用例（1个示例用例 + 2个隐藏用例）

*提示*:
- 提示1（轻度提示，可选）
- 提示2（中度提示，可选）
- 提示3（重度提示，可选）

*参考答案*:
- 参考代码（可选，Python代码）
- 答案说明（可选，Markdown格式）

*验证规则*:
- 题目标题不能为空
- 题目描述不能为空
- 至少1个示例用例
- 至少3个测试用例
- 测试用例的输入输出不能为空
- 参考答案必须能通过所有测试用例

**5. 题目导入/导出**:

*导入格式*:
- 文件格式：YAML
- 文件大小：最大10MB
- 批量导入：最多100题

*YAML格式示例*:
```yaml
- id: P001
  title: 计算阶乘
  difficulty: easy
  tags: [基础语法, 函数]
  stage: 3
  description: |
    编写一个函数，计算给定整数n的阶乘。

    阶乘定义：n! = 1 × 2 × 3 × ... × n
  input_format: 一个整数n（1 ≤ n ≤ 20）
  output_format: n的阶乘
  test_cases:
    - input: "5\n"
      expected_output: "120\n"
      is_sample: true
    - input: "10\n"
      expected_output: "3628800\n"
      is_sample: false
  hints:
    - 可以使用循环计算阶乘
    - 也可以使用递归
    - 注意边界条件：0! = 1
  solution: |
    def factorial(n):
        if n == 0:
            return 1
        return n * factorial(n - 1)

    n = int(input())
    print(factorial(n))
```

*导出格式*:
- 文件格式：YAML或JSON
- 导出范围：全部题目或筛选后的题目
- 导出内容：包含题目信息、测试用例、提示、参考答案

**数据模型**:

```python
class Problem:
    id: int  # 主键
    code: str  # 题目编号（如P001，唯一）
    title: str  # 标题（2-50字符）
    description: str  # 描述（Markdown，最大10000字符）
    difficulty: str  # 难度（easy/medium/hard）
    tags: JSON  # 标签（JSON数组，最多5个）
    stage: int  # 学习阶段（1-8）
    input_format: str  # 输入格式
    output_format: str  # 输出格式
    data_range: str  # 数据范围（可选）
    test_cases: JSON  # 测试用例（JSON数组）
    hints: JSON  # 提示（JSON数组，最多3个）
    solution: str  # 参考答案（Python代码）
    solution_explanation: str  # 答案说明（Markdown）
    created_by: int  # 创建者ID（外键）
    is_public: bool  # 是否公开（默认：True）
    submission_count: int  # 提交次数（默认：0）
    accepted_count: int  # 通过次数（默认：0）
    created_at: datetime  # 创建时间
    updated_at: datetime  # 更新时间

class ProblemSubmission:
    id: int  # 主键
    user_id: int  # 用户ID（外键）
    problem_id: int  # 题目ID（外键）
    status: str  # 状态（accepted/wrong_answer/error/timeout）
    created_at: datetime  # 创建时间
```

**API接口**:

| 接口 | 方法 | 路径 | 请求参数 | 响应数据 | 状态码 |
|------|------|------|---------|---------|--------|
| 获取题目列表 | GET | /api/problems | difficulty, tags, status, stage, page, per_page | problems, total | 200 |
| 获取题目详情 | GET | /api/problems/{id} | - | problem | 200 |
| 搜索题目 | GET | /api/problems/search | q, page, per_page | problems, total | 200 |
| 创建题目 | POST | /api/problems | problem | problem | 201 |
| 更新题目 | PUT | /api/problems/{id} | problem | problem | 200 |
| 删除题目 | DELETE | /api/problems/{id} | - | message | 200 |
| 导入题目 | POST | /api/problems/import | file | count, errors | 200 |
| 导出题目 | GET | /api/problems/export | ids, format | file | 200 |
| 获取我的提交记录 | GET | /api/problems/{id}/submissions | - | submissions | 200 |

**验收标准**:
- ✅ 题库规模 >100题（MVP）
- ✅ 题目分类 >10个
- ✅ 题目难度分布合理（easy 40%, medium 40%, hard 20%）
- ✅ 每题至少3个测试用例
- ✅ 每题至少3级提示
- ✅ 题目列表加载时间 <300ms
- ✅ 题目详情加载时间 <200ms
- ✅ 题目搜索响应时间 <500ms
- ✅ 题目创建成功率 >99%
- ✅ 题目导入成功率 >95%
- ✅ 支持并发访问 >100

#### F5. 班级管理（基础版）

**功能描述**: 教师可以创建班级、添加学生、发布公告

**用户故事**:
- 作为教师，我希望创建班级，以便组织学生
- 作为教师，我希望添加学生到班级，以便管理学生
- 作为教师，我希望发布公告，以便通知学生

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **创建班级** | 创建新班级 | P0 | 班级创建成功，生成邀请码 |
| **编辑班级** | 编辑班级信息 | P1 | 班级信息更新成功 |
| **删除班级** | 删除班级 | P2 | 班级删除成功，学生移除 |
| **添加学生** | 通过邀请码添加学生 | P0 | 学生加入成功 |
| **移除学生** | 从班级移除学生 | P1 | 学生移除成功 |
| **发布公告** | 发布班级公告 | P1 | 公告发布成功，学生收到通知 |
| **查看学生列表** | 查看班级学生列表 | P0 | 显示学生姓名、学号、加入时间 |
| **查看班级统计** | 查看班级学习统计 | P1 | 显示作业完成率、平均分 |

**详细规格说明**:

**1. 创建班级**:

*输入字段*:
- 班级名称（必填）：
  - 长度：2-50字符
  - 字符：支持中文、英文、数字、空格
  - 示例："2024级Python编程班"
- 班级描述（可选）：
  - 长度：0-500字符
  - 格式：纯文本
  - 示例："本班级用于2024级学生学习Python编程"
- 学期（可选）：
  - 格式：YYYY-学期（如"2024-秋季"）
  - 默认：当前学期

*业务规则*:
- 同一教师可以创建多个班级
- 班级名称在同一教师下不能重复
- 创建成功后自动生成6位邀请码（大写字母+数字）
- 邀请码全局唯一，有效期永久
- 教师自动成为班级管理员

*交互流程*:
```
1. 教师点击"创建班级"按钮
2. 教师填写班级信息
3. 教师点击"确定"按钮
4. 系统验证班级名称唯一性
5. 系统生成唯一邀请码
6. 系统创建班级记录
7. 系统添加教师为班级成员（role=teacher）
8. 系统显示班级详情和邀请码
9. 教师可以复制邀请码分享给学生
```

**2. 加入班级**:

*输入字段*:
- 邀请码（必填）：
  - 长度：6字符
  - 格式：大写字母+数字
  - 示例："ABC123"

*业务规则*:
- 学生通过邀请码加入班级
- 同一学生可以加入多个班级
- 同一学生不能重复加入同一班级
- 加入成功后学生收到通知

*交互流程*:
```
1. 学生点击"加入班级"按钮
2. 学生输入邀请码
3. 学生点击"加入"按钮
4. 系统验证邀请码有效性
5. 系统检查学生是否已加入该班级
6. 系统添加学生为班级成员（role=student）
7. 系统发送通知给学生
8. 系统跳转到班级详情页
```

*错误处理*:
- 邀请码不存在：提示"邀请码无效，请检查后重试"
- 已加入班级：提示"您已加入该班级"
- 网络错误：提示"网络错误，请稍后重试"

**3. 班级成员管理**:

*学生列表显示*:
- 学生姓名
- 学生邮箱
- 加入时间
- 学习统计（完成题数、正确率、学习时长）
- 操作（移除）

*排序方式*:
- 默认排序：按加入时间升序
- 姓名排序：按姓名拼音升序
- 完成题数排序：降序
- 正确率排序：降序

*移除学生*:
- 教师可以移除学生
- 移除后学生无法访问班级资源
- 移除后学生的作业提交记录保留
- 移除后学生收到通知

**4. 班级公告**:

*发布公告*:
- 公告标题（必填）：
  - 长度：2-100字符
  - 示例："本周作业通知"
- 公告内容（必填）：
  - 长度：10-5000字符
  - 格式：Markdown
  - 支持：文本、链接、图片、代码块
- 置顶（可选）：
  - 类型：复选框
  - 说明：置顶公告显示在列表顶部

*公告列表*:
- 显示内容：标题、发布时间、发布者
- 排序：置顶公告在前，其他按发布时间降序
- 分页：每页10条

*公告详情*:
- 标题
- 内容（Markdown渲染）
- 发布者
- 发布时间
- 已读人数

*通知机制*:
- 发布公告后，所有班级成员收到通知
- 通知方式：站内通知（未来支持邮件、短信）
- 通知内容：公告标题和摘要

**5. 班级统计**:

*统计指标*:
- 班级人数
- 作业总数
- 平均作业完成率
- 平均作业分数
- 活跃学生数（7天内有提交记录）
- 学习时长排行榜（Top 10）
- 完成题数排行榜（Top 10）

*图表展示*:
- 作业完成率趋势图（折线图）
- 作业分数分布图（柱状图）
- 学生活跃度图（饼图）

**数据模型**:

```python
class Class:
    id: int  # 主键
    name: str  # 班级名称（2-50字符）
    description: str  # 班级描述（0-500字符）
    semester: str  # 学期（如"2024-秋季"）
    teacher_id: int  # 教师ID（外键）
    invite_code: str  # 邀请码（6位，唯一，索引）
    is_active: bool  # 是否激活（默认：True）
    member_count: int  # 成员数（默认：0）
    created_at: datetime  # 创建时间
    updated_at: datetime  # 更新时间

class ClassMember:
    id: int  # 主键
    class_id: int  # 班级ID（外键，索引）
    user_id: int  # 用户ID（外键，索引）
    role: str  # 角色（teacher/student）
    joined_at: datetime  # 加入时间

    # 唯一约束：(class_id, user_id)

class Announcement:
    id: int  # 主键
    class_id: int  # 班级ID（外键，索引）
    title: str  # 标题（2-100字符）
    content: str  # 内容（Markdown，10-5000字符）
    is_pinned: bool  # 是否置顶（默认：False）
    created_by: int  # 创建者ID（外键）
    read_count: int  # 已读人数（默认：0）
    created_at: datetime  # 创建时间
    updated_at: datetime  # 更新时间

class AnnouncementRead:
    id: int  # 主键
    announcement_id: int  # 公告ID（外键）
    user_id: int  # 用户ID（外键）
    read_at: datetime  # 阅读时间

    # 唯一约束：(announcement_id, user_id)
```

**API接口**:

| 接口 | 方法 | 路径 | 请求参数 | 响应数据 | 状态码 |
|------|------|------|---------|---------|--------|
| 创建班级 | POST | /api/classes | name, description, semester | class | 201 |
| 获取班级列表 | GET | /api/classes | role, page, per_page | classes, total | 200 |
| 获取班级详情 | GET | /api/classes/{id} | - | class | 200 |
| 更新班级 | PUT | /api/classes/{id} | name, description, semester | class | 200 |
| 删除班级 | DELETE | /api/classes/{id} | - | message | 200 |
| 加入班级 | POST | /api/classes/join | invite_code | class | 200 |
| 退出班级 | POST | /api/classes/{id}/leave | - | message | 200 |
| 获取班级成员 | GET | /api/classes/{id}/members | role, page, per_page | members, total | 200 |
| 移除成员 | DELETE | /api/classes/{id}/members/{user_id} | - | message | 200 |
| 发布公告 | POST | /api/classes/{id}/announcements | title, content, is_pinned | announcement | 201 |
| 获取公告列表 | GET | /api/classes/{id}/announcements | page, per_page | announcements, total | 200 |
| 获取公告详情 | GET | /api/announcements/{id} | - | announcement | 200 |
| 标记公告已读 | POST | /api/announcements/{id}/read | - | message | 200 |
| 获取班级统计 | GET | /api/classes/{id}/stats | - | stats | 200 |

**API请求示例**:

```json
// POST /api/classes
{
  "name": "2024级Python编程班",
  "description": "本班级用于2024级学生学习Python编程",
  "semester": "2024-秋季"
}

// 响应
{
  "id": 1,
  "name": "2024级Python编程班",
  "description": "本班级用于2024级学生学习Python编程",
  "semester": "2024-秋季",
  "teacher_id": 1,
  "invite_code": "ABC123",
  "is_active": true,
  "member_count": 1,
  "created_at": "2025-11-07T10:00:00Z"
}
```

**验收标准**:
- ✅ 教师可以创建班级，生成唯一邀请码
- ✅ 学生可以通过邀请码加入班级
- ✅ 教师可以查看班级学生列表
- ✅ 教师可以发布公告，学生收到通知
- ✅ 支持多个班级管理
- ✅ 邀请码唯一性 100%
- ✅ 班级创建成功率 >99%
- ✅ 学生加入成功率 >99%
- ✅ 公告发布成功率 >99%
- ✅ 班级列表加载时间 <300ms
- ✅ 班级成员列表加载时间 <500ms
- ✅ 支持并发访问 >100

#### F6. 作业系统（基础版）

**功能描述**: 教师可以创建作业、学生提交作业、自动批改、查看统计

**用户故事**:
- 作为教师，我希望创建作业，以便布置练习
- 作为学生，我希望提交作业，以便完成练习
- 作为教师，我希望自动批改作业，以便节省时间
- 作为教师，我希望查看作业统计，以便了解学生情况

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **创建作业** | 创建新作业 | P0 | 作业创建成功，学生收到通知 |
| **编辑作业** | 编辑作业信息 | P1 | 作业信息更新成功 |
| **删除作业** | 删除作业 | P2 | 作业删除成功 |
| **提交作业** | 学生提交作业 | P0 | 作业提交成功，自动批改 |
| **查看提交** | 查看作业提交详情 | P0 | 显示代码、结果、分数 |
| **作业统计** | 查看作业统计 | P0 | 显示提交率、平均分、分数分布 |
| **学生统计** | 查看学生作业统计 | P0 | 显示完成题数、正确率、学习时长 |
| **重新提交** | 学生重新提交作业 | P1 | 重新提交成功，更新分数 |
| **作业导出** | 导出作业统计 | P2 | 导出Excel成功 |

**详细规格说明**:

**1. 创建作业**:

*输入字段*:
- 作业标题（必填）：
  - 长度：2-100字符
  - 示例："第1周作业：Python基础"
- 作业描述（可选）：
  - 长度：0-1000字符
  - 格式：Markdown
  - 示例："本周作业包含5道题目，涵盖变量、数据类型、运算符等知识点"
- 所属班级（必填）：
  - 类型：下拉选择
  - 选项：教师创建的所有班级
- 题目列表（必填）：
  - 类型：多选
  - 最少：1题
  - 最多：20题
  - 支持搜索和筛选
- 截止时间（必填）：
  - 类型：日期时间选择器
  - 限制：必须晚于当前时间
  - 示例："2025-11-14 23:59:59"
- 允许迟交（可选）：
  - 类型：复选框
  - 说明：勾选后，截止时间后仍可提交，但标记为迟交
- 迟交扣分（可选）：
  - 类型：数字输入
  - 范围：0-100
  - 单位：百分比
  - 示例：迟交扣20%分数

*业务规则*:
- 同一班级可以创建多个作业
- 作业标题在同一班级下不能重复
- 创建成功后，所有班级成员收到通知
- 作业创建后可以编辑，但不能修改题目列表（防止学生已提交）
- 作业发布后，学生可以立即查看和提交

*交互流程*:
```
1. 教师点击"创建作业"按钮
2. 教师填写作业信息
3. 教师选择题目（支持搜索、筛选、预览）
4. 教师设置截止时间
5. 教师点击"发布"按钮
6. 系统验证作业信息
7. 系统创建作业记录
8. 系统发送通知给所有班级成员
9. 系统跳转到作业详情页
```

**2. 学生提交作业**:

*作业列表（学生视图）*:
- 显示内容：
  - 作业标题
  - 所属班级
  - 截止时间
  - 题目数量
  - 我的进度（已完成/总题数）
  - 我的分数
  - 状态（未开始/进行中/已完成/已逾期）
- 排序：按截止时间升序
- 筛选：全部/未完成/已完成/已逾期

*作业详情（学生视图）*:
- 作业信息：标题、描述、截止时间、题目数量
- 题目列表：
  - 题目编号和标题
  - 我的状态（未开始/已通过/未通过）
  - 我的分数
  - 操作（开始答题/查看提交）
- 我的统计：
  - 已完成题数
  - 总分
  - 排名（班级内）

*提交流程*:
```
1. 学生点击"开始答题"
2. 系统跳转到题目详情页
3. 学生编写代码
4. 学生点击"提交"按钮
5. 系统执行代码（调用F3代码执行）
6. 系统运行测试用例
7. 系统计算分数（通过测试用例数/总测试用例数 × 100）
8. 系统保存提交记录
9. 系统更新作业进度
10. 系统显示提交结果
11. 学生可以继续答题或返回作业列表
```

*评分规则*:
- 基础分数：通过测试用例数 / 总测试用例数 × 100
- 迟交扣分：如果迟交，分数 × (1 - 迟交扣分比例)
- 最终分数：向下取整
- 示例：通过3/5个测试用例，迟交扣20%，最终分数 = 60 × 0.8 = 48分

*重新提交*:
- 学生可以多次提交同一题目
- 每次提交都会重新评分
- 最终分数取最高分
- 提交历史记录保留

**3. 作业统计（教师视图）**:

*作业概览*:
- 作业信息：标题、班级、截止时间、题目数量
- 统计数据：
  - 班级人数
  - 已提交人数
  - 提交率（已提交人数/班级人数 × 100%）
  - 平均分
  - 最高分
  - 最低分
  - 及格率（≥60分的人数/已提交人数 × 100%）

*分数分布*:
- 柱状图：横轴为分数段（0-59, 60-69, 70-79, 80-89, 90-100），纵轴为人数
- 饼图：及格/不及格比例

*题目统计*:
- 题目列表：
  - 题目编号和标题
  - 提交人数
  - 通过人数
  - 通过率
  - 平均分
- 排序：按通过率升序（找出难题）

*学生提交列表*:
- 显示内容：
  - 学生姓名
  - 提交时间
  - 完成题数
  - 总分
  - 状态（已完成/进行中/未开始）
  - 是否迟交
  - 操作（查看详情）
- 排序：按总分降序
- 筛选：全部/已完成/进行中/未开始/迟交
- 导出：导出Excel（包含所有学生的提交记录）

*学生详情*:
- 学生信息：姓名、邮箱
- 作业进度：已完成题数/总题数
- 总分
- 题目提交列表：
  - 题目编号和标题
  - 提交时间
  - 状态（通过/未通过）
  - 分数
  - 执行时间
  - 操作（查看代码）

**4. 学生统计（教师视图）**:

*统计指标*:
- 基本信息：姓名、邮箱、加入时间
- 学习数据：
  - 完成作业数
  - 平均分
  - 完成题数
  - 正确率（通过题数/完成题数 × 100%）
  - 学习时长（总代码编辑时长）
- 知识点掌握度：
  - 基础语法：X%
  - 控制流程：X%
  - 函数：X%
  - 数据结构：X%
  - 面向对象：X%
  - 文件操作：X%
  - 异常处理：X%
  - 高级特性：X%
- 薄弱点识别：
  - 列出掌握度<60%的知识点
  - 推荐相关题目

*图表展示*:
- 学习时长趋势图（折线图）
- 作业分数趋势图（折线图）
- 知识点掌握度雷达图

**数据模型**:

```python
class Assignment:
    id: int  # 主键
    class_id: int  # 班级ID（外键，索引）
    title: str  # 标题（2-100字符）
    description: str  # 描述（Markdown，0-1000字符）
    problem_ids: JSON  # 题目ID列表（JSON数组）
    deadline: datetime  # 截止时间
    allow_late: bool  # 允许迟交（默认：False）
    late_penalty: int  # 迟交扣分（0-100，默认：0）
    created_by: int  # 创建者ID（外键）
    is_published: bool  # 是否发布（默认：True）
    created_at: datetime  # 创建时间
    updated_at: datetime  # 更新时间

class AssignmentSubmission:
    id: int  # 主键
    assignment_id: int  # 作业ID（外键，索引）
    user_id: int  # 用户ID（外键，索引）
    problem_id: int  # 题目ID（外键，索引）
    submission_id: int  # 代码提交ID（外键，关联Submission表）
    code: str  # 代码（最大10000字符）
    status: str  # 状态（accepted/wrong_answer/error/timeout）
    score: int  # 分数（0-100）
    is_late: bool  # 是否迟交（默认：False）
    submitted_at: datetime  # 提交时间

    # 唯一约束：(assignment_id, user_id, problem_id) - 每个学生每题只保留最高分

class AssignmentProgress:
    id: int  # 主键
    assignment_id: int  # 作业ID（外键，索引）
    user_id: int  # 用户ID（外键，索引）
    completed_count: int  # 完成题数（默认：0）
    total_score: int  # 总分（默认：0）
    status: str  # 状态（not_started/in_progress/completed）
    updated_at: datetime  # 更新时间

    # 唯一约束：(assignment_id, user_id)
```

**API接口**:

| 接口 | 方法 | 路径 | 请求参数 | 响应数据 | 状态码 |
|------|------|------|---------|---------|--------|
| 创建作业 | POST | /api/assignments | class_id, title, description, problem_ids, deadline, allow_late, late_penalty | assignment | 201 |
| 获取作业列表 | GET | /api/assignments | class_id, status, page, per_page | assignments, total | 200 |
| 获取作业详情 | GET | /api/assignments/{id} | - | assignment | 200 |
| 更新作业 | PUT | /api/assignments/{id} | title, description, deadline, allow_late, late_penalty | assignment | 200 |
| 删除作业 | DELETE | /api/assignments/{id} | - | message | 200 |
| 提交作业 | POST | /api/assignments/{id}/submit | problem_id, code | submission | 201 |
| 获取我的作业进度 | GET | /api/assignments/{id}/progress | - | progress | 200 |
| 获取作业统计 | GET | /api/assignments/{id}/stats | - | stats | 200 |
| 获取学生提交列表 | GET | /api/assignments/{id}/submissions | status, page, per_page | submissions, total | 200 |
| 获取学生详情 | GET | /api/classes/{class_id}/students/{user_id}/stats | - | stats | 200 |
| 导出作业统计 | GET | /api/assignments/{id}/export | format | file | 200 |

**验收标准**:
- ✅ 教师可以创建作业，选择题目，设置截止时间
- ✅ 学生可以提交作业，自动批改
- ✅ 教师可以查看作业统计（提交率、平均分、分数分布）
- ✅ 教师可以查看学生统计（完成题数、正确率、学习时长）
- ✅ 支持多题作业（1-20题）
- ✅ 支持重新提交，取最高分
- ✅ 支持迟交扣分
- ✅ 作业创建成功率 >99%
- ✅ 作业提交成功率 >99%
- ✅ 自动批改准确率 100%
- ✅ 作业列表加载时间 <300ms
- ✅ 作业统计加载时间 <500ms
- ✅ 支持并发提交 >50
- ✅ 导出Excel成功率 >99%

### 5.2 V1.0新增功能（5个）

#### F7. 游戏化激励系统

**功能描述**: 通过积分、等级、成就、排行榜激励学生学习

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **积分系统** | 完成题目获得积分 | P1 | 积分计算正确，实时更新 |
| **等级系统** | 根据积分升级 | P1 | 等级计算正确，显示等级徽章 |
| **成就系统** | 完成特定任务获得成就 | P1 | 成就解锁正确，显示成就列表 |
| **排行榜** | 显示班级/全站排行榜 | P2 | 排行榜实时更新 |
| **每日签到** | 每日签到获得积分 | P2 | 签到成功，获得积分 |

**积分规则**:
- 完成简单题目：+10积分
- 完成中等题目：+20积分
- 完成困难题目：+30积分
- 每日签到：+5积分
- 连续签到7天：+50积分

**等级规则**:
- Lv1: 0-100积分（新手）
- Lv2: 100-300积分（初学者）
- Lv3: 300-600积分（进阶者）
- Lv4: 600-1000积分（熟练者）
- Lv5: 1000+积分（专家）

**成就示例**:
- 🏆 初出茅庐：完成第1题
- 🏆 百题斩：完成100题
- 🏆 全勤王：连续签到30天
- 🏆 速度之王：10分钟内完成10题
- 🏆 完美主义者：连续10题一次通过

#### F8. 讨论区

**功能描述**: 学生可以提问、回答、点赞、评论

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **发布问题** | 发布新问题 | P1 | 问题发布成功 |
| **回答问题** | 回答问题 | P1 | 回答发布成功 |
| **点赞** | 点赞问题/回答 | P2 | 点赞成功，计数更新 |
| **评论** | 评论问题/回答 | P2 | 评论发布成功 |
| **搜索** | 搜索问题 | P2 | 搜索结果正确 |

#### F9. 学习路径

**功能描述**: 提供8阶段学习路径，引导学生系统学习

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **学习路径** | 显示8阶段学习路径 | P1 | 显示路径图，标记进度 |
| **推荐题目** | 根据学习阶段推荐题目 | P1 | 推荐题目合理 |
| **进度追踪** | 追踪学习进度 | P1 | 进度计算正确 |

**8阶段学习路径**:
1. Python基础（变量、数据类型、运算符）
2. 控制流程（if、for、while）
3. 函数和模块（函数定义、参数、返回值、模块导入）
4. 数据结构（列表、元组、字典、集合）
5. 面向对象（类、对象、继承、多态）
6. 文件操作（读写文件、CSV、JSON）
7. 异常处理（try-except、自定义异常）
8. 高级特性（装饰器、生成器、迭代器）

#### F10. 代码质量分析

**功能描述**: 分析代码质量，提供改进建议

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **代码规范检查** | 检查PEP 8规范 | P2 | 显示规范问题 |
| **代码复杂度分析** | 分析代码复杂度 | P2 | 显示复杂度评分 |
| **改进建议** | 提供改进建议 | P2 | 建议合理 |

#### F11. 学习数据分析

**功能描述**: 分析学习数据，生成学习报告

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **学习时长统计** | 统计学习时长 | P1 | 统计准确 |
| **知识点掌握度** | 分析知识点掌握度 | P1 | 分析准确 |
| **薄弱点识别** | 识别薄弱知识点 | P1 | 识别准确 |
| **学习报告** | 生成学习报告 | P1 | 报告完整 |

### 5.3 V2.0新增功能（5个）

#### F12. AI智能辅导

**功能描述**: 使用AI提供智能提示、代码解释、错误诊断

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **智能提示** | AI生成智能提示 | P2 | 提示准确、有帮助 |
| **代码解释** | AI解释代码逻辑 | P2 | 解释清晰易懂 |
| **错误诊断** | AI诊断错误原因 | P2 | 诊断准确 |
| **代码优化建议** | AI提供优化建议 | P2 | 建议合理 |

**技术实现**:
- 集成OpenAI API或本地LLM
- Prompt工程优化
- 上下文管理

#### F13. 竞赛模式

**功能描述**: 提供竞赛模式，支持限时挑战、排名

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **创建竞赛** | 创建竞赛 | P2 | 竞赛创建成功 |
| **参加竞赛** | 参加竞赛 | P2 | 参赛成功 |
| **实时排名** | 显示实时排名 | P2 | 排名实时更新 |
| **竞赛报告** | 生成竞赛报告 | P2 | 报告完整 |

#### F14. 高级数据分析

**功能描述**: 提供高级数据分析，支持自定义报表、数据导出

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **自定义报表** | 自定义数据报表 | P2 | 报表生成成功 |
| **数据导出** | 导出Excel/CSV | P2 | 导出成功 |
| **数据可视化** | 高级图表 | P2 | 图表显示正确 |
| **趋势分析** | 分析学习趋势 | P2 | 分析准确 |

#### F15. 多语言支持

**功能描述**: 支持多种编程语言（Python、Java、C++）

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **Python支持** | Python 3.8+ | P0 | 已支持 |
| **Java支持** | Java 11+ | P2 | 代码执行成功 |
| **C++支持** | C++ 17+ | P2 | 代码执行成功 |

#### F16. 插件系统

**功能描述**: 支持第三方插件，扩展功能

**功能详情**:

| 子功能 | 描述 | 优先级 | 验收标准 |
|--------|------|--------|---------|
| **插件市场** | 插件市场 | P2 | 显示插件列表 |
| **安装插件** | 安装插件 | P2 | 安装成功 |
| **开发者平台** | 插件开发文档 | P2 | 文档完整 |

### 5.4 功能优先级矩阵

**MVP功能（P0）**:

| 功能 | 用户价值 | 技术难度 | 开发工时 | 优先级 |
|------|---------|---------|---------|--------|
| F1. 用户注册/登录 | 高 | 低 | 3人天 | P0 |
| F2. 在线代码编辑器 | 高 | 中 | 5人天 | P0 |
| F3. 实时代码执行 | 高 | 高 | 10人天 | P0 |
| F4. 题库管理 | 高 | 低 | 6人天 | P0 |
| F5. 班级管理 | 高 | 中 | 8人天 | P0 |
| F6. 作业系统 | 高 | 高 | 15人天 | P0 |

**V1.0功能（P1）**:

| 功能 | 用户价值 | 技术难度 | 开发工时 | 优先级 |
|------|---------|---------|---------|--------|
| F7. 游戏化激励 | 中 | 中 | 10人天 | P1 |
| F8. 讨论区 | 中 | 中 | 8人天 | P1 |
| F9. 学习路径 | 高 | 低 | 5人天 | P1 |
| F10. 代码质量分析 | 中 | 中 | 6人天 | P1 |
| F11. 学习数据分析 | 高 | 中 | 8人天 | P1 |

**V2.0功能（P2）**:

| 功能 | 用户价值 | 技术难度 | 开发工时 | 优先级 |
|------|---------|---------|---------|--------|
| F12. AI智能辅导 | 高 | 高 | 15人天 | P2 |
| F13. 竞赛模式 | 中 | 中 | 10人天 | P2 |
| F14. 高级数据分析 | 中 | 中 | 8人天 | P2 |
| F15. 多语言支持 | 中 | 高 | 12人天 | P2 |
| F16. 插件系统 | 低 | 高 | 15人天 | P2 |

### 5.5 功能依赖关系

**依赖关系图**:

```
基础层（无依赖）:
├── 前后端框架搭建
├── 数据库设计
├── Docker环境配置
└── F1. 用户注册/登录

核心层（依赖基础层）:
├── F2. 在线代码编辑器 → 前端框架
├── F3. 实时代码执行 → Docker环境
└── F4. 题库管理 → 数据库设计

功能层（依赖核心层）:
├── F5. 班级管理 → F1
└── F6. 作业系统 → F3 + F4 + F5

增强层（依赖功能层）:
├── F7. 游戏化激励 → F6
├── F8. 讨论区 → F1 + F4
├── F9. 学习路径 → F4
├── F10. 代码质量分析 → F3
└── F11. 学习数据分析 → F6

高级层（依赖增强层）:
├── F12. AI智能辅导 → F3 + F4
├── F13. 竞赛模式 → F6
├── F14. 高级数据分析 → F11
├── F15. 多语言支持 → F3
└── F16. 插件系统 → 所有功能

关键路径:
前后端框架 → F1 → F5 → F6 → F11 → F14
Docker环境 → F3 ↗
数据库设计 → F4 ↗
```

**开发顺序建议**:

**MVP阶段（Week 1-12）**:
1. Week 1-2: 前后端框架、数据库设计、Docker环境、F1
2. Week 3-4: F2、F3、F4（可并行）
3. Week 5-6: F5
4. Week 7-10: F6
5. Week 11-12: 集成测试、优化、文档

**V1.0阶段（Week 13-24）**:
6. Week 13-14: F9（学习路径）
7. Week 15-16: F7（游戏化激励）
8. Week 17-18: F11（学习数据分析）
9. Week 19-20: F8（讨论区）
10. Week 21-22: F10（代码质量分析）
11. Week 23-24: 集成测试、优化、文档

**V2.0阶段（Week 25-48）**:
12. Week 25-28: F12（AI智能辅导）
13. Week 29-32: F15（多语言支持）
14. Week 33-36: F14（高级数据分析）
15. Week 37-40: F13（竞赛模式）
16. Week 41-44: F16（插件系统）
17. Week 45-48: 集成测试、优化、文档

---

## 6. 非功能需求

### 6.1 性能需求

**响应时间要求**:

| 操作 | MVP目标 | V1.0目标 | V2.0目标 | 测量方式 | 测试场景 |
|------|---------|----------|----------|---------|---------|
| **页面加载时间** | <3秒 | <2秒 | <1秒 | Chrome DevTools | 首次加载，3G网络 |
| **API响应时间** | <300ms | <200ms | <100ms | 后端日志 | P95响应时间 |
| **代码执行时间** | <5秒 | <5秒 | <3秒 | Docker执行日志 | 简单代码（<50行） |
| **数据库查询时间** | <100ms | <50ms | <30ms | SQLAlchemy日志 | 单表查询，1000条数据 |
| **文件上传时间** | <2秒/MB | <1秒/MB | <500ms/MB | 前端计时 | 题目导入（YAML文件） |

**详细性能指标**:

*前端性能*:
- **首屏加载时间**（FCP - First Contentful Paint）：
  - MVP: <2秒
  - V1.0: <1.5秒
  - V2.0: <1秒
- **可交互时间**（TTI - Time to Interactive）：
  - MVP: <4秒
  - V1.0: <3秒
  - V2.0: <2秒
- **首次输入延迟**（FID - First Input Delay）：
  - MVP: <100ms
  - V1.0: <50ms
  - V2.0: <30ms
- **累积布局偏移**（CLS - Cumulative Layout Shift）：
  - MVP: <0.1
  - V1.0: <0.05
  - V2.0: <0.01

*后端性能*:
- **API响应时间分布**：
  - P50（中位数）: <100ms
  - P95（95%请求）: <300ms
  - P99（99%请求）: <500ms
- **数据库查询性能**：
  - 简单查询（单表）: <50ms
  - 复杂查询（多表JOIN）: <200ms
  - 聚合查询（COUNT、SUM）: <300ms
- **缓存命中率**：
  - Redis缓存命中率: >80%
  - 浏览器缓存命中率: >90%

*代码执行性能*:
- **容器启动时间**: <1秒
- **代码执行时间**：
  - 简单代码（<50行，无循环）: <1秒
  - 中等代码（50-200行，简单循环）: <3秒
  - 复杂代码（>200行，嵌套循环）: <5秒
- **测试用例执行时间**：
  - 单个测试用例: <1秒
  - 5个测试用例: <3秒
  - 10个测试用例: <5秒

**并发性能要求**:

| 指标 | MVP目标 | V1.0目标 | V2.0目标 | 测量方式 | 测试工具 |
|------|---------|----------|----------|---------|---------|
| **并发用户数** | 50 | 100 | 500 | 压力测试 | Locust |
| **并发代码执行** | 20 | 30 | 50 | Docker监控 | docker stats |
| **数据库连接数** | 50 | 100 | 200 | 数据库监控 | SQLAlchemy pool |
| **QPS（每秒请求数）** | 100 | 200 | 500 | 压力测试 | Locust |

**详细并发指标**:

*并发用户场景*:
- **场景1：浏览题目**（50%用户）：
  - 操作：浏览题目列表、查看题目详情
  - 频率：每分钟5次请求
  - 响应时间：<300ms
- **场景2：编写代码**（30%用户）：
  - 操作：编辑代码、保存代码
  - 频率：每分钟10次请求
  - 响应时间：<200ms
- **场景3：执行代码**（20%用户）：
  - 操作：提交代码、查看结果
  - 频率：每分钟2次请求
  - 响应时间：<5秒

*并发代码执行*:
- **队列管理**：
  - 使用Celery异步任务队列
  - 队列长度：最大100
  - 超时处理：队列满时返回"系统繁忙，请稍后重试"
- **资源限制**：
  - 单用户并发执行：最多3个
  - 全局并发执行：MVP 20个，V1.0 30个，V2.0 50个
  - 超出限制：加入队列等待

**系统可用性要求**:

| 指标 | MVP目标 | V1.0目标 | V2.0目标 | 测量方式 | 计算公式 |
|------|---------|----------|----------|---------|---------|
| **系统可用性** | >95% | >99% | >99.9% | 监控系统 | (总时间-故障时间)/总时间 |
| **平均故障恢复时间（MTTR）** | <4小时 | <2小时 | <1小时 | 运维日志 | 故障恢复总时间/故障次数 |
| **平均故障间隔时间（MTBF）** | >168小时 | >336小时 | >720小时 | 运维日志 | 总运行时间/故障次数 |

**详细可用性指标**:

*可用性计算*:
- **MVP（95%）**：
  - 每月允许故障时间：36小时
  - 每周允许故障时间：8.4小时
  - 每天允许故障时间：1.2小时
- **V1.0（99%）**：
  - 每月允许故障时间：7.2小时
  - 每周允许故障时间：1.68小时
  - 每天允许故障时间：14.4分钟
- **V2.0（99.9%）**：
  - 每月允许故障时间：43.2分钟
  - 每周允许故障时间：10.1分钟
  - 每天允许故障时间：1.44分钟

*监控指标*:
- **健康检查**：
  - 检查频率：每30秒
  - 检查内容：API可用性、数据库连接、Redis连接、Docker服务
  - 告警阈值：连续3次失败
- **自动恢复**：
  - 服务自动重启：失败后自动重启（最多3次）
  - 容器自动清理：执行完成后自动删除
  - 数据库连接池：自动重连

**资源使用要求**:

| 资源 | MVP目标 | V1.0目标 | V2.0目标 | 说明 | 监控工具 |
|------|---------|----------|----------|------|---------|
| **CPU使用率** | <70% | <60% | <50% | 平均使用率 | Prometheus |
| **内存使用率** | <80% | <70% | <60% | 平均使用率 | Prometheus |
| **磁盘使用率** | <70% | <60% | <50% | 平均使用率 | Prometheus |
| **网络带宽** | <100Mbps | <200Mbps | <500Mbps | 峰值带宽 | Prometheus |

**详细资源指标**:

*服务器配置（MVP）*:
- **CPU**: 4核
- **内存**: 8GB
- **磁盘**: 100GB SSD
- **网络**: 100Mbps

*资源分配*:
- **Web服务**（Flask）：
  - CPU: 1核
  - 内存: 2GB
- **数据库**（SQLite/MySQL）：
  - CPU: 1核
  - 内存: 2GB
- **缓存**（Redis）：
  - CPU: 0.5核
  - 内存: 1GB
- **任务队列**（Celery）：
  - CPU: 0.5核
  - 内存: 1GB
- **代码执行**（Docker容器）：
  - CPU: 1核（共享，最多20个容器）
  - 内存: 256MB/容器（最多20个容器 = 5GB）

*资源告警*:
- **CPU使用率 >80%**：发送告警，考虑扩容
- **内存使用率 >90%**：发送告警，考虑扩容
- **磁盘使用率 >80%**：发送告警，清理日志和临时文件
- **网络带宽 >80%**：发送告警，考虑升级带宽

**性能优化策略**:

*前端优化*:
- **代码分割**：按路由分割代码，减少首屏加载时间
- **懒加载**：图片、组件按需加载
- **CDN加速**：静态资源使用CDN
- **Gzip压缩**：压缩HTML、CSS、JS文件
- **浏览器缓存**：设置合理的缓存策略

*后端优化*:
- **数据库索引**：为常用查询字段添加索引
- **查询优化**：避免N+1查询，使用JOIN优化
- **Redis缓存**：缓存热点数据（题目列表、用户信息）
- **连接池**：使用数据库连接池，减少连接开销
- **异步处理**：代码执行、邮件发送使用异步任务

*代码执行优化*:
- **容器复用**：预创建容器池，减少启动时间
- **并发控制**：限制并发执行数，防止资源耗尽
- **超时控制**：设置合理的超时时间，防止资源占用
- **资源回收**：执行完成后立即删除容器，释放资源


### 6.2 安全需求

**代码执行安全**:

| 安全措施 | 配置 | 说明 | 实现方式 |
|---------|------|------|---------|
| **Docker容器隔离** | 每次执行独立容器 | 防止代码互相干扰 | docker run --rm |
| **CPU限制** | 1核 | 防止CPU占用过高 | --cpu-quota=100000 |
| **内存限制** | 256MB | 防止内存溢出 | --memory=256m |
| **磁盘限制** | 100MB | 防止磁盘占用过高 | --storage-opt size=100m |
| **网络隔离** | 禁止访问外网 | 防止恶意代码访问外部资源 | --network=none |
| **执行超时** | 5秒 | 防止无限循环 | timeout 5s |
| **危险操作拦截** | 禁止import os, subprocess等 | 防止系统调用 | 代码静态分析 |
| **文件系统隔离** | 只读文件系统 | 防止文件篡改 | --read-only |
| **非root用户** | sandbox用户（UID 1000） | 防止提权 | --user=sandbox |
| **禁用capabilities** | 移除所有capabilities | 防止系统调用 | --cap-drop=ALL |
| **进程数限制** | 最多50个进程 | 防止fork炸弹 | --pids-limit=50 |
| **文件描述符限制** | 最多64个 | 防止资源耗尽 | --ulimit nofile=64 |

**详细代码执行安全措施**:

*危险操作检测*:
```python
# 禁止的模块
DANGEROUS_MODULES = [
    'os', 'sys', 'subprocess', 'socket', 'urllib', 'urllib2', 'urllib3',
    'requests', 'http', 'httplib', 'ftplib', 'smtplib', 'telnetlib',
    'pickle', 'shelve', 'marshal', 'ctypes', 'cffi',
    'multiprocessing', 'threading', 'asyncio',
    '__import__', 'importlib', 'imp'
]

# 禁止的内置函数
DANGEROUS_BUILTINS = [
    'eval', 'exec', 'compile', '__import__',
    'open', 'file', 'input', 'raw_input',
    'execfile', 'reload', 'vars', 'dir', 'globals', 'locals'
]

# 禁止的关键字
DANGEROUS_KEYWORDS = [
    '__builtins__', '__globals__', '__locals__',
    '__code__', '__class__', '__bases__', '__subclasses__'
]
```

*检测流程*:
```
1. 接收用户代码
2. 使用AST（抽象语法树）解析代码
3. 检测import语句（禁止导入危险模块）
4. 检测函数调用（禁止调用危险函数）
5. 检测属性访问（禁止访问危险属性）
6. 检测失败：返回错误"代码包含危险操作，禁止执行"
7. 检测通过：继续执行
```

*容器安全配置*:
```python
container_security_config = {
    # 资源限制
    'mem_limit': '256m',
    'memswap_limit': '256m',
    'cpu_quota': 100000,
    'cpu_period': 100000,
    'pids_limit': 50,

    # 网络隔离
    'network_disabled': True,

    # 文件系统
    'read_only': True,
    'tmpfs': {'/tmp': 'size=10m,mode=1777'},

    # 用户权限
    'user': 'sandbox:sandbox',

    # 安全选项
    'security_opt': [
        'no-new-privileges',
        'seccomp=unconfined'  # 可选：使用自定义seccomp配置
    ],

    # Capabilities
    'cap_drop': ['ALL'],

    # 资源限制
    'ulimits': [
        {'name': 'nofile', 'soft': 64, 'hard': 64},
        {'name': 'nproc', 'soft': 50, 'hard': 50}
    ],

    # 自动删除
    'remove': True,
    'detach': False
}
```

**数据安全**:

| 安全措施 | 配置 | 说明 | 实现方式 |
|---------|------|------|---------|
| **密码加密** | BCrypt（cost=12） | 防止密码泄露 | bcrypt.hashpw() |
| **JWT Token认证** | 有效期24小时 | 防止会话劫持 | PyJWT |
| **SQL注入防护** | 使用ORM（SQLAlchemy） | 防止SQL注入 | 参数化查询 |
| **XSS攻击防护** | 输入过滤+输出转义 | 防止XSS攻击 | bleach.clean() |
| **CSRF防护** | Token验证 | 防止CSRF攻击 | Flask-WTF |
| **数据备份** | 每日自动备份 | 防止数据丢失 | cron + rsync |
| **数据加密** | AES-256加密（敏感数据） | 防止数据泄露 | cryptography |
| **HTTPS加密** | TLS 1.2+ | 防止中间人攻击 | Let's Encrypt |
| **敏感信息脱敏** | 日志中隐藏密码、Token | 防止信息泄露 | 正则替换 |

**详细数据安全措施**:

*密码安全*:
- **密码强度要求**：
  - 长度：8-32字符
  - 复杂度：至少包含大写字母、小写字母、数字、特殊字符中的3种
  - 禁止常见密码：123456、password、qwerty等
- **密码加密**：
  - 算法：BCrypt
  - Cost因子：12（2^12 = 4096次迭代）
  - 盐值：自动生成（随机）
- **密码重置**：
  - 重置Token：UUID v4（128位随机）
  - 有效期：1小时
  - 单次使用：使用后立即失效

*Token安全*:
- **JWT Token**：
  - 算法：HS256（HMAC-SHA256）
  - 密钥：256位随机密钥（环境变量）
  - 有效期：24小时（记住我：7天）
  - 刷新机制：Token过期前1小时可刷新
- **Token存储**：
  - 前端：localStorage（仅HTTPS）
  - 后端：Redis（黑名单）
- **Token撤销**：
  - 登出：将Token加入黑名单
  - 密码修改：撤销所有Token

*数据备份*:
- **备份策略**：
  - 全量备份：每天凌晨2点
  - 增量备份：每6小时
  - 保留策略：最近7天全量备份 + 最近30天增量备份
- **备份内容**：
  - 数据库：SQLite/MySQL数据文件
  - 用户上传文件：头像、题目附件
  - 配置文件：环境变量、配置文件
- **备份验证**：
  - 每周验证备份可恢复性
  - 记录验证结果

**访问控制**:

| 安全措施 | 配置 | 说明 | 实现方式 |
|---------|------|------|---------|
| **基于角色的权限控制（RBAC）** | 学生/教师/管理员 | 防止越权访问 | Flask-Principal |
| **API访问限流** | 100次/分钟 | 防止API滥用 | Flask-Limiter |
| **登录失败锁定** | 5次失败锁定30分钟 | 防止暴力破解 | Redis计数器 |
| **IP黑白名单** | 可选 | 防止恶意访问 | Nginx配置 |
| **会话管理** | 单点登录、自动登出 | 防止会话泄露 | Redis存储 |
| **CORS配置** | 仅允许特定域名 | 防止跨域攻击 | Flask-CORS |
| **Content Security Policy** | 限制资源加载 | 防止XSS攻击 | HTTP头 |

**详细访问控制措施**:

*RBAC权限矩阵*:

| 资源 | 学生 | 教师 | 管理员 |
|------|------|------|--------|
| **题目列表** | 查看 | 查看、创建、编辑、删除 | 全部权限 |
| **题目详情** | 查看（不含答案） | 查看（含答案） | 全部权限 |
| **代码提交** | 提交自己的代码 | 查看所有提交 | 全部权限 |
| **班级管理** | 加入班级 | 创建、编辑、删除班级 | 全部权限 |
| **作业管理** | 提交作业 | 创建、编辑、删除作业 | 全部权限 |
| **用户管理** | 查看自己的信息 | 查看班级学生信息 | 全部权限 |
| **系统设置** | 无权限 | 无权限 | 全部权限 |

*API限流策略*:
- **全局限流**：
  - 匿名用户：10次/分钟
  - 登录用户：100次/分钟
  - 管理员：1000次/分钟
- **接口限流**：
  - 登录接口：5次/分钟
  - 注册接口：3次/小时
  - 代码执行：10次/分钟
  - 文件上传：5次/小时
- **限流响应**：
  - HTTP状态码：429 Too Many Requests
  - 响应头：X-RateLimit-Limit、X-RateLimit-Remaining、X-RateLimit-Reset
  - 响应体：{"error": "请求过于频繁，请稍后重试"}

*登录安全*:
- **登录失败锁定**：
  - 失败次数：5次
  - 锁定时间：30分钟
  - 锁定提示："账号已被锁定，请30分钟后再试"
- **登录验证码**：
  - 触发条件：登录失败3次
  - 验证码类型：图形验证码（4位数字+字母）
  - 有效期：5分钟
- **异常登录检测**：
  - 检测异常IP（不同地区）
  - 检测异常设备（不同浏览器）
  - 发送邮件通知用户

**安全审计**:

| 审计内容 | 记录内容 | 保留时间 | 存储位置 | 用途 |
|---------|---------|---------|---------|------|
| **登录日志** | 用户、IP、时间、结果、User-Agent | 90天 | MySQL | 安全审计、异常检测 |
| **操作日志** | 用户、操作、时间、结果、参数 | 90天 | MySQL | 操作追溯、问题排查 |
| **异常日志** | 异常类型、堆栈、时间、请求信息 | 30天 | 文件 | 问题排查、性能优化 |
| **安全事件** | 事件类型、详情、时间、IP | 365天 | MySQL | 安全分析、合规审计 |
| **代码执行日志** | 用户、代码、结果、时间 | 30天 | MySQL | 问题排查、滥用检测 |

**详细安全审计措施**:

*日志格式*:
```json
{
  "timestamp": "2025-11-07T10:00:00Z",
  "level": "INFO",
  "type": "login",
  "user_id": 123,
  "username": "student@example.com",
  "ip": "192.168.1.100",
  "user_agent": "Mozilla/5.0...",
  "result": "success",
  "message": "用户登录成功"
}
```

*安全事件类型*:
- **登录失败**：记录失败原因（密码错误、账号不存在、账号锁定）
- **越权访问**：记录访问的资源和权限
- **危险代码**：记录危险操作类型和代码片段
- **API滥用**：记录超出限流的请求
- **异常登录**：记录异常IP、异常设备
- **数据泄露**：记录敏感数据访问（如批量导出）

*日志分析*:
- **实时监控**：使用ELK（Elasticsearch + Logstash + Kibana）分析日志
- **异常告警**：
  - 登录失败率 >10%：发送告警
  - 代码执行失败率 >20%：发送告警
  - API错误率 >5%：发送告警
- **定期审计**：
  - 每周生成安全审计报告
  - 每月生成合规审计报告

### 6.3 可用性需求

**界面设计**:
- ✅ 界面简洁直观，符合用户习惯
- ✅ 操作流程清晰，无需培训即可使用
- ✅ 错误提示友好，用户能理解
- ✅ 响应式设计，支持PC和平板（屏幕宽度 ≥768px）
- ✅ 键盘快捷键支持（Ctrl+S保存、Ctrl+/注释、Ctrl+Enter运行等）

**详细界面设计规范**:

*布局规范*:
- **导航栏**：
  - 高度：60px
  - 背景色：#1890ff（主题色）
  - Logo：左侧，40px × 40px
  - 菜单：中间，水平排列
  - 用户信息：右侧，头像 + 用户名
- **侧边栏**（可选）：
  - 宽度：200px（展开）、60px（收起）
  - 背景色：#001529（深色）
  - 菜单项：图标 + 文字
- **内容区**：
  - 最大宽度：1200px
  - 内边距：24px
  - 背景色：#f0f2f5（浅灰）
- **卡片**：
  - 圆角：4px
  - 阴影：0 2px 8px rgba(0,0,0,0.1)
  - 内边距：16px

*颜色规范*:
- **主题色**：#1890ff（蓝色）
- **成功色**：#52c41a（绿色）
- **警告色**：#faad14（橙色）
- **错误色**：#f5222d（红色）
- **文本色**：
  - 主要文本：rgba(0,0,0,0.85)
  - 次要文本：rgba(0,0,0,0.65)
  - 禁用文本：rgba(0,0,0,0.25)
- **背景色**：
  - 页面背景：#f0f2f5
  - 卡片背景：#ffffff
  - 悬停背景：#e6f7ff

*字体规范*:
- **字体家族**：-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif
- **字体大小**：
  - 标题1：24px
  - 标题2：20px
  - 标题3：16px
  - 正文：14px
  - 小字：12px
- **行高**：1.5
- **字重**：
  - 正常：400
  - 加粗：600

*交互规范*:
- **按钮**：
  - 主按钮：蓝色背景，白色文字
  - 次按钮：白色背景，蓝色边框
  - 危险按钮：红色背景，白色文字
  - 禁用按钮：灰色背景，灰色文字
  - 悬停效果：颜色加深10%
  - 点击效果：缩放0.95
- **输入框**：
  - 边框：1px solid #d9d9d9
  - 聚焦边框：1px solid #1890ff
  - 错误边框：1px solid #f5222d
  - 高度：32px
  - 圆角：2px
- **下拉菜单**：
  - 最大高度：256px
  - 滚动条：自动显示
  - 选中项：蓝色背景
- **模态框**：
  - 遮罩：rgba(0,0,0,0.45)
  - 宽度：520px（小）、720px（中）、1000px（大）
  - 圆角：4px
  - 关闭按钮：右上角

*错误提示规范*:
- **表单验证错误**：
  - 位置：输入框下方
  - 颜色：红色
  - 图标：感叹号
  - 示例："邮箱格式不正确"
- **操作失败提示**：
  - 类型：Toast（顶部居中）
  - 持续时间：3秒
  - 颜色：红色
  - 示例："保存失败，请稍后重试"
- **系统错误提示**：
  - 类型：模态框
  - 标题："系统错误"
  - 内容：错误信息 + 错误代码
  - 操作：刷新页面、联系客服

**可访问性**:
- ✅ 支持键盘导航
- ✅ 支持屏幕阅读器（ARIA标签）
- ✅ 颜色对比度符合WCAG 2.1 AA标准
- ✅ 字体大小可调整（12px-18px）

**详细可访问性规范**:

*键盘导航*:
- **Tab键**：在可交互元素间切换
- **Enter键**：激活按钮、链接
- **Esc键**：关闭模态框、下拉菜单
- **方向键**：在列表、菜单中导航
- **快捷键**：
  - Ctrl+S：保存
  - Ctrl+/：注释/取消注释
  - Ctrl+Enter：运行代码
  - Ctrl+F：搜索
  - Ctrl+Z：撤销
  - Ctrl+Y：重做

*ARIA标签*:
```html
<!-- 按钮 -->
<button aria-label="运行代码" aria-describedby="run-code-desc">
  <i class="icon-play"></i>
</button>
<span id="run-code-desc" class="sr-only">点击运行当前代码</span>

<!-- 输入框 -->
<input
  type="text"
  aria-label="邮箱"
  aria-required="true"
  aria-invalid="false"
  aria-describedby="email-error"
/>
<span id="email-error" role="alert" aria-live="polite"></span>

<!-- 模态框 -->
<div role="dialog" aria-labelledby="modal-title" aria-modal="true">
  <h2 id="modal-title">创建班级</h2>
  ...
</div>
```

*颜色对比度*:
- **正常文本**（14px）：对比度 ≥4.5:1
- **大文本**（18px+）：对比度 ≥3:1
- **图标**：对比度 ≥3:1
- **检测工具**：Chrome DevTools Lighthouse

*字体大小调整*:
- **默认大小**：14px
- **可调范围**：12px-18px
- **调整方式**：用户设置页面
- **保存方式**：localStorage

**国际化**:
- ✅ 支持中文（简体）
- ⏳ 支持英文（V2.0）
- ⏳ 支持多语言切换（V2.0）

**详细国际化规范**:

*语言支持*:
- **MVP**：中文（简体）
- **V1.0**：中文（简体）、英文
- **V2.0**：中文（简体/繁体）、英文、日文、韩文

*实现方式*:
- **前端**：Vue I18n
- **后端**：Flask-Babel
- **翻译文件**：JSON格式
- **示例**：
```json
{
  "zh-CN": {
    "common": {
      "save": "保存",
      "cancel": "取消",
      "delete": "删除"
    },
    "login": {
      "title": "登录",
      "email": "邮箱",
      "password": "密码",
      "submit": "登录"
    }
  },
  "en-US": {
    "common": {
      "save": "Save",
      "cancel": "Cancel",
      "delete": "Delete"
    },
    "login": {
      "title": "Login",
      "email": "Email",
      "password": "Password",
      "submit": "Login"
    }
  }
}
```

*语言切换*:
- **切换位置**：导航栏右上角
- **切换方式**：下拉菜单
- **保存方式**：localStorage + 用户设置
- **默认语言**：浏览器语言（navigator.language）

**用户体验**:
- ✅ 页面加载时显示加载动画
- ✅ 操作成功/失败显示Toast提示
- ✅ 表单验证实时反馈
- ✅ 长时间操作显示进度条

**详细用户体验规范**:

*加载状态*:
- **页面加载**：
  - 类型：全屏加载动画（Spin）
  - 位置：页面中心
  - 文字："加载中..."
- **局部加载**：
  - 类型：骨架屏（Skeleton）
  - 位置：内容区域
  - 动画：闪烁效果
- **按钮加载**：
  - 类型：按钮内Spin
  - 禁用按钮：防止重复点击
  - 文字："提交中..."

*Toast提示*:
- **成功提示**：
  - 图标：✓（绿色）
  - 示例："保存成功"
  - 持续时间：2秒
- **失败提示**：
  - 图标：✗（红色）
  - 示例："保存失败，请稍后重试"
  - 持续时间：3秒
- **警告提示**：
  - 图标：⚠（橙色）
  - 示例："该操作不可撤销，请谨慎操作"
  - 持续时间：3秒
- **信息提示**：
  - 图标：ℹ（蓝色）
  - 示例："代码已保存到草稿箱"
  - 持续时间：2秒

*表单验证*:
- **实时验证**：
  - 触发时机：失去焦点（blur）
  - 验证规则：必填、格式、长度
  - 错误提示：输入框下方，红色文字
- **提交验证**：
  - 触发时机：点击提交按钮
  - 验证所有字段
  - 滚动到第一个错误字段
  - 聚焦到错误字段

*进度条*:
- **代码执行进度**：
  - 类型：环形进度条
  - 位置：运行按钮旁边
  - 文字："执行中... 3/5"
- **文件上传进度**：
  - 类型：线性进度条
  - 位置：上传区域
  - 百分比：0-100%
- **作业完成进度**：
  - 类型：进度条
  - 位置：作业卡片
  - 文字："已完成 3/5 题"

*空状态*:
- **无数据**：
  - 图标：空文件夹
  - 文字："暂无数据"
  - 操作：创建按钮
- **搜索无结果**：
  - 图标：搜索
  - 文字："未找到相关内容"
  - 建议："尝试其他关键词"
- **网络错误**：
  - 图标：断网
  - 文字："网络连接失败"
  - 操作：重试按钮

### 6.4 可维护性需求

**代码规范**:
- ✅ Python代码遵循PEP 8规范
- ✅ JavaScript代码遵循ESLint规范
- ✅ 代码注释覆盖率 ≥30%
- ✅ 关键逻辑必须注释

**详细代码规范**:

*Python代码规范（PEP 8）*:
- **缩进**：4个空格
- **行长度**：最大79字符（文档字符串/注释最大72字符）
- **空行**：
  - 顶层函数和类定义之间：2个空行
  - 类内方法定义之间：1个空行
- **导入**：
  - 顺序：标准库 → 第三方库 → 本地库
  - 每个导入独立一行
  - 使用绝对导入
- **命名**：
  - 类名：PascalCase（如UserService）
  - 函数名：snake_case（如get_user_by_id）
  - 常量：UPPER_CASE（如MAX_RETRY_COUNT）
  - 私有变量：_leading_underscore（如_internal_cache）
- **字符串**：优先使用单引号（'hello'）
- **检查工具**：flake8、black、pylint

*JavaScript代码规范（ESLint）*:
- **缩进**：2个空格
- **分号**：必须使用
- **引号**：单引号
- **命名**：
  - 变量/函数：camelCase（如getUserById）
  - 类名：PascalCase（如UserService）
  - 常量：UPPER_CASE（如MAX_RETRY_COUNT）
- **箭头函数**：优先使用箭头函数
- **模板字符串**：优先使用模板字符串
- **检查工具**：ESLint + Prettier

*注释规范*:
- **文件注释**：
```python
"""
用户服务模块

提供用户注册、登录、信息管理等功能

Author: pythonLearn Team
Date: 2025-11-07
"""
```

- **类注释**：
```python
class UserService:
    """
    用户服务类

    提供用户相关的业务逻辑处理

    Attributes:
        db: 数据库连接
        cache: Redis缓存
    """
```

- **函数注释**：
```python
def get_user_by_id(user_id: int) -> Optional[User]:
    """
    根据用户ID获取用户信息

    Args:
        user_id: 用户ID

    Returns:
        User对象，如果不存在返回None

    Raises:
        DatabaseError: 数据库查询失败
    """
```

- **行内注释**：
```python
# 检查用户是否已锁定
if user.is_locked:
    return {"error": "账号已被锁定"}
```

**代码质量**:
- ✅ 单元测试覆盖率 ≥80%
- ✅ 集成测试覆盖率 ≥60%
- ✅ 代码审查：所有代码必须经过Code Review
- ✅ 代码复杂度：圈复杂度 ≤10

**详细代码质量要求**:

*单元测试*:
- **测试框架**：
  - Python：pytest
  - JavaScript：Jest
- **覆盖率目标**：
  - 核心业务逻辑：≥90%
  - 工具函数：≥80%
  - UI组件：≥60%
- **测试类型**：
  - 正常流程测试
  - 边界条件测试
  - 异常情况测试
- **测试示例**：
```python
def test_user_login_success():
    """测试用户登录成功"""
    user = create_test_user()
    result = login(user.email, 'password123')
    assert result['success'] is True
    assert 'token' in result

def test_user_login_wrong_password():
    """测试用户登录密码错误"""
    user = create_test_user()
    result = login(user.email, 'wrong_password')
    assert result['success'] is False
    assert result['error'] == '密码错误'
```

*集成测试*:
- **测试框架**：pytest + Flask test client
- **测试范围**：
  - API接口测试
  - 数据库操作测试
  - 第三方服务集成测试
- **测试示例**：
```python
def test_create_assignment_api(client, auth_token):
    """测试创建作业API"""
    response = client.post('/api/assignments',
        headers={'Authorization': f'Bearer {auth_token}'},
        json={
            'class_id': 1,
            'title': '第1周作业',
            'problem_ids': [1, 2, 3],
            'deadline': '2025-11-14T23:59:59Z'
        }
    )
    assert response.status_code == 201
    assert response.json['id'] > 0
```

*代码审查*:
- **审查流程**：
  1. 开发者提交Pull Request
  2. 自动运行CI/CD（测试、代码检查）
  3. 至少1名团队成员审查代码
  4. 审查通过后合并到主分支
- **审查要点**：
  - 代码是否符合规范
  - 逻辑是否正确
  - 是否有安全隐患
  - 是否有性能问题
  - 测试是否充分
  - 注释是否清晰

*代码复杂度*:
- **圈复杂度**：≤10
- **检测工具**：radon（Python）、complexity-report（JavaScript）
- **优化建议**：
  - 提取复杂逻辑到独立函数
  - 使用策略模式替代多层if-else
  - 使用字典/映射替代switch-case

**文档完整性**:
- ✅ API文档（Swagger/OpenAPI）
- ✅ 用户手册（Markdown）
- ✅ 部署文档（Docker Compose）
- ✅ 开发文档（README.md）
- ✅ 数据库设计文档（ER图）

**详细文档要求**:

*API文档*:
- **工具**：Swagger UI + OpenAPI 3.0
- **内容**：
  - 接口路径和方法
  - 请求参数（路径参数、查询参数、请求体）
  - 响应格式（成功、失败）
  - 状态码说明
  - 示例请求和响应
- **访问地址**：http://localhost:5000/api/docs

*用户手册*:
- **格式**：Markdown
- **内容**：
  - 产品介绍
  - 快速开始
  - 功能说明（注册登录、题目练习、班级管理、作业系统）
  - 常见问题（FAQ）
  - 联系方式
- **位置**：docs/USER_MANUAL.md

*部署文档*:
- **格式**：Markdown
- **内容**：
  - 系统要求
  - 安装步骤
  - 配置说明
  - 启动命令
  - 常见问题
  - 升级指南
  - 备份恢复
- **位置**：docs/DEPLOYMENT.md

*开发文档*:
- **格式**：Markdown
- **内容**：
  - 项目介绍
  - 技术栈
  - 目录结构
  - 开发环境搭建
  - 开发规范
  - 测试指南
  - 贡献指南
- **位置**：README.md

*数据库设计文档*:
- **工具**：dbdiagram.io
- **内容**：
  - ER图
  - 表结构说明
  - 字段说明
  - 索引说明
  - 关系说明
- **位置**：docs/DATABASE_DESIGN.md

**版本控制**:
- ✅ 使用Git进行版本控制
- ✅ 使用语义化版本号（Semantic Versioning）
- ✅ 使用Git Flow工作流
- ✅ 每个功能使用独立分支

**详细版本控制规范**:

*Git Flow工作流*:
- **主分支**：
  - main：生产环境代码
  - develop：开发环境代码
- **功能分支**：
  - feature/功能名：新功能开发
  - 示例：feature/user-login
- **修复分支**：
  - bugfix/问题描述：Bug修复
  - 示例：bugfix/login-error
- **发布分支**：
  - release/版本号：发布准备
  - 示例：release/v1.0.0
- **热修复分支**：
  - hotfix/问题描述：紧急修复
  - 示例：hotfix/security-patch

*提交规范*:
- **格式**：`<type>(<scope>): <subject>`
- **类型**：
  - feat：新功能
  - fix：Bug修复
  - docs：文档更新
  - style：代码格式（不影响功能）
  - refactor：重构
  - test：测试
  - chore：构建/工具
- **示例**：
  - `feat(auth): 添加用户登录功能`
  - `fix(editor): 修复代码高亮错误`
  - `docs(api): 更新API文档`

*语义化版本号*:
- **格式**：MAJOR.MINOR.PATCH
- **规则**：
  - MAJOR：不兼容的API修改
  - MINOR：向下兼容的功能新增
  - PATCH：向下兼容的Bug修复
- **示例**：
  - v0.1.0：MVP版本
  - v1.0.0：正式版本
  - v1.1.0：新增功能
  - v1.1.1：Bug修复

*标签管理*:
- **发布标签**：v1.0.0、v1.1.0
- **里程碑标签**：mvp、v1.0、v2.0
- **创建命令**：`git tag -a v1.0.0 -m "Release v1.0.0"`

### 6.5 可扩展性需求

**架构设计**:
- ✅ 模块化设计，功能解耦
- ✅ 前后端分离，RESTful API
- ✅ 数据库设计规范，支持迁移（SQLite→MySQL）
- ✅ 支持水平扩展（负载均衡）

**详细架构设计**:

*模块化设计*:
- **前端模块**：
  - 用户模块（auth）：注册、登录、个人中心
  - 题目模块（problem）：题目列表、题目详情、代码编辑
  - 班级模块（class）：班级管理、成员管理、公告
  - 作业模块（assignment）：作业管理、提交、统计
  - 通用模块（common）：布局、组件、工具
- **后端模块**：
  - 用户模块（auth）：认证、授权、用户管理
  - 题目模块（problem）：题目CRUD、代码执行
  - 班级模块（class）：班级CRUD、成员管理
  - 作业模块（assignment）：作业CRUD、批改、统计
  - 通用模块（common）：数据库、缓存、日志

*模块依赖关系*:
```
auth (基础模块)
  ↓
problem (依赖auth)
  ↓
class (依赖auth)
  ↓
assignment (依赖auth + problem + class)
```

*接口设计原则*:
- **RESTful API**：
  - 使用HTTP方法：GET（查询）、POST（创建）、PUT（更新）、DELETE（删除）
  - 使用资源路径：/api/users、/api/problems、/api/classes
  - 使用HTTP状态码：200（成功）、201（创建）、400（错误）、401（未授权）、404（不存在）
- **版本控制**：
  - URL版本：/api/v1/users、/api/v2/users
  - 向下兼容：保留旧版本API至少6个月
- **统一响应格式**：
```json
{
  "success": true,
  "data": {...},
  "error": null,
  "timestamp": "2025-11-07T10:00:00Z"
}
```

*数据库设计规范*:
- **命名规范**：
  - 表名：复数形式（users、problems、classes）
  - 字段名：snake_case（user_id、created_at）
  - 索引名：idx_表名_字段名（idx_users_email）
- **设计原则**：
  - 第三范式（3NF）
  - 外键约束
  - 索引优化
  - 软删除（is_deleted字段）
- **迁移支持**：
  - 使用Alembic管理数据库迁移
  - 每次修改生成迁移脚本
  - 支持升级和回滚

**功能扩展**:
- ✅ 支持新题型扩展（选择题、填空题、项目题）
- ✅ 支持新语言扩展（Java、C++、JavaScript）
- ✅ 支持插件系统（V2.0）
- ✅ 支持第三方集成（OAuth、LMS）

**详细功能扩展设计**:

*新题型扩展*:
- **编程题**（MVP）：
  - 类型：code
  - 评判：运行测试用例
  - 分数：通过测试用例数/总测试用例数 × 100
- **选择题**（V1.0）：
  - 类型：choice
  - 评判：对比答案
  - 分数：正确100分，错误0分
- **填空题**（V1.0）：
  - 类型：fill_blank
  - 评判：对比答案（支持正则）
  - 分数：正确100分，错误0分
- **项目题**（V2.0）：
  - 类型：project
  - 评判：人工评分 + 自动测试
  - 分数：0-100分

*题型扩展接口*:
```python
class ProblemType(ABC):
    """题型基类"""

    @abstractmethod
    def validate(self, problem_data: dict) -> bool:
        """验证题目数据"""
        pass

    @abstractmethod
    def judge(self, submission_data: dict) -> dict:
        """评判提交"""
        pass

class CodeProblem(ProblemType):
    """编程题"""

    def validate(self, problem_data: dict) -> bool:
        # 验证测试用例
        return 'test_cases' in problem_data

    def judge(self, submission_data: dict) -> dict:
        # 运行代码，返回结果
        return execute_code(submission_data['code'])
```

*新语言扩展*:
- **Python**（MVP）：
  - 镜像：python:3.8-slim
  - 执行：python /app/code.py
- **Java**（V1.0）：
  - 镜像：openjdk:11-slim
  - 执行：javac Main.java && java Main
- **C++**（V1.0）：
  - 镜像：gcc:11-slim
  - 执行：g++ -o main main.cpp && ./main
- **JavaScript**（V1.0）：
  - 镜像：node:16-slim
  - 执行：node /app/code.js

*语言扩展接口*:
```python
class Language(ABC):
    """语言基类"""

    @abstractmethod
    def get_docker_image(self) -> str:
        """获取Docker镜像"""
        pass

    @abstractmethod
    def get_execute_command(self, code_file: str) -> str:
        """获取执行命令"""
        pass

class PythonLanguage(Language):
    def get_docker_image(self) -> str:
        return 'python:3.8-slim'

    def get_execute_command(self, code_file: str) -> str:
        return f'python {code_file}'
```

*插件系统*（V2.0）:
- **插件类型**：
  - 题型插件：新题型
  - 语言插件：新语言
  - 评判插件：新评判方式
  - UI插件：新UI组件
- **插件接口**：
```python
class Plugin(ABC):
    """插件基类"""

    @abstractmethod
    def get_name(self) -> str:
        """获取插件名称"""
        pass

    @abstractmethod
    def get_version(self) -> str:
        """获取插件版本"""
        pass

    @abstractmethod
    def install(self) -> bool:
        """安装插件"""
        pass

    @abstractmethod
    def uninstall(self) -> bool:
        """卸载插件"""
        pass
```

*第三方集成*:
- **OAuth登录**（V1.0）：
  - 支持：GitHub、Google、微信
  - 协议：OAuth 2.0
  - 库：Authlib
- **LMS集成**（V2.0）：
  - 支持：Moodle、Canvas、Blackboard
  - 协议：LTI 1.3
  - 功能：单点登录、成绩同步

**数据扩展**:
- ✅ 支持数据库迁移（SQLite→MySQL→PostgreSQL）
- ✅ 支持分布式存储（未来）
- ✅ 支持缓存系统（Redis）
- ✅ 支持消息队列（Celery + Redis）

**详细数据扩展设计**:

*数据库迁移*:
- **SQLite**（MVP）：
  - 优点：零配置、轻量级
  - 缺点：并发性能差、不支持集群
  - 适用：<500用户
- **MySQL**（V1.0）：
  - 优点：高性能、高并发
  - 缺点：需要配置、占用资源
  - 适用：500-10000用户
- **PostgreSQL**（V2.0）：
  - 优点：功能强大、支持JSON
  - 缺点：配置复杂
  - 适用：>10000用户

*迁移步骤*:
```bash
# 1. 导出SQLite数据
sqlite3 pythonlearn.db .dump > backup.sql

# 2. 转换SQL语法（SQLite → MySQL）
sed 's/AUTOINCREMENT/AUTO_INCREMENT/g' backup.sql > mysql_backup.sql

# 3. 导入MySQL
mysql -u root -p pythonlearn < mysql_backup.sql

# 4. 更新配置
# DATABASE_URL=mysql://user:pass@localhost/pythonlearn
```

*缓存系统*:
- **缓存内容**：
  - 题目列表（TTL: 5分钟）
  - 题目详情（TTL: 10分钟）
  - 用户信息（TTL: 30分钟）
  - 班级信息（TTL: 10分钟）
- **缓存策略**：
  - Cache-Aside：先查缓存，未命中查数据库，写入缓存
  - Write-Through：写数据库同时写缓存
  - 过期策略：LRU（最近最少使用）
- **缓存示例**：
```python
def get_problem(problem_id: int) -> Problem:
    # 先查缓存
    cache_key = f'problem:{problem_id}'
    cached = redis.get(cache_key)
    if cached:
        return json.loads(cached)

    # 查数据库
    problem = db.query(Problem).get(problem_id)

    # 写入缓存
    redis.setex(cache_key, 600, json.dumps(problem))

    return problem
```

*消息队列*:
- **队列类型**：
  - 代码执行队列：高优先级
  - 邮件发送队列：低优先级
  - 数据统计队列：低优先级
- **任务示例**：
```python
@celery.task
def execute_code_task(submission_id: int):
    """异步执行代码"""
    submission = db.query(Submission).get(submission_id)
    result = execute_code(submission.code)
    submission.status = result['status']
    submission.output = result['output']
    db.commit()
```

**部署扩展**:
- ✅ 支持单机部署（Docker Compose）
- ✅ 支持集群部署（Kubernetes，未来）
- ✅ 支持云部署（AWS、阿里云，未来）
- ✅ 支持混合部署（本地+云端，未来）

**详细部署扩展设计**:

*单机部署*（MVP）:
- **部署方式**：Docker Compose
- **服务组成**：
  - Web服务（Flask）
  - 数据库（SQLite/MySQL）
  - 缓存（Redis）
  - 任务队列（Celery）
- **配置文件**：docker-compose.yml
- **启动命令**：`docker-compose up -d`

*集群部署*（V2.0）:
- **部署方式**：Kubernetes
- **服务组成**：
  - Web服务（多副本）
  - 数据库（主从复制）
  - 缓存（Redis Cluster）
  - 任务队列（Celery + RabbitMQ）
  - 负载均衡（Nginx Ingress）
- **扩容策略**：
  - 水平扩容：增加Web服务副本
  - 垂直扩容：增加单个服务资源
  - 自动扩容：基于CPU/内存使用率

*云部署*（未来）:
- **AWS**：
  - 计算：EC2、ECS、Lambda
  - 数据库：RDS（MySQL/PostgreSQL）
  - 缓存：ElastiCache（Redis）
  - 存储：S3
  - CDN：CloudFront
- **阿里云**：
  - 计算：ECS、容器服务
  - 数据库：RDS
  - 缓存：Redis
  - 存储：OSS
  - CDN：CDN

*混合部署*（未来）:
- **本地**：
  - Web服务
  - 数据库
  - 缓存
- **云端**：
  - 代码执行（弹性扩容）
  - 文件存储（OSS）
  - CDN加速

### 6.6 兼容性需求

**浏览器兼容**:

| 浏览器 | 最低版本 | 支持程度 | 测试覆盖 | 已知问题 |
|--------|---------|---------|---------|---------|
| **Chrome** | 90+ | 完全支持 | 100% | 无 |
| **Firefox** | 88+ | 完全支持 | 100% | 无 |
| **Safari** | 14+ | 完全支持 | 80% | 部分CSS效果不一致 |
| **Edge** | 90+ | 完全支持 | 80% | 无 |
| **IE** | 不支持 | - | - | 不支持ES6+ |

**详细浏览器兼容性**:

*Chrome（推荐）*:
- **版本要求**：90+（2021年4月发布）
- **支持特性**：
  - ES6+语法
  - CSS Grid、Flexbox
  - WebSocket
  - LocalStorage
  - Service Worker
- **测试版本**：90、100、110、最新版
- **测试工具**：Chrome DevTools

*Firefox*:
- **版本要求**：88+（2021年4月发布）
- **支持特性**：同Chrome
- **测试版本**：88、100、110、最新版
- **已知问题**：
  - 部分CSS动画性能略差
  - 字体渲染略有差异

*Safari*:
- **版本要求**：14+（2020年9月发布）
- **支持特性**：同Chrome
- **测试版本**：14、15、16、最新版
- **已知问题**：
  - 部分CSS效果不一致（如backdrop-filter）
  - WebSocket连接偶尔不稳定
  - 需要添加-webkit-前缀

*Edge*:
- **版本要求**：90+（基于Chromium）
- **支持特性**：同Chrome
- **测试版本**：90、100、110、最新版
- **已知问题**：无

*IE（不支持）*:
- **原因**：
  - 不支持ES6+语法
  - 不支持CSS Grid
  - 性能差
  - 微软已停止支持
- **提示**：访问时显示"请使用现代浏览器（Chrome、Firefox、Safari、Edge）"

*浏览器特性检测*:
```javascript
// 检测必需特性
const requiredFeatures = {
  localStorage: typeof Storage !== 'undefined',
  webSocket: typeof WebSocket !== 'undefined',
  es6: typeof Symbol !== 'undefined',
  fetch: typeof fetch !== 'undefined'
};

// 如果不支持，显示提示
if (!Object.values(requiredFeatures).every(v => v)) {
  alert('您的浏览器版本过低，请升级到最新版本');
}
```

**操作系统兼容**:

| 操作系统 | 最低版本 | 支持程度 | 测试覆盖 | 部署方式 |
|---------|---------|---------|---------|---------|
| **macOS** | 10.15+ | 完全支持 | 100% | Docker Desktop |
| **Windows** | 10+ | 完全支持 | 100% | Docker Desktop |
| **Linux** | Ubuntu 20.04+ | 完全支持 | 80% | Docker Engine |

**详细操作系统兼容性**:

*macOS*:
- **版本要求**：10.15 Catalina+
- **Docker版本**：Docker Desktop 4.0+
- **测试版本**：
  - macOS 10.15 Catalina
  - macOS 11 Big Sur
  - macOS 12 Monterey
  - macOS 13 Ventura
  - macOS 14 Sonoma
- **安装步骤**：
  1. 安装Docker Desktop
  2. 下载docker-compose.yml
  3. 运行`docker-compose up -d`
  4. 访问http://localhost:5000

*Windows*:
- **版本要求**：Windows 10 1903+（支持WSL 2）
- **Docker版本**：Docker Desktop 4.0+
- **测试版本**：
  - Windows 10 21H2
  - Windows 11 21H2
  - Windows 11 22H2
- **安装步骤**：
  1. 启用WSL 2
  2. 安装Docker Desktop
  3. 下载docker-compose.yml
  4. 运行`docker-compose up -d`
  5. 访问http://localhost:5000
- **已知问题**：
  - WSL 2性能略低于原生Linux
  - 文件权限问题（需要配置）

*Linux*:
- **发行版支持**：
  - Ubuntu 20.04+（推荐）
  - Debian 10+
  - CentOS 8+
  - Fedora 33+
- **Docker版本**：Docker Engine 20.10+
- **测试版本**：
  - Ubuntu 20.04 LTS
  - Ubuntu 22.04 LTS
- **安装步骤**：
  1. 安装Docker Engine
  2. 安装Docker Compose
  3. 下载docker-compose.yml
  4. 运行`docker-compose up -d`
  5. 访问http://localhost:5000

**移动设备兼容**:

| 设备 | 支持程度 | 说明 | 屏幕宽度 |
|------|---------|------|---------|
| **平板（iPad）** | 部分支持 | 可浏览题目、查看统计，代码编辑体验一般 | ≥768px |
| **平板（Android）** | 部分支持 | 同iPad | ≥768px |
| **手机** | 不支持 | 屏幕太小，代码编辑体验差 | <768px |

**详细移动设备兼容性**:

*iPad*:
- **支持版本**：iPadOS 14+
- **支持功能**：
  - ✅ 浏览题目列表
  - ✅ 查看题目详情
  - ✅ 查看作业统计
  - ✅ 查看班级信息
  - ⚠️ 代码编辑（体验一般，建议使用外接键盘）
  - ❌ 代码执行（功能正常，但输入不便）
- **测试设备**：
  - iPad Pro 12.9"（2048×2732）
  - iPad Air 10.9"（1640×2360）
  - iPad 10.2"（1620×2160）
- **优化建议**：
  - 使用外接键盘
  - 横屏使用
  - 使用Safari浏览器

*Android平板*:
- **支持版本**：Android 10+
- **支持功能**：同iPad
- **测试设备**：
  - Samsung Galaxy Tab S7（1752×2800）
  - Huawei MatePad Pro（1600×2560）
- **已知问题**：
  - 部分Android浏览器兼容性差
  - 建议使用Chrome浏览器

*手机（不支持）*:
- **原因**：
  - 屏幕太小（<768px）
  - 代码编辑体验差
  - 虚拟键盘占用空间大
- **提示**：访问时显示"请使用电脑或平板访问"
- **未来计划**：
  - V2.0：开发移动端App（React Native）
  - 支持：浏览题目、查看统计、简单代码编辑

**响应式设计断点**:

| 断点 | 屏幕宽度 | 设备类型 | 布局 |
|------|---------|---------|------|
| **xs** | <576px | 手机 | 不支持 |
| **sm** | 576px-768px | 手机（横屏） | 不支持 |
| **md** | 768px-992px | 平板 | 单列布局 |
| **lg** | 992px-1200px | 小屏电脑 | 双列布局 |
| **xl** | 1200px-1920px | 普通电脑 | 双列布局 |
| **xxl** | >1920px | 大屏电脑 | 三列布局 |

**屏幕分辨率支持**:

| 分辨率 | 设备 | 支持程度 | 测试覆盖 |
|--------|------|---------|---------|
| **1920×1080** | 普通电脑 | 完全支持 | 100% |
| **1366×768** | 笔记本 | 完全支持 | 100% |
| **2560×1440** | 2K显示器 | 完全支持 | 80% |
| **3840×2160** | 4K显示器 | 完全支持 | 60% |
| **1024×768** | 老旧设备 | 部分支持 | 40% |

**兼容性测试策略**:

*测试工具*:
- **浏览器测试**：BrowserStack、Sauce Labs
- **响应式测试**：Chrome DevTools Device Mode
- **性能测试**：Lighthouse
- **可访问性测试**：axe DevTools

*测试矩阵*:
- **优先级P0**（必须测试）：
  - Chrome 最新版 + Windows 10
  - Chrome 最新版 + macOS
  - Firefox 最新版 + Windows 10
- **优先级P1**（重要测试）：
  - Safari 最新版 + macOS
  - Edge 最新版 + Windows 10
  - Chrome 最新版 + Ubuntu
- **优先级P2**（可选测试）：
  - Safari + iPad
  - Chrome + Android平板

*测试用例*:
- **功能测试**：
  - 用户注册登录
  - 题目浏览和搜索
  - 代码编辑和执行
  - 作业提交和查看
- **兼容性测试**：
  - 页面布局正常
  - 交互功能正常
  - 样式显示正常
  - 性能符合要求
- **回归测试**：
  - 每次发布前执行
  - 覆盖核心功能
  - 覆盖主要浏览器

---

## 7. 产品路线图

### 7.1 技术预研阶段（2周，MVP前）

**目标**: 验证核心技术可行性，降低技术风险

**Week 1: 核心技术验证**

**Day 1-3: Docker容器性能和安全测试**
- **负责人**: 后端工程师A
- **测试内容**:
  1. 单机支持的最大并发容器数
  2. 容器启动时间和资源消耗
  3. 代码执行时间（不同复杂度）
  4. 安全性测试（尝试突破沙箱）
- **验收标准**:
  - 支持≥20并发容器
  - 容器启动时间<1s
  - 简单代码执行<2s
  - 沙箱无法突破
- **交付物**: Docker技术验证报告

**Day 4-5: SQLite性能测试**
- **负责人**: 后端工程师B
- **测试内容**:
  1. 模拟500用户数据
  2. 并发读写测试
  3. 复杂查询性能
  4. 数据库文件大小
- **验收标准**:
  - 查询时间<50ms
  - 写入时间<100ms
  - 支持≥50并发连接
- **交付物**: SQLite性能测试报告

**Week 2: 前端技术验证和架构设计**

**Day 6-8: CodeMirror 6集成**
- **负责人**: 前端工程师
- **测试内容**:
  1. 基本代码编辑器实现
  2. 语法高亮和自动补全
  3. 代码折叠和括号匹配
  4. 性能测试（大文件）
- **验收标准**:
  - 所有基本功能正常
  - 1000行代码流畅编辑
- **交付物**: 代码编辑器原型

**Day 9-10: 架构设计和技术选型确认**
- **负责人**: 全体技术团队
- **内容**:
  1. 系统架构设计评审
  2. 技术选型最终确认
  3. 数据库设计评审
  4. API设计评审
- **交付物**:
  - 系统架构文档
  - 数据库设计文档
  - API设计文档

### 7.2 MVP阶段（3个月，12个Sprint）

**目标**: 完成核心学习功能，支持基本教学场景

**Month 1: 基础架构和核心功能**

**Sprint 1 (Week 1-2): 基础架构**
- 前后端框架搭建
- 数据库设计和初始化
- Docker环境配置
- CI/CD流程搭建
- F1. 用户注册/登录

**Sprint 2 (Week 3-4): 代码编辑和执行**
- F2. 在线代码编辑器
- F3. 实时代码执行（基础版）
- F4. 题库管理（基础版）

**Month 2: 教学功能**

**Sprint 3 (Week 5-6): 班级管理**
- F5. 班级管理（基础版）
- 邀请码系统
- 公告系统

**Sprint 4 (Week 7-8): 作业系统（Part 1）**
- 创建作业
- 提交作业
- 自动批改

**Sprint 5 (Week 9-10): 作业系统（Part 2）**
- 作业统计
- 学生统计
- 数据可视化

**Month 3: 优化和测试**

**Sprint 6 (Week 11-12): 优化和测试**
- 性能优化
- 安全加固
- 集成测试
- 用户测试
- 文档编写


### 7.3 V1.0阶段（3个月，12个Sprint）

**目标**: 增强学习体验，提升用户留存

**Sprint 7-8 (Week 13-16): 学习路径和游戏化**
- F9. 学习路径
- F7. 游戏化激励系统（积分、等级、成就）

**Sprint 9-10 (Week 17-20): 数据分析和讨论区**
- F11. 学习数据分析
- F8. 讨论区

**Sprint 11-12 (Week 21-24): 代码质量和优化**
- F10. 代码质量分析
- 性能优化
- 集成测试

### 7.4 V2.0阶段（6个月，24个Sprint）

**目标**: 提供高级功能，支持大规模部署

**Sprint 13-16 (Week 25-32): AI智能辅导**
- F12. AI智能辅导
- 集成OpenAI API或本地LLM
- Prompt工程优化

**Sprint 17-20 (Week 33-40): 多语言支持**
- F15. 多语言支持（Java、C++）
- 多语言代码执行引擎
- 多语言题库

**Sprint 21-24 (Week 41-48): 高级功能**
- F14. 高级数据分析
- F13. 竞赛模式
- F16. 插件系统
- 性能优化
- 集成测试

---

## 8. 资源需求

### 8.1 团队组成

**MVP阶段（3个月）**:

| 角色 | 人数 | 技能要求 | 职责 |
|------|------|---------|------|
| **产品经理** | 0.5人 | 产品设计、需求分析 | 需求管理、产品设计、用户调研 |
| **前端工程师** | 1人 | Vue.js、TypeScript、CodeMirror | 前端开发、UI/UX实现 |
| **后端工程师** | 2人 | Python、Flask、Docker、SQLite | 后端开发、API设计、代码执行引擎 |
| **测试工程师** | 0.5人 | 自动化测试、性能测试 | 测试用例编写、测试执行 |
| **UI/UX设计师** | 0.5人 | Figma、原型设计 | 界面设计、交互设计 |
| **项目经理** | 0.5人 | 项目管理、敏捷开发 | 项目计划、进度跟踪、风险管理 |
| **DevOps工程师** | 0.5人 | Docker、CI/CD、监控 | 部署、运维、监控 |
| **合计** | **5.5人** | - | - |

**V1.0阶段（3个月）**:

| 角色 | 人数 | 变化 | 说明 |
|------|------|------|------|
| **产品经理** | 0.5人 | 不变 | 继续需求管理 |
| **前端工程师** | 1.5人 | +0.5人 | 增加游戏化、讨论区开发 |
| **后端工程师** | 2人 | 不变 | 继续后端开发 |
| **测试工程师** | 1人 | +0.5人 | 增加测试工作量 |
| **UI/UX设计师** | 0.5人 | 不变 | 继续界面设计 |
| **项目经理** | 0.5人 | 不变 | 继续项目管理 |
| **DevOps工程师** | 0.5人 | 不变 | 继续运维 |
| **合计** | **6.5人** | **+1人** | - |

**V2.0阶段（6个月）**:

| 角色 | 人数 | 变化 | 说明 |
|------|------|------|------|
| **产品经理** | 1人 | +0.5人 | 增加产品规划工作 |
| **前端工程师** | 2人 | +0.5人 | 增加高级功能开发 |
| **后端工程师** | 3人 | +1人 | 增加AI、多语言支持 |
| **测试工程师** | 1人 | 不变 | 继续测试 |
| **UI/UX设计师** | 0.5人 | 不变 | 继续界面设计 |
| **项目经理** | 0.5人 | 不变 | 继续项目管理 |
| **DevOps工程师** | 1人 | +0.5人 | 增加运维工作量 |
| **AI工程师** | 1人 | +1人 | AI智能辅导开发 |
| **合计** | **10人** | **+3.5人** | - |

### 8.2 技能矩阵

| 技能 | 必需 | 优先级 | 人数 |
|------|------|--------|------|
| **Vue.js 3** | ✅ | P0 | 1-2人 |
| **Python/Flask** | ✅ | P0 | 2-3人 |
| **Docker** | ✅ | P0 | 2-3人 |
| **SQLite/MySQL** | ✅ | P0 | 2-3人 |
| **CodeMirror 6** | ✅ | P0 | 1人 |
| **RESTful API设计** | ✅ | P0 | 2-3人 |
| **自动化测试** | ✅ | P1 | 1人 |
| **UI/UX设计** | ✅ | P1 | 0.5-1人 |
| **AI/LLM** | ⏳ | P2 | 1人（V2.0） |
| **Kubernetes** | ⏳ | P2 | 1人（未来） |

### 8.3 预算估算

**MVP阶段（3个月）**:

| 项目 | 单价 | 数量 | 小计 | 说明 |
|------|------|------|------|------|
| **人力成本** | ¥15,000/人月 | 5.5人×3月 | ¥247,500 | 平均工资 |
| **服务器** | ¥500/月 | 3月 | ¥1,500 | 开发/测试服务器 |
| **域名** | ¥100/年 | 1年 | ¥100 | .com域名 |
| **SSL证书** | ¥0 | - | ¥0 | Let's Encrypt免费 |
| **第三方服务** | ¥500/月 | 3月 | ¥1,500 | 邮件、短信、CDN |
| **办公设备** | ¥8,000/人 | 5.5人 | ¥44,000 | 电脑、显示器 |
| **软件许可** | ¥500/人月 | 5.5人×3月 | ¥8,250 | IDE、设计工具 |
| **培训** | ¥2,000/人 | 5.5人 | ¥11,000 | 技术培训 |
| **差旅** | ¥1,000/月 | 3月 | ¥3,000 | 用户调研 |
| **其他** | - | - | ¥5,000 | 杂费 |
| **合计** | - | - | **¥321,850** | - |
| **预留20%缓冲** | - | - | **¥64,370** | - |
| **总计** | - | - | **¥386,220** | - |

**V1.0阶段（3个月）**:

| 项目 | 单价 | 数量 | 小计 |
|------|------|------|------|
| **人力成本** | ¥15,000/人月 | 6.5人×3月 | ¥292,500 |
| **服务器** | ¥1,000/月 | 3月 | ¥3,000 |
| **第三方服务** | ¥1,000/月 | 3月 | ¥3,000 |
| **其他** | - | - | ¥10,000 |
| **合计** | - | - | **¥308,500** |
| **预留20%缓冲** | - | - | **¥61,700** |
| **总计** | - | - | **¥370,200** |

**V2.0阶段（6个月）**:

| 项目 | 单价 | 数量 | 小计 |
|------|------|------|------|
| **人力成本** | ¥15,000/人月 | 10人×6月 | ¥900,000 |
| **服务器** | ¥2,000/月 | 6月 | ¥12,000 |
| **AI API费用** | ¥5,000/月 | 6月 | ¥30,000 |
| **第三方服务** | ¥2,000/月 | 6月 | ¥12,000 |
| **其他** | - | - | ¥20,000 |
| **合计** | - | - | **¥974,000** |
| **预留20%缓冲** | - | - | **¥194,800** |
| **总计** | - | - | **¥1,168,800** |

**总预算（12个月）**: ¥386,220 + ¥370,200 + ¥1,168,800 = **¥1,925,220**

### 8.4 招聘计划

**MVP阶段（Month 0-1）**:

| 角色 | 人数 | 招聘时间 | 到岗时间 |
|------|------|---------|---------|
| **后端工程师** | 2人 | Week 1-2 | Week 3 |
| **前端工程师** | 1人 | Week 1-2 | Week 3 |
| **测试工程师** | 0.5人 | Week 3-4 | Week 5 |
| **UI/UX设计师** | 0.5人 | Week 3-4 | Week 5 |
| **DevOps工程师** | 0.5人 | Week 3-4 | Week 5 |

**V1.0阶段（Month 3-4）**:

| 角色 | 人数 | 招聘时间 | 到岗时间 |
|------|------|---------|---------|
| **前端工程师** | 0.5人 | Month 3 | Month 4 |
| **测试工程师** | 0.5人 | Month 3 | Month 4 |

**V2.0阶段（Month 6-7）**:

| 角色 | 人数 | 招聘时间 | 到岗时间 |
|------|------|---------|---------|
| **后端工程师** | 1人 | Month 6 | Month 7 |
| **前端工程师** | 0.5人 | Month 6 | Month 7 |
| **AI工程师** | 1人 | Month 6 | Month 7 |
| **DevOps工程师** | 0.5人 | Month 6 | Month 7 |
| **产品经理** | 0.5人 | Month 6 | Month 7 |

---

## 9. 技术预研

### 9.1 POC（概念验证）

**POC 1: Docker代码执行引擎**

**目标**: 验证Docker沙箱的性能和安全性

**验证内容**:
1. ✅ 单机支持的最大并发容器数（目标：≥20）
2. ✅ 容器启动时间（目标：<1s）
3. ✅ 代码执行时间（目标：简单代码<2s）
4. ✅ 安全性测试（目标：沙箱无法突破）
5. ✅ 资源限制（CPU、内存、磁盘、网络）

**验证方法**:
- 使用Docker SDK for Python
- 编写测试脚本，模拟并发执行
- 尝试突破沙箱（访问宿主机、外网、文件系统）
- 监控资源使用情况

**验收标准**:
- ✅ 支持≥20并发容器
- ✅ 容器启动时间<1s
- ✅ 简单代码执行<2s
- ✅ 沙箱无法突破

**POC 2: SQLite性能测试**

**目标**: 验证SQLite能否支持500用户

**验证内容**:
1. ✅ 模拟500用户数据
2. ✅ 并发读写测试（目标：≥50并发）
3. ✅ 复杂查询性能（目标：<50ms）
4. ✅ 数据库文件大小（目标：<1GB）

**验证方法**:
- 使用SQLAlchemy ORM
- 编写测试脚本，模拟并发读写
- 执行复杂查询（JOIN、GROUP BY、ORDER BY）
- 监控数据库文件大小

**验收标准**:
- ✅ 查询时间<50ms
- ✅ 写入时间<100ms
- ✅ 支持≥50并发连接
- ✅ 数据库文件<1GB

**POC 3: CodeMirror 6集成**

**目标**: 验证CodeMirror 6能否满足代码编辑需求

**验证内容**:
1. ✅ 语法高亮（Python）
2. ✅ 自动补全
3. ✅ 代码折叠
4. ✅ 括号匹配
5. ✅ 性能测试（1000行代码）

**验证方法**:
- 使用CodeMirror 6官方文档
- 编写示例代码，测试各项功能
- 测试1000行代码的编辑性能

**验收标准**:
- ✅ 所有基本功能正常
- ✅ 1000行代码流畅编辑

### 9.2 技术选型决策

**前端框架选择**:

| 框架 | 优点 | 缺点 | 评分 | 选择 |
|------|------|------|------|------|
| **Vue.js 3** | 易学、生态好、性能好 | 企业级应用较少 | 9/10 | ✅ |
| **React** | 生态最好、企业级应用多 | 学习曲线陡峭 | 8/10 | ❌ |
| **Angular** | 企业级、功能完整 | 学习曲线陡峭、体积大 | 7/10 | ❌ |

**后端框架选择**:

| 框架 | 优点 | 缺点 | 评分 | 选择 |
|------|------|------|------|------|
| **Flask** | 轻量、灵活、易学 | 功能较少，需要自己集成 | 9/10 | ✅ |
| **Django** | 功能完整、ORM强大 | 重量级、学习曲线陡峭 | 7/10 | ❌ |
| **FastAPI** | 性能好、自动文档 | 生态较新、资料较少 | 8/10 | ❌ |

**数据库选择**:

| 数据库 | 优点 | 缺点 | 评分 | 选择 |
|--------|------|------|------|------|
| **SQLite** | 零配置、单文件、轻量 | 并发性能较差、功能较少 | 9/10 | ✅（MVP） |
| **MySQL** | 成熟、性能好、生态好 | 需要配置、维护成本高 | 8/10 | ✅（V2.0） |
| **PostgreSQL** | 功能强大、性能好 | 学习曲线陡峭 | 7/10 | ⏳（未来） |

**代码编辑器选择**:

| 编辑器 | 优点 | 缺点 | 评分 | 选择 |
|--------|------|------|------|------|
| **CodeMirror 6** | 性能好、功能完整、可定制 | 文档较少 | 9/10 | ✅ |
| **Monaco Editor** | 功能强大、VS Code同款 | 体积大、配置复杂 | 7/10 | ❌ |
| **Ace Editor** | 成熟、生态好 | 性能较差、维护较少 | 6/10 | ❌ |

### 9.3 架构决策记录（ADR）

**ADR-001: 选择SQLite作为MVP数据库**

**日期**: 2025-11-07
**状态**: 已接受
**决策者**: 技术团队

**背景**:
- MVP需要快速开发，降低部署成本
- 目标用户规模：50-100机构，500用户以内
- 需要支持本地部署

**决策**:
- MVP阶段使用SQLite
- V2.0阶段提供MySQL迁移方案

**理由**:
- ✅ 零配置，降低部署成本
- ✅ 单文件，方便备份和迁移
- ✅ 性能满足500用户需求
- ✅ 支持迁移到MySQL

**后果**:
- ✅ 降低部署成本80%
- ✅ 简化运维工作
- ⚠️ 并发性能有限（≤50并发）
- ⚠️ 需要提供MySQL迁移方案

**ADR-002: 选择Docker作为代码执行引擎**

**日期**: 2025-11-07
**状态**: 已接受
**决策者**: 技术团队

**背景**:
- 需要安全地执行用户代码
- 需要支持多种编程语言
- 需要资源隔离和限制

**决策**:
- 使用Docker容器执行用户代码
- 每次执行使用独立容器
- 设置资源限制（CPU、内存、磁盘、网络）

**理由**:
- ✅ 安全隔离，防止恶意代码
- ✅ 资源限制，防止资源滥用
- ✅ 支持多种语言
- ✅ 易于扩展

**后果**:
- ✅ 安全性高
- ✅ 可扩展性好
- ⚠️ 性能开销（容器启动时间）
- ⚠️ 需要Docker环境

---

## 10. 质量保证

### 10.1 测试策略

**5级测试金字塔**:

```
           /\
          /E2E\          Level 5: E2E测试（5%）
         /------\
        /手工测试\        Level 4: 手工测试（10%）
       /----------\
      /  集成测试  \      Level 3: 集成测试（20%）
     /--------------\
    /   单元测试     \    Level 2: 单元测试（50%）
   /------------------\
  /    静态代码分析    \  Level 1: 静态代码分析（15%）
 /----------------------\
```

**Level 1: 静态代码分析（15%）**:
- ✅ Python: Pylint、Flake8、Black
- ✅ JavaScript: ESLint、Prettier
- ✅ 代码覆盖率: Coverage.py
- ✅ 安全扫描: Bandit、Safety

**Level 2: 单元测试（50%）**:
- ✅ Python: pytest
- ✅ JavaScript: Vitest
- ✅ 覆盖率目标: ≥80%
- ✅ 测试用例数: ≥500

**Level 3: 集成测试（20%）**:
- ✅ API测试: pytest + requests
- ✅ 数据库测试: pytest + SQLAlchemy
- ✅ Docker测试: pytest + docker-py
- ✅ 覆盖率目标: ≥60%

**Level 4: 手工测试（10%）**:
- ✅ 功能测试: 测试用例执行
- ✅ UI测试: 界面测试
- ✅ 兼容性测试: 浏览器、操作系统
- ✅ 用户验收测试（UAT）

**Level 5: E2E测试（5%）**:
- ✅ 端到端测试: Playwright
- ✅ 关键业务流程测试
- ✅ 性能测试: Locust
- ✅ 安全测试: OWASP ZAP


### 10.2 测试用例设计

**功能测试用例（示例）**:

| 用例ID | 功能 | 测试场景 | 预期结果 | 优先级 |
|--------|------|---------|---------|--------|
| TC-001 | 用户注册 | 使用有效邮箱注册 | 注册成功，自动登录 | P0 |
| TC-002 | 用户注册 | 使用已存在邮箱注册 | 提示邮箱已存在 | P0 |
| TC-003 | 用户登录 | 使用正确密码登录 | 登录成功，跳转首页 | P0 |
| TC-004 | 用户登录 | 使用错误密码登录 | 提示密码错误 | P0 |
| TC-005 | 代码执行 | 执行简单Python代码 | 返回正确结果 | P0 |
| TC-006 | 代码执行 | 执行无限循环代码 | 5秒后超时 | P0 |
| TC-007 | 代码执行 | 执行恶意代码（import os） | 拦截，提示禁止操作 | P0 |

**性能测试用例（示例）**:

| 用例ID | 测试场景 | 并发数 | 预期响应时间 | 预期成功率 |
|--------|---------|--------|-------------|-----------|
| PT-001 | 用户登录 | 50 | <200ms | >99% |
| PT-002 | 代码执行 | 20 | <5s | >99% |
| PT-003 | 题目列表 | 100 | <300ms | >99% |
| PT-004 | 作业提交 | 50 | <1s | >99% |

**安全测试用例（示例）**:

| 用例ID | 测试场景 | 攻击方式 | 预期结果 |
|--------|---------|---------|---------|
| ST-001 | SQL注入 | 在登录表单输入SQL语句 | 拦截，提示输入无效 |
| ST-002 | XSS攻击 | 在题目描述输入脚本 | 转义，不执行脚本 |
| ST-003 | CSRF攻击 | 伪造请求 | 拦截，提示Token无效 |
| ST-004 | 沙箱突破 | 尝试访问宿主机文件 | 拦截，无法访问 |

### 10.3 缺陷管理

**缺陷等级定义**:

| 等级 | 定义 | 示例 | 修复时间 |
|------|------|------|---------|
| **P0（致命）** | 系统崩溃、数据丢失、安全漏洞 | 代码执行沙箱被突破 | 24小时内 |
| **P1（严重）** | 核心功能不可用 | 代码无法执行 | 3天内 |
| **P2（一般）** | 功能部分不可用 | 代码高亮不正确 | 1周内 |
| **P3（轻微）** | 界面问题、体验问题 | 按钮样式不美观 | 2周内 |

**缺陷处理流程**:

```
发现缺陷 → 创建缺陷单 → 分配给开发 → 开发修复 → 测试验证 → 关闭缺陷
    ↓                                                    ↓
  重新打开 ←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←← 验证失败
```

### 10.4 质量门禁

**代码提交门禁**:
- ✅ 代码规范检查通过（Pylint、ESLint）
- ✅ 单元测试通过
- ✅ 代码覆盖率 ≥80%
- ✅ 代码审查通过（至少1人）

**发布门禁**:
- ✅ 所有P0、P1缺陷已修复
- ✅ 集成测试通过
- ✅ 性能测试通过
- ✅ 安全测试通过
- ✅ 用户验收测试通过

---

## 11. 运营推广

### 11.1 增长黑客策略

**AARRR模型**:

**Acquisition（获取用户）**:
- ✅ SEO优化：关键词"Python在线学习"、"Python编程练习"
- ✅ 内容营销：技术博客、教程、案例分享
- ✅ 社交媒体：知乎、CSDN、掘金、微信公众号
- ✅ 合作推广：与培训机构、高校合作
- ✅ 免费试用：提供14天免费试用

**Activation（激活用户）**:
- ✅ 新手引导：5步引导完成首次练习
- ✅ 首次体验优化：推荐简单题目，确保成功
- ✅ 即时反馈：完成首题后显示祝贺动画
- ✅ 邮件提醒：注册后24小时内发送欢迎邮件

**Retention（留存用户）**:
- ✅ 每日签到：签到获得积分
- ✅ 学习提醒：每天20:00推送学习提醒
- ✅ 学习报告：每周发送学习报告
- ✅ 游戏化激励：积分、等级、成就、排行榜

**Revenue（获取收入）**:
- ✅ 免费试用：14天免费试用
- ✅ 效果展示：展示学习数据、成绩提升
- ✅ 优惠活动：首次购买8折优惠
- ✅ 推荐奖励：推荐好友获得1个月免费使用

**Referral（推荐传播）**:
- ✅ 推荐奖励：推荐好友获得1个月免费使用
- ✅ 邀请码：生成专属邀请码
- ✅ 社交分享：分享学习成果到社交媒体
- ✅ 口碑传播：鼓励用户撰写评价

### 11.2 用户生命周期管理

**新用户（0-7天）**:
- ✅ 目标：完成首次练习，体验核心功能
- ✅ 策略：新手引导、简单题目、即时反馈
- ✅ 触达：欢迎邮件、学习提醒、客服咨询

**活跃用户（7-30天）**:
- ✅ 目标：养成学习习惯，提升留存
- ✅ 策略：每日签到、学习路径、游戏化激励
- ✅ 触达：学习提醒、学习报告、成就通知

**忠诚用户（30天+）**:
- ✅ 目标：持续使用，推荐好友
- ✅ 策略：高级功能、VIP服务、推荐奖励
- ✅ 触达：新功能通知、优惠活动、用户调研

**流失用户（30天未活跃）**:
- ✅ 目标：召回用户
- ✅ 策略：流失原因调研、召回活动、优惠券
- ✅ 触达：召回邮件、短信、客服电话

### 11.3 社区运营

**内容运营**:
- ✅ 技术博客：每周发布1-2篇技术文章
- ✅ 教程视频：每月发布2-3个教程视频
- ✅ 案例分享：每月分享1-2个成功案例
- ✅ 用户故事：每月采访1-2个优秀用户

**活动运营**:
- ✅ 编程挑战赛：每季度举办1次编程挑战赛
- ✅ 线上讲座：每月举办1次线上讲座
- ✅ 用户见面会：每半年举办1次用户见面会
- ✅ 节日活动：春节、教师节等节日举办活动

**用户激励**:
- ✅ 积分商城：积分兑换礼品
- ✅ 荣誉榜：展示优秀用户
- ✅ 证书颁发：完成学习路径颁发证书
- ✅ 专属福利：VIP用户专属福利

---

## 12. 成功指标

### 12.1 数据埋点

**用户行为埋点**:

| 事件 | 参数 | 说明 |
|------|------|------|
| **user_register** | email, role | 用户注册 |
| **user_login** | email, device | 用户登录 |
| **problem_view** | problem_id, difficulty | 查看题目 |
| **code_submit** | problem_id, status, time | 提交代码 |
| **assignment_create** | class_id, problem_count | 创建作业 |
| **assignment_submit** | assignment_id, score | 提交作业 |

**页面浏览埋点**:

| 页面 | 参数 | 说明 |
|------|------|------|
| **/problems** | - | 题目列表页 |
| **/problems/:id** | problem_id | 题目详情页 |
| **/classes** | - | 班级列表页 |
| **/assignments** | - | 作业列表页 |

### 12.2 关键指标

**北极星指标**:
- **WALU（Weekly Active Learning Users）**: 每周活跃学习用户数
  - MVP目标：50+
  - V1.0目标：200+
  - V2.0目标：500+

**用户指标**:

| 指标 | 定义 | MVP目标 | V1.0目标 | V2.0目标 |
|------|------|---------|----------|----------|
| **DAU** | 日活跃用户数 | 20+ | 80+ | 200+ |
| **MAU** | 月活跃用户数 | 100+ | 400+ | 1000+ |
| **DAU/MAU** | 用户活跃度 | >20% | >25% | >30% |
| **7日留存率** | 注册后7天仍活跃 | >50% | >60% | >70% |
| **30日留存率** | 注册后30天仍活跃 | >30% | >40% | >50% |

**学习指标**:

| 指标 | 定义 | MVP目标 | V1.0目标 | V2.0目标 |
|------|------|---------|----------|----------|
| **人均学习时长** | 每用户每周学习时长 | >2小时 | >3小时 | >4小时 |
| **人均完成题数** | 每用户每周完成题数 | >5题 | >10题 | >15题 |
| **题目完成率** | 完成题数/开始题数 | >50% | >60% | >70% |
| **题目正确率** | 正确题数/完成题数 | >60% | >70% | >80% |

**商业指标**:

| 指标 | 定义 | MVP目标 | V1.0目标 | V2.0目标 |
|------|------|---------|----------|----------|
| **付费用户数** | 付费机构数 | 20+ | 100+ | 200+ |
| **付费转化率** | 付费用户/试用用户 | >20% | >25% | >30% |
| **ARPU** | 每用户平均收入 | ¥5,000 | ¥10,000 | ¥15,000 |
| **LTV** | 客户生命周期价值 | ¥15,000 | ¥30,000 | ¥45,000 |
| **CAC** | 获客成本 | ¥3,000 | ¥2,500 | ¥2,000 |
| **LTV/CAC** | 投资回报率 | >3 | >5 | >10 |

### 12.3 数据看板

**实时看板**:
- ✅ 当前在线用户数
- ✅ 今日新增用户数
- ✅ 今日活跃用户数
- ✅ 今日代码执行次数
- ✅ 系统可用性

**每日看板**:
- ✅ DAU、MAU、DAU/MAU
- ✅ 新增用户数、留存率
- ✅ 学习时长、完成题数
- ✅ 付费用户数、营收

**每周看板**:
- ✅ WALU（北极星指标）
- ✅ 用户增长趋势
- ✅ 学习数据趋势
- ✅ 商业数据趋势

---

## 13. 风险管理

### 13.1 风险识别

**技术风险**:

| 风险 | 概率 | 影响 | 等级 | 应对策略 |
|------|------|------|------|---------|
| **Docker性能不足** | 中 | 高 | 🔥🔥 | 技术预研验证，准备备选方案 |
| **SQLite并发性能差** | 中 | 中 | 🔥 | 性能测试，准备MySQL迁移方案 |
| **代码执行安全漏洞** | 低 | 高 | 🔥🔥 | 安全测试，定期安全审计 |
| **系统稳定性问题** | 中 | 高 | 🔥🔥 | 监控系统，自动告警 |

**市场风险**:

| 风险 | 概率 | 影响 | 等级 | 应对策略 |
|------|------|------|------|---------|
| **竞品抢占市场** | 中 | 高 | 🔥🔥 | 差异化竞争，快速迭代 |
| **用户需求变化** | 中 | 中 | 🔥 | 用户调研，快速响应 |
| **市场规模不足** | 低 | 高 | 🔥🔥 | 市场调研，拓展市场 |

**团队风险**:

| 风险 | 概率 | 影响 | 等级 | 应对策略 |
|------|------|------|------|---------|
| **核心人员离职** | 中 | 高 | 🔥🔥 | 知识共享，备份人员 |
| **团队协作问题** | 低 | 中 | 🔥 | 团队建设，沟通机制 |
| **技能不足** | 中 | 中 | 🔥 | 培训，招聘 |

**商业风险**:

| 风险 | 概率 | 影响 | 等级 | 应对策略 |
|------|------|------|------|---------|
| **付费转化率低** | 中 | 高 | 🔥🔥 | 优化产品，提升价值 |
| **获客成本高** | 中 | 中 | 🔥 | 优化渠道，降低成本 |
| **现金流断裂** | 低 | 高 | 🔥🔥 | 融资，控制成本 |

### 13.2 应急预案

**系统故障应急预案**:

1. **发现故障**（监控系统自动告警）
2. **评估影响**（影响范围、用户数）
3. **启动应急响应**（通知相关人员）
4. **快速修复**（回滚代码、重启服务）
5. **恢复服务**（验证功能正常）
6. **事后分析**（根因分析、改进措施）

**数据丢失应急预案**:

1. **发现数据丢失**（用户反馈、监控告警）
2. **评估损失**（丢失数据量、影响用户）
3. **启动恢复**（从备份恢复数据）
4. **验证数据**（验证数据完整性）
5. **通知用户**（告知用户恢复情况）
6. **事后分析**（根因分析、改进备份策略）

**安全事件应急预案**:

1. **发现安全事件**（安全扫描、用户反馈）
2. **评估风险**（影响范围、严重程度）
3. **隔离风险**（关闭漏洞、限制访问）
4. **修复漏洞**（代码修复、安全加固）
5. **通知用户**（告知用户安全事件）
6. **事后分析**（根因分析、改进安全措施）

---

## 14. 附录

### 14.1 术语表

| 术语 | 英文 | 定义 |
|------|------|------|
| **MVP** | Minimum Viable Product | 最小可行产品 |
| **OKR** | Objectives and Key Results | 目标与关键成果 |
| **AARRR** | Acquisition, Activation, Retention, Revenue, Referral | 增长黑客模型 |
| **DAU** | Daily Active Users | 日活跃用户数 |
| **MAU** | Monthly Active Users | 月活跃用户数 |
| **WALU** | Weekly Active Learning Users | 每周活跃学习用户数 |
| **NPS** | Net Promoter Score | 净推荐值 |
| **LTV** | Lifetime Value | 客户生命周期价值 |
| **CAC** | Customer Acquisition Cost | 获客成本 |
| **ARPU** | Average Revenue Per User | 每用户平均收入 |
| **TAM** | Total Addressable Market | 总可达市场 |
| **SAM** | Serviceable Available Market | 可服务市场 |
| **SOM** | Serviceable Obtainable Market | 可获得市场 |
| **RBAC** | Role-Based Access Control | 基于角色的访问控制 |
| **JWT** | JSON Web Token | JSON网络令牌 |
| **ORM** | Object-Relational Mapping | 对象关系映射 |
| **CI/CD** | Continuous Integration/Continuous Deployment | 持续集成/持续部署 |
| **POC** | Proof of Concept | 概念验证 |
| **ADR** | Architecture Decision Record | 架构决策记录 |
| **UAT** | User Acceptance Testing | 用户验收测试 |
| **E2E** | End-to-End | 端到端 |

### 14.2 参考文档

**内部文档**:
- [SRS软件需求规格说明](docs/SRS_SOFTWARE_REQUIREMENTS_SPECIFICATION.md)
- [DDS详细设计说明](docs/DDS_DETAILED_DESIGN_SPECIFICATION.md)
- [PRD V2.0最终版](docs/PRD_V2_FINAL.md)
- [PM审阅和讨论](docs/PRD_PM_REVIEW_AND_DISCUSSION.md)

**外部参考**:
- [Python官方文档](https://docs.python.org/3/)
- [Vue.js官方文档](https://vuejs.org/)
- [Flask官方文档](https://flask.palletsprojects.com/)
- [Docker官方文档](https://docs.docker.com/)
- [CodeMirror官方文档](https://codemirror.net/)

### 14.3 变更历史

| 版本 | 日期 | 作者 | 变更内容 |
|------|------|------|---------|
| **V3.0** | 2025-11-07 | 产品团队 | 全面完善和扩充PRD，细化每一章节 |
| **V2.0** | 2025-11-07 | 产品团队 | 项目经理审阅后的最终版 |
| **V1.0** | 2025-11-06 | 产品团队 | 初始版本 |

### 14.4 审批记录

| 角色 | 姓名 | 审批意见 | 日期 | 签名 |
|------|------|---------|------|------|
| **产品经理** | - | 待审批 | - | - |
| **技术负责人** | - | 待审批 | - | - |
| **项目经理** | - | 待审批 | - | - |
| **管理层** | - | 待审批 | - | - |

---

## 文档结束

**文档版本**: V3.0 Enhanced
**文档状态**: 待审批
**创建日期**: 2025-11-07
**最后更新**: 2025-11-07
**总页数**: 约150页（3900+行）
**总字数**: 约50,000字

**下一步行动**:
1. ✅ 提交管理层审批
2. ✅ 组建开发团队
3. ✅ 启动技术预研（2周）
4. ✅ 开始MVP开发（3个月）

**联系方式**:
- 产品经理: product@pythonlearn.com
- 技术负责人: tech@pythonlearn.com
- 项目经理: pm@pythonlearn.com

---

**© 2025 pythonLearn. All Rights Reserved.**




















# ğŸ—ï¸ æŠ€æœ¯æ¶æ„æ¼”è¿›è§„åˆ’

## ğŸ“Š å½“å‰æ¶æ„ï¼ˆV1.0ï¼‰

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æµè§ˆå™¨                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  HTML/CSS    â”‚  â”‚  JavaScript  â”‚  â”‚  CodeMirror  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ HTTP
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Flask Web Server                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   è·¯ç”±å±‚     â”‚  â”‚   ä¸šåŠ¡é€»è¾‘   â”‚  â”‚   å®‰å…¨æ¨¡å—   â”‚      â”‚
â”‚  â”‚  (app.py)    â”‚  â”‚              â”‚  â”‚  (sandbox)   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä»£ç æ‰§è¡Œå±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ multiprocess â”‚  â”‚  ASTæ£€æŸ¥     â”‚  â”‚  èµ„æºé™åˆ¶    â”‚      â”‚
â”‚  â”‚   è¿›ç¨‹æ±      â”‚  â”‚              â”‚  â”‚  (resource)  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ–‡ä»¶ç³»ç»Ÿ                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  é¢˜ç›®æ–‡ä»¶    â”‚  â”‚  ç­”æ¡ˆæ–‡ä»¶    â”‚  â”‚  ä¸´æ—¶æ–‡ä»¶    â”‚      â”‚
â”‚  â”‚  (.py)       â”‚  â”‚  (.py)       â”‚  â”‚  (tmpdir)    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

**å‰ç«¯**:
- HTML5/CSS3 - é™æ€é¡µé¢
- JavaScript ES6 - åŸç”ŸJSï¼Œæ— æ¡†æ¶
- CodeMirror 5.65 - ä»£ç ç¼–è¾‘å™¨

**åç«¯**:
- Flask 2.3.0 - Webæ¡†æ¶
- Python 3.8+ - è¿è¡Œç¯å¢ƒ
- multiprocessing - è¿›ç¨‹éš”ç¦»

**å­˜å‚¨**:
- æ–‡ä»¶ç³»ç»Ÿ - é¢˜ç›®å’Œç­”æ¡ˆå­˜å‚¨
- æ— æ•°æ®åº“ - æ— æŒä¹…åŒ–

**å®‰å…¨**:
- ASTåˆ†æ - ä»£ç æ£€æŸ¥
- resourceæ¨¡å— - èµ„æºé™åˆ¶ï¼ˆUnixï¼‰
- é€Ÿç‡é™åˆ¶ - å†…å­˜å­—å…¸

### ä¼˜ç‚¹

âœ… **ç®€å•ç›´æ¥** - æ˜“äºç†è§£å’Œéƒ¨ç½²  
âœ… **æ— ä¾èµ–** - ä¸éœ€è¦æ•°æ®åº“  
âœ… **å¿«é€Ÿå¯åŠ¨** - ä¸€é”®å¯åŠ¨  
âœ… **è·¨å¹³å°** - æ”¯æŒLinux/macOS/Windows

### ç¼ºç‚¹

âŒ **æ— ç”¨æˆ·ç³»ç»Ÿ** - æ— æ³•è¿½è¸ªä¸ªäººè¿›åº¦  
âŒ **æ— æŒä¹…åŒ–** - åˆ·æ–°é¡µé¢ä¸¢å¤±æ•°æ®  
âŒ **æ€§èƒ½å—é™** - å•è¿›ç¨‹ï¼Œæ— ç¼“å­˜  
âŒ **æ‰©å±•æ€§å·®** - éš¾ä»¥æ”¯æŒå¤šç”¨æˆ·  
âŒ **å®‰å…¨æ€§ä¸€èˆ¬** - è¿›ç¨‹éš”ç¦»ä¸å¤Ÿå½»åº•

---

## ğŸš€ ç›®æ ‡æ¶æ„ï¼ˆV2.0ï¼‰

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æµè§ˆå™¨                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Vue.js     â”‚  â”‚    Vuex      â”‚  â”‚  CodeMirror  â”‚      â”‚
â”‚  â”‚  (å‰ç«¯æ¡†æ¶)  â”‚  â”‚  (çŠ¶æ€ç®¡ç†)  â”‚  â”‚  (ç¼–è¾‘å™¨)    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ HTTPS + WebSocket
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Nginx (åå‘ä»£ç†)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  è´Ÿè½½å‡è¡¡    â”‚  â”‚   SSLç»ˆæ­¢    â”‚  â”‚  é™æ€èµ„æº    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FastAPI/Flask (APIå±‚)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  RESTful API â”‚  â”‚  WebSocket   â”‚  â”‚  è®¤è¯æˆæƒ    â”‚      â”‚
â”‚  â”‚              â”‚  â”‚  (å®æ—¶é€šä¿¡)  â”‚  â”‚  (JWT)       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Redis      â”‚  â”‚  PostgreSQL  â”‚  â”‚   Celery     â”‚
â”‚  (ç¼“å­˜/é˜Ÿåˆ—) â”‚  â”‚  (ä¸»æ•°æ®åº“)  â”‚  â”‚  (ä»»åŠ¡é˜Ÿåˆ—)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚    Docker    â”‚
                                  â”‚  (ä»£ç æ²™ç®±)  â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆå‡çº§

**å‰ç«¯**:
- Vue.js 3 - ç°ä»£åŒ–å‰ç«¯æ¡†æ¶
- Vuex/Pinia - çŠ¶æ€ç®¡ç†
- Vite - æ„å»ºå·¥å…·
- TypeScript - ç±»å‹å®‰å…¨
- Tailwind CSS - æ ·å¼æ¡†æ¶

**åç«¯**:
- FastAPI - é«˜æ€§èƒ½å¼‚æ­¥æ¡†æ¶
- SQLAlchemy - ORM
- Alembic - æ•°æ®åº“è¿ç§»
- Celery - å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—
- Redis - ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—

**æ•°æ®åº“**:
- PostgreSQL - ä¸»æ•°æ®åº“
- Redis - ç¼“å­˜å’Œä¼šè¯

**éƒ¨ç½²**:
- Docker - å®¹å™¨åŒ–
- Kubernetes - å®¹å™¨ç¼–æ’ï¼ˆå¯é€‰ï¼‰
- Nginx - åå‘ä»£ç†
- Let's Encrypt - SSLè¯ä¹¦

**ç›‘æ§**:
- Prometheus - æŒ‡æ ‡æ”¶é›†
- Grafana - å¯è§†åŒ–
- ELK Stack - æ—¥å¿—åˆ†æ
- Sentry - é”™è¯¯è¿½è¸ª

### ä¼˜ç‚¹

âœ… **é«˜æ€§èƒ½** - å¼‚æ­¥å¤„ç†ï¼Œç¼“å­˜ä¼˜åŒ–  
âœ… **å¯æ‰©å±•** - å¾®æœåŠ¡æ¶æ„ï¼Œæ°´å¹³æ‰©å±•  
âœ… **å®‰å…¨æ€§é«˜** - Dockeréš”ç¦»ï¼Œå®Œå–„çš„è®¤è¯  
âœ… **ç”¨æˆ·ä½“éªŒå¥½** - ç°ä»£åŒ–UIï¼Œå®æ—¶æ›´æ–°  
âœ… **å¯è§‚æµ‹æ€§å¼º** - å®Œå–„çš„ç›‘æ§å’Œæ—¥å¿—

---

## ğŸ“ˆ æ¼”è¿›è·¯å¾„

### é˜¶æ®µ1ï¼šæ•°æ®æŒä¹…åŒ–ï¼ˆ1ä¸ªæœˆï¼‰

**ç›®æ ‡**: å¼•å…¥æ•°æ®åº“ï¼Œæ”¯æŒç”¨æˆ·ç³»ç»Ÿ

**æ­¥éª¤**:
1. è®¾è®¡æ•°æ®åº“æ¨¡å‹
2. é›†æˆSQLAlchemy
3. å®ç°ç”¨æˆ·æ³¨å†Œ/ç™»å½•
4. è¿ç§»ç°æœ‰æ•°æ®

**æ•°æ®åº“è®¾è®¡**:
```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(120) UNIQUE NOT NULL,
    password_hash VARCHAR(128) NOT NULL,
    username VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- å­¦ä¹ è¿›åº¦è¡¨
CREATE TABLE progress (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    question_id VARCHAR(10) NOT NULL,
    status VARCHAR(20),  -- started/completed
    code TEXT,
    submitted_at TIMESTAMP,
    execution_time FLOAT,
    UNIQUE(user_id, question_id)
);

-- ä»£ç æäº¤å†å²
CREATE TABLE submissions (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    question_id VARCHAR(10) NOT NULL,
    code TEXT NOT NULL,
    result TEXT,
    success BOOLEAN,
    submitted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æˆå°±å¾½ç« 
CREATE TABLE achievements (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    badge_type VARCHAR(50),
    earned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**é¢„è®¡å·¥ä½œé‡**: 3-4å‘¨

### é˜¶æ®µ2ï¼šæ€§èƒ½ä¼˜åŒ–ï¼ˆ2-3å‘¨ï¼‰

**ç›®æ ‡**: å¼•å…¥ç¼“å­˜å’Œå¼‚æ­¥å¤„ç†

**æ­¥éª¤**:
1. é›†æˆRedisç¼“å­˜
2. å®ç°Celeryä»»åŠ¡é˜Ÿåˆ—
3. ä¼˜åŒ–ä»£ç æ‰§è¡Œæµç¨‹
4. æ·»åŠ ç»“æœç¼“å­˜

**Redisä½¿ç”¨**:
```python
# ç¼“å­˜é¢˜ç›®æ•°æ®
@cache.memoize(timeout=3600)
def get_question(question_id: str):
    return Question.query.get(question_id)

# ç¼“å­˜æ‰§è¡Œç»“æœ
def cache_execution_result(code_hash: str, result: dict):
    cache.set(f"exec:{code_hash}", result, timeout=300)

# é€Ÿç‡é™åˆ¶
def check_rate_limit(user_id: int):
    key = f"rate:{user_id}"
    count = cache.get(key) or 0
    if count > 30:  # æ¯åˆ†é’Ÿ30æ¬¡
        raise RateLimitError()
    cache.incr(key)
    cache.expire(key, 60)
```

**Celeryä»»åŠ¡**:
```python
@celery.task
def execute_code_async(code: str, question_id: str):
    """å¼‚æ­¥æ‰§è¡Œä»£ç """
    result = sandbox.execute(code)
    return result

# è°ƒç”¨
task = execute_code_async.delay(code, question_id)
result = task.get(timeout=30)
```

**é¢„è®¡å·¥ä½œé‡**: 2-3å‘¨

### é˜¶æ®µ3ï¼šDockeræ²™ç®±ï¼ˆ3-4å‘¨ï¼‰

**ç›®æ ‡**: ä½¿ç”¨Dockerå®¹å™¨éš”ç¦»ä»£ç æ‰§è¡Œ

**æ­¥éª¤**:
1. åˆ›å»ºPythonæ‰§è¡Œé•œåƒ
2. å®ç°Docker APIé›†æˆ
3. èµ„æºé™åˆ¶é…ç½®
4. æ€§èƒ½ä¼˜åŒ–

**Dockeré•œåƒ**:
```dockerfile
# Dockerfile.sandbox
FROM python:3.9-alpine

# å®‰è£…å¿…è¦çš„åº“
RUN pip install --no-cache-dir \
    numpy pandas scikit-learn jieba

# åˆ›å»ºérootç”¨æˆ·
RUN adduser -D -u 1000 sandbox
USER sandbox

# å·¥ä½œç›®å½•
WORKDIR /code

# å…¥å£ç‚¹
ENTRYPOINT ["python", "-c"]
```

**æ‰§è¡Œä»£ç **:
```python
import docker

client = docker.from_env()

def execute_in_docker(code: str) -> dict:
    """åœ¨Dockerå®¹å™¨ä¸­æ‰§è¡Œä»£ç """
    try:
        container = client.containers.run(
            'python-sandbox:latest',
            command=code,
            mem_limit='256m',
            cpu_quota=100000,  # 10% CPU
            network_disabled=True,
            read_only=True,
            remove=True,
            timeout=10,
            stdout=True,
            stderr=True
        )
        return {
            'success': True,
            'output': container.decode('utf-8')
        }
    except docker.errors.ContainerError as e:
        return {
            'success': False,
            'error': str(e)
        }
```

**é¢„è®¡å·¥ä½œé‡**: 3-4å‘¨

### é˜¶æ®µ4ï¼šå‰ç«¯ç°ä»£åŒ–ï¼ˆ4-6å‘¨ï¼‰

**ç›®æ ‡**: ä½¿ç”¨Vue.jsé‡æ„å‰ç«¯

**æ­¥éª¤**:
1. é¡¹ç›®åˆå§‹åŒ–ï¼ˆVite + Vue3ï¼‰
2. ç»„ä»¶åŒ–å¼€å‘
3. çŠ¶æ€ç®¡ç†ï¼ˆPiniaï¼‰
4. APIé›†æˆ

**é¡¹ç›®ç»“æ„**:
```
web-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ CodeEditor.vue
â”‚   â”‚   â”œâ”€â”€ QuestionList.vue
â”‚   â”‚   â”œâ”€â”€ TestResult.vue
â”‚   â”‚   â””â”€â”€ UserProfile.vue
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ Home.vue
â”‚   â”‚   â”œâ”€â”€ Question.vue
â”‚   â”‚   â””â”€â”€ Dashboard.vue
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ user.ts
â”‚   â”‚   â”œâ”€â”€ questions.ts
â”‚   â”‚   â””â”€â”€ progress.ts
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ client.ts
â”‚   â”œâ”€â”€ App.vue
â”‚   â””â”€â”€ main.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ tsconfig.json
```

**æ ¸å¿ƒç»„ä»¶**:
```vue
<!-- CodeEditor.vue -->
<template>
  <div class="code-editor">
    <codemirror
      v-model="code"
      :options="editorOptions"
      @change="onCodeChange"
    />
    <div class="actions">
      <button @click="runCode">è¿è¡Œ</button>
      <button @click="resetCode">é‡ç½®</button>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { useQuestionStore } from '@/stores/questions'

const questionStore = useQuestionStore()
const code = ref('')

const runCode = async () => {
  const result = await questionStore.executeCode(code.value)
  // å¤„ç†ç»“æœ
}
</script>
```

**é¢„è®¡å·¥ä½œé‡**: 4-6å‘¨

### é˜¶æ®µ5ï¼šAPIæ ‡å‡†åŒ–ï¼ˆ2-3å‘¨ï¼‰

**ç›®æ ‡**: ä½¿ç”¨FastAPIé‡æ„åç«¯API

**æ­¥éª¤**:
1. FastAPIé¡¹ç›®åˆå§‹åŒ–
2. APIè·¯ç”±è®¾è®¡
3. æ•°æ®éªŒè¯ï¼ˆPydanticï¼‰
4. è‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆ

**APIè®¾è®¡**:
```python
from fastapi import FastAPI, Depends, HTTPException
from pydantic import BaseModel
from typing import List, Optional

app = FastAPI(
    title="Python Learning Platform API",
    version="2.0.0",
    docs_url="/api/docs"
)

# æ•°æ®æ¨¡å‹
class QuestionResponse(BaseModel):
    id: str
    name: str
    category: str
    difficulty: str
    description: str

class CodeExecutionRequest(BaseModel):
    code: str
    question_id: str

class CodeExecutionResponse(BaseModel):
    success: bool
    output: Optional[str]
    error: Optional[str]
    execution_time: float

# APIç«¯ç‚¹
@app.get("/api/v2/questions", response_model=List[QuestionResponse])
async def get_questions(
    category: Optional[str] = None,
    difficulty: Optional[str] = None,
    current_user: User = Depends(get_current_user)
):
    """è·å–é¢˜ç›®åˆ—è¡¨"""
    questions = await Question.filter(
        category=category,
        difficulty=difficulty
    )
    return questions

@app.post("/api/v2/execute", response_model=CodeExecutionResponse)
async def execute_code(
    request: CodeExecutionRequest,
    current_user: User = Depends(get_current_user)
):
    """æ‰§è¡Œä»£ç """
    # æ£€æŸ¥é€Ÿç‡é™åˆ¶
    await check_rate_limit(current_user.id)

    # å¼‚æ­¥æ‰§è¡Œ
    task = execute_code_async.delay(
        request.code,
        request.question_id,
        current_user.id
    )

    result = await task.get(timeout=30)
    return result
```

**é¢„è®¡å·¥ä½œé‡**: 2-3å‘¨

---

## ğŸ”„ è¿ç§»ç­–ç•¥

### æ¸è¿›å¼è¿ç§»

**åŸåˆ™**: ä¿æŒV1.0è¿è¡Œï¼Œé€æ­¥è¿ç§»åˆ°V2.0

**æ­¥éª¤**:

1. **å¹¶è¡Œè¿è¡Œ** (Week 1-2)
   - V1.0ç»§ç»­æœåŠ¡ç°æœ‰ç”¨æˆ·
   - V2.0åœ¨æµ‹è¯•ç¯å¢ƒè¿è¡Œ
   - æ•°æ®åŒæ­¥æœºåˆ¶

2. **ç°åº¦å‘å¸ƒ** (Week 3-4)
   - 10%ç”¨æˆ·åˆ‡æ¢åˆ°V2.0
   - ç›‘æ§æ€§èƒ½å’Œé”™è¯¯
   - æ”¶é›†ç”¨æˆ·åé¦ˆ

3. **å…¨é‡è¿ç§»** (Week 5-6)
   - 50%ç”¨æˆ·åˆ‡æ¢åˆ°V2.0
   - ç»§ç»­ç›‘æ§å’Œä¼˜åŒ–
   - å‡†å¤‡å›æ»šæ–¹æ¡ˆ

4. **å®Œå…¨åˆ‡æ¢** (Week 7-8)
   - 100%ç”¨æˆ·åˆ‡æ¢åˆ°V2.0
   - V1.0ä½œä¸ºå¤‡ä»½ä¿ç•™1ä¸ªæœˆ
   - æ•°æ®å®Œæ•´æ€§éªŒè¯

### æ•°æ®è¿ç§»

```python
# è¿ç§»è„šæœ¬
def migrate_user_progress():
    """è¿ç§»ç”¨æˆ·è¿›åº¦æ•°æ®"""
    # ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–
    old_progress = load_from_filesystem()

    # å†™å…¥æ•°æ®åº“
    for user_id, progress in old_progress.items():
        user = User.create(id=user_id)
        for question_id, data in progress.items():
            Progress.create(
                user_id=user.id,
                question_id=question_id,
                status=data['status'],
                code=data['code']
            )
```

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### V1.0 vs V2.0

| æŒ‡æ ‡ | V1.0 | V2.0 | æå‡ |
|------|------|------|------|
| å“åº”æ—¶é—´ (P95) | 2000ms | 500ms | **4x** |
| å¹¶å‘ç”¨æˆ· | 50 | 500 | **10x** |
| ä»£ç æ‰§è¡Œæ—¶é—´ | 5s | 3s | **1.7x** |
| å†…å­˜ä½¿ç”¨ | 512MB | 2GB | - |
| æ•°æ®åº“æŸ¥è¯¢ | N/A | <100ms | - |
| ç¼“å­˜å‘½ä¸­ç‡ | 0% | 80% | **âˆ** |

### æˆæœ¬åˆ†æ

**V1.0 (å•æœåŠ¡å™¨)**:
- æœåŠ¡å™¨: $20/æœˆ
- æ€»æˆæœ¬: $20/æœˆ

**V2.0 (åˆ†å¸ƒå¼)**:
- WebæœåŠ¡å™¨ (2å°): $40/æœˆ
- æ•°æ®åº“: $30/æœˆ
- Redis: $15/æœˆ
- Docker Registry: $10/æœˆ
- æ€»æˆæœ¬: $95/æœˆ

**ROI**: æ”¯æŒ10xç”¨æˆ·ï¼Œæˆæœ¬ä»…å¢åŠ 5x

---

## ğŸ›¡ï¸ å®‰å…¨å¢å¼º

### V1.0å®‰å…¨æªæ–½

- ASTä»£ç æ£€æŸ¥
- è¿›ç¨‹éš”ç¦»
- èµ„æºé™åˆ¶ï¼ˆUnixï¼‰
- é€Ÿç‡é™åˆ¶ï¼ˆå†…å­˜ï¼‰

### V2.0å®‰å…¨å¢å¼º

- **Dockerå®¹å™¨éš”ç¦»**
  - ç½‘ç»œéš”ç¦»
  - æ–‡ä»¶ç³»ç»Ÿåªè¯»
  - èµ„æºé™åˆ¶ï¼ˆCPU/å†…å­˜ï¼‰
  - érootç”¨æˆ·

- **è®¤è¯æˆæƒ**
  - JWT token
  - OAuth2.0
  - è§’è‰²æƒé™æ§åˆ¶
  - ä¼šè¯ç®¡ç†

- **æ•°æ®å®‰å…¨**
  - å¯†ç åŠ å¯†ï¼ˆbcryptï¼‰
  - SQLæ³¨å…¥é˜²æŠ¤ï¼ˆORMï¼‰
  - XSSé˜²æŠ¤
  - CSRFé˜²æŠ¤

- **å®¡è®¡æ—¥å¿—**
  - æ‰€æœ‰ä»£ç æ‰§è¡Œè®°å½•
  - ç”¨æˆ·è¡Œä¸ºè¿½è¸ª
  - å¼‚å¸¸è¡Œä¸ºæ£€æµ‹
  - è‡ªåŠ¨å‘Šè­¦

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### V1.0æµ‹è¯•

- æ‰‹åŠ¨æµ‹è¯•
- åŸºç¡€å•å…ƒæµ‹è¯•

### V2.0æµ‹è¯•ä½“ç³»

**å•å…ƒæµ‹è¯•**:
```python
# pytest
def test_code_execution():
    result = execute_code("print('hello')")
    assert result['success'] == True
    assert result['output'] == 'hello\n'

def test_rate_limit():
    for i in range(31):
        execute_code("print(1)")

    with pytest.raises(RateLimitError):
        execute_code("print(1)")
```

**é›†æˆæµ‹è¯•**:
```python
# APIæµ‹è¯•
def test_execute_api():
    response = client.post('/api/v2/execute', json={
        'code': 'print("test")',
        'question_id': 'A1'
    })
    assert response.status_code == 200
```

**æ€§èƒ½æµ‹è¯•**:
```python
# Locust
class UserBehavior(TaskSet):
    @task(1)
    def execute_code(self):
        self.client.post('/api/v2/execute', json={
            'code': 'print("test")',
            'question_id': 'A1'
        })

# ç›®æ ‡: 500å¹¶å‘ç”¨æˆ·ï¼Œå“åº”æ—¶é—´<500ms
```

**å®‰å…¨æµ‹è¯•**:
- SQLæ³¨å…¥æµ‹è¯•
- XSSæµ‹è¯•
- CSRFæµ‹è¯•
- ä»£ç æ²™ç®±é€ƒé€¸æµ‹è¯•

---

## ğŸ“ˆ ç›‘æ§æŒ‡æ ‡

### åº”ç”¨æŒ‡æ ‡

- è¯·æ±‚æ•°/ç§’ (RPS)
- å“åº”æ—¶é—´ (P50/P95/P99)
- é”™è¯¯ç‡
- ä»£ç æ‰§è¡ŒæˆåŠŸç‡

### ä¸šåŠ¡æŒ‡æ ‡

- æ´»è·ƒç”¨æˆ·æ•° (DAU/MAU)
- é¢˜ç›®å®Œæˆç‡
- ç”¨æˆ·ç•™å­˜ç‡
- å­¦ä¹ æ—¶é•¿

### åŸºç¡€è®¾æ–½æŒ‡æ ‡

- CPUä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨ç‡
- ç£ç›˜IO
- ç½‘ç»œæµé‡

### å‘Šè­¦è§„åˆ™

```yaml
# Prometheus alerts
groups:
  - name: api_alerts
    rules:
      - alert: HighErrorRate
        expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.05
        for: 5m
        annotations:
          summary: "High error rate detected"

      - alert: SlowResponse
        expr: histogram_quantile(0.95, http_request_duration_seconds) > 1
        for: 5m
        annotations:
          summary: "Slow response time"
```

---

## ğŸ¯ æˆåŠŸæ ‡å‡†

### æŠ€æœ¯æŒ‡æ ‡

- [ ] å“åº”æ—¶é—´ P95 < 500ms
- [ ] ç³»ç»Ÿå¯ç”¨æ€§ > 99.5%
- [ ] ä»£ç æ‰§è¡ŒæˆåŠŸç‡ > 95%
- [ ] ç¼“å­˜å‘½ä¸­ç‡ > 80%
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 80%

### ç”¨æˆ·æŒ‡æ ‡

- [ ] ç”¨æˆ·æ»¡æ„åº¦ > 4.5/5
- [ ] æ—¥æ´»ç”¨æˆ· > 100
- [ ] ç”¨æˆ·ç•™å­˜ç‡ (30å¤©) > 40%
- [ ] é¢˜ç›®å®Œæˆç‡ > 60%

### å¼€å‘æŒ‡æ ‡

- [ ] éƒ¨ç½²é¢‘ç‡ > 1æ¬¡/å‘¨
- [ ] å˜æ›´å¤±è´¥ç‡ < 5%
- [ ] å¹³å‡æ¢å¤æ—¶é—´ < 1å°æ—¶
- [ ] ä»£ç å®¡æŸ¥è¦†ç›–ç‡ 100%

---

## ğŸ“ æ€»ç»“

### æ¼”è¿›è·¯å¾„æ€»è§ˆ

```
V1.0 (å½“å‰)
    â†“ 1ä¸ªæœˆ
V1.5 (æ•°æ®åº“ + ç”¨æˆ·ç³»ç»Ÿ)
    â†“ 1ä¸ªæœˆ
V1.8 (ç¼“å­˜ + å¼‚æ­¥)
    â†“ 1ä¸ªæœˆ
V2.0 (Docker + å‰ç«¯ç°ä»£åŒ–)
    â†“ æŒç»­ä¼˜åŒ–
V2.x (åŠŸèƒ½æ‰©å±•)
```

### å…³é”®é‡Œç¨‹ç¢‘

- **Month 1**: æ•°æ®åº“é›†æˆï¼Œç”¨æˆ·ç³»ç»Ÿ
- **Month 2**: æ€§èƒ½ä¼˜åŒ–ï¼Œç¼“å­˜ç³»ç»Ÿ
- **Month 3**: Dockeræ²™ç®±ï¼Œå®‰å…¨å¢å¼º
- **Month 4**: å‰ç«¯é‡æ„ï¼ŒVue.js
- **Month 5**: APIæ ‡å‡†åŒ–ï¼ŒFastAPI
- **Month 6**: å…¨é‡ä¸Šçº¿ï¼Œç›‘æ§å®Œå–„

### é¢„æœŸæ”¶ç›Š

- **æ€§èƒ½**: 4xå“åº”é€Ÿåº¦æå‡
- **å®¹é‡**: 10xå¹¶å‘ç”¨æˆ·æ”¯æŒ
- **å®‰å…¨**: ä¼ä¸šçº§å®‰å…¨é˜²æŠ¤
- **ä½“éªŒ**: ç°ä»£åŒ–ç”¨æˆ·ç•Œé¢
- **å¯ç»´æŠ¤æ€§**: æ ‡å‡†åŒ–æ¶æ„ï¼Œæ˜“äºæ‰©å±•

---

**ğŸ“… æœ€åæ›´æ–°**: 2025-11-07
**ğŸ‘¨â€ğŸ’» æ¶æ„å¸ˆ**: [é¡¹ç›®ç»´æŠ¤è€…]
**ğŸ“§ è”ç³»æ–¹å¼**: [é‚®ç®±åœ°å€]


